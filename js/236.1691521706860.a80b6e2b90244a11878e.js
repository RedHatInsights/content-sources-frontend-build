"use strict";(self.webpackChunkcontent_sources_frontend=self.webpackChunkcontent_sources_frontend||[]).push([[236],{64828:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893);n(94789);var a=r(n(96533)),o=r(n(2722)),s=n(28803),l=n(72734),u=n(89624);t.default=function(){var e=(0,s.useAppContext)(),t=e.rbac,n=e.isFetchingFeatures;switch(!0){case!t||n:return(0,i.jsx)(u.Bullseye,{children:(0,i.jsx)(u.Spinner,{size:"xl"})});case null==t?void 0:t.read:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.default,{}),(0,i.jsx)(o.default,{})]});default:return(0,i.jsx)(l.NoPermissionsPage,{})}}},55730:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(85893),u=o(n(92950)),c=n(88767),d=n(86706),f=s(n(64828)),p=n(28803),h=n(16239),v=new c.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});t.default=function(e){var t=e.logger,n=u.default.useMemo((function(){return(0,h.resetStore)(),t?(0,h.createStore)(t).store:(0,h.createStore)().store}),[t]);return(0,u.useEffect)((function(){var e,t;null===(t=null===(e=null===insights||void 0===insights?void 0:insights.chrome)||void 0===e?void 0:e.appAction)||void 0===t||t.call(e,"view-list-page")}),[]),(0,l.jsx)(d.Provider,r({store:n},{children:(0,l.jsx)(c.QueryClientProvider,r({client:v},{children:(0,l.jsx)(p.ContextProvider,{children:(0,l.jsx)(f.default,{})})}))}))}},97237:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(44439),i=n(92950);t.default=function(e,t){var n=(0,i.useState)(e),a=n[0],o=n[1];return(0,i.useEffect)((function(){if(!(0,r.isEqual)(e,a)){var n=setTimeout((function(){return o(e)}),t||500);return function(){clearTimeout(n)}}}),[e,t]),a}},11882:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(44439),i=n(92950);function a(e){var t=(0,i.useRef)();return(0,r.isEqual)(e,t.current)||(t.current=e),t.current}t.default=function(e,t){(0,i.useEffect)(e,t.map(a))}},90272:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(89624),a=r(n(44703));t.default=function(){var e=(0,a.default)().notify;return function(t,n,r){var a,o,s,l=t,u=n;switch(typeof(null===(a=null==r?void 0:r.response)||void 0===a?void 0:a.data)){case"string":u=r.response.data;break;case"object":null===(s=null===(o=null==r?void 0:r.response)||void 0===o?void 0:o.data.errors)||void 0===s||s.find((function(e){var t=e.title,n=e.detail,r=e.description;if(t&&(l=t),r&&(u=r),n&&(u=n),t||r||n)return!0}))}e({variant:i.AlertVariant.danger,title:l,description:u})}}},44703:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(83215),i=n(86706);t.default=function(){var e=(0,i.useDispatch)();return{notify:function(t){return e((0,r.addNotification)(t))}}}},10453:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(92950),i=n(16114);t.default=function(){var e=(0,i.useLocation)().pathname;return(0,r.useMemo)((function(){return e.split("content")[0]+"content"}),[e.split("content")[0]])}},25886:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=void 0;var a=n(85893),o=n(89624),s=n(14040),l=n(64470),u=n(92950),c=n(42060),d=n(92418),f=i(n(58578)),p=i(n(13876)),h=i(n(27021)),v=i(n(27484)),m=i(n(75946)),g=n(5294),x=n(16114),y=(0,c.createUseStyles)({mainContainer:{backgroundColor:l.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},mainContainer100Height:{composes:["$mainContainer"],minHeight:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0}});t.formatDate=function(e){return(0,v.default)(e).format("DD MMM YYYY HH:mm UTCZ")};var b="adminTaskPerPage";t.default=function(){var e=y(),n=(0,x.useNavigate)(),i=Number(localStorage.getItem(b))||20,l=(0,u.useState)(1),c=l[0],v=l[1],_=(0,u.useState)(i),j=_[0],S=_[1],I=(0,u.useState)(3),C=I[0],T=I[1],P=(0,u.useState)("desc"),w=P[0],k=P[1],O=(0,u.useState)({accountId:"",orgId:"",statuses:[]}),E=O[0],A=O[1],D=function(){return A({statuses:[],accountId:"",orgId:""})},R=0===E.statuses.length&&""===E.accountId&&""===E.orgId,N=(0,g.useAdminTaskListQuery)(c,j,E,["org_id","account_id","typename","queued_at","started_at","finished_at","status"][C]+":"+w),F=N.isLoading,L=N.error,M=N.isError,K=N.isFetching,U=N.data,V=void 0===U?{data:[],meta:{count:0,limit:20,offset:0}}:U,Q=K,B=function(e,t){return v(t)},G=function(e,t,n){localStorage.setItem(b,t.toString()),S(t),v(n)},Y=["Org ID","Account ID","Type","Queued At","Status"];if(M)throw L;var q=V.data,z=void 0===q?[]:q,H=V.meta.count,W=void 0===H?0:H,$="tasks",X="Certain actions, such as repository introspection, will start a task",Z=0===W;return Z&&R&&!F?(0,a.jsx)(o.Bullseye,r({"data-ouia-safe":!Q,"data-ouia-component-id":"admin_task_list_page"},{children:(0,a.jsx)(p.default,{notFiltered:R,clearFilters:D,itemName:$,notFilteredBody:X})})):(0,a.jsxs)(o.Grid,r({"data-ouia-safe":!Q,"data-ouia-component-id":"admin_task_list_page",className:Z?e.mainContainer100Height:e.mainContainer},{children:[(0,a.jsx)(x.Outlet,{}),(0,a.jsxs)(o.Flex,r({className:e.topContainer},{children:[(0,a.jsx)(h.default,{isLoading:F,setFilterData:function(e){A(e),v(1)},filterData:E}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(f.default,r({hide:Z},{children:(0,a.jsx)(o.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",isDisabled:F,itemCount:W,perPage:j,page:c,onSetPage:B,isCompact:!0,onPerPageSelect:G})}))})]})),(0,a.jsx)(f.default,r({hide:!F},{children:(0,a.jsx)(o.Grid,r({className:e.mainContainer},{children:(0,a.jsx)(d.SkeletonTable,{rowSize:j,colSize:Y.length,variant:s.TableVariant.compact})}))})),(0,a.jsx)(f.default,r({hide:Z||F},{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.TableComposable,r({"aria-label":"Admin tasks table",ouiaId:"admin_tasks_table",variant:"compact"},{children:[(0,a.jsx)(s.Thead,{children:(0,a.jsxs)(s.Tr,{children:[Y.map((function(e,t){return(0,a.jsx)(s.Th,r({sort:(n=t,{sortBy:{index:C,direction:w,defaultDirection:"asc"},onSort:function(e,t,n){T(t),k(n)},columnIndex:n})},{children:e}),e+"column");var n})),(0,a.jsx)(s.Th,{children:(0,a.jsx)(o.Spinner,{size:"md",className:Q?"":e.invisible})})]})}),(0,a.jsx)(s.Tbody,{children:z.map((function(e){return(0,a.jsxs)(s.Tr,{children:[(0,a.jsx)(s.Td,{children:e.org_id}),(0,a.jsx)(s.Td,{children:e.account_id?e.account_id:"Unknown"}),(0,a.jsx)(s.Td,{children:e.typename}),(0,a.jsx)(s.Td,{children:(0,t.formatDate)(e.queued_at)}),(0,a.jsx)(s.Td,{children:(0,a.jsx)(m.default,{status:e.status})}),(0,a.jsx)(s.Td,r({width:10},{children:(0,a.jsx)(o.Button,r({onClick:function(){return n(e.uuid)},variant:"secondary",ouiaId:"view_task_details"},{children:"View Details"}))}))]},e.uuid)}))})]})),(0,a.jsxs)(o.Flex,r({className:e.bottomContainer},{children:[(0,a.jsx)(o.FlexItem,{}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(o.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:W,perPage:j,page:c,onSetPage:B,variant:o.PaginationVariant.bottom,onPerPageSelect:G})})]}))]})})),(0,a.jsx)(f.default,r({hide:!Z||F},{children:(0,a.jsx)(p.default,{notFiltered:R,clearFilters:D,itemName:$,notFilteredBody:X})}))]}))}},27021:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),s=n(92950),l=n(89624),u=a(n(6378)),c=n(51225),d=n(64470),f=a(n(58578)),p=a(n(97237)),h=(0,n(42060).createUseStyles)({chipsContainer:{backgroundColor:d.global_BackgroundColor_100.value,paddingTop:"16px"},clearFilters:{marginLeft:"16px"},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:d.global_secondary_color_100.value,position:"relative",top:"3px",left:"-5px",pointerEvents:"none"}}),v=["Running","Failed","Completed","Canceled","Pending"],m=["Account ID","Org ID","Status"];t.default=function(e){var t=e.isLoading,n=e.setFilterData,a=e.filterData,d=h(),g=(0,s.useState)("Account ID"),x=g[0],y=g[1],b=(0,s.useState)(""),_=b[0],j=b[1],S=(0,s.useState)(""),I=S[0],C=S[1],T=(0,s.useState)([]),P=T[0],w=T[1],k=function(){j(""),C(""),w([]),n({accountId:"",orgId:"",statuses:[]})};(0,s.useEffect)((function(){""!==a.accountId||""!==a.orgId||0!==a.statuses.length||""===_&&""===I&&0===P.length||k()}),[a]);var O=(0,p.default)({accountId:_,orgId:I,selectedStatuses:P}),E=O.accountId,A=O.orgId,D=O.selectedStatuses;(0,s.useEffect)((function(){n({accountId:E,orgId:A,statuses:D})}),[E,A,D]);var R=(0,s.useMemo)((function(){switch(x){case"Account ID":return(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.TextInput,{isDisabled:t,id:"account-id",ouiaId:"filter_account_id",placeholder:"Filter by account ID",value:_,onChange:function(e){return j(e)},className:d.searchInput}),(0,o.jsx)(c.SearchIcon,{size:"sm",className:d.searchIcon})]});case"Org ID":return(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.TextInput,{isDisabled:t,id:"org-id",ouiaId:"filter_org_id",placeholder:"Filter by org ID",value:I,onChange:function(e){return C(e)},className:d.searchInput}),(0,o.jsx)(c.SearchIcon,{size:"sm",className:d.searchIcon})]});case"Status":return(0,o.jsx)(u.default,{toggleAriaLabel:"filter status",toggleId:"statusSelect",ouiaId:"filter_status",isDisabled:t,options:v,variant:l.SelectVariant.checkbox,selectedProp:P,setSelected:w,placeholderText:"Filter by status"});default:return(0,o.jsx)(o.Fragment,{})}}),[x,t,_,I,P]);return(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexItem,{children:(0,o.jsxs)(l.InputGroup,{children:[(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(u.default,{toggleId:"filterSelectionDropdown",ouiaId:"filter_type",isDisabled:t,options:m,variant:l.SelectVariant.single,selectedProp:x,setSelected:y,placeholderText:"filter",toggleIcon:(0,o.jsx)(c.FilterIcon,{})})}),(0,o.jsx)(l.FlexItem,{children:R})]})}),(0,o.jsx)(f.default,r({hide:!(""!==_||""!==I||P.length)},{children:(0,o.jsxs)(l.FlexItem,r({fullWidth:{default:"fullWidth"},className:d.chipsContainer},{children:[(0,o.jsx)(l.ChipGroup,r({categoryName:"Status"},{children:P.map((function(e){return(0,o.jsx)(l.Chip,r({onClick:function(){return t=e,void w(i([],P,!0).filter((function(e){return e!==t})));var t}},{children:e}),e)}))})),""!==I&&(0,o.jsx)(l.ChipGroup,r({categoryName:"Org ID"},{children:(0,o.jsx)(l.Chip,r({onClick:function(){return C("")}},{children:I}),"org_id_chip")})),""!==_&&(0,o.jsx)(l.ChipGroup,r({categoryName:"Account ID"},{children:(0,o.jsx)(l.Chip,r({onClick:function(){return j("")}},{children:_}),"account_id_chip")})),(""!==E&&""!==_||""!==A&&""!==I||!!(null==P?void 0:P.length))&&(0,o.jsx)(l.Button,r({className:d.clearFilters,onClick:k,variant:"link",isInline:!0},{children:"Clear filters"}))]}))}))]})}},75946:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(51225),s=n(89624),l=i(n(14288)),u=n(64470),c=n(42060),d=u.global_danger_color_100.value,f=u.global_success_color_100.value,p=u.global_warning_color_100.value,h=(0,c.createUseStyles)({spinner:{animationDuration:"6s !important",margin:"-3px 0"}});t.default=function(e){var t=e.status,n=h();switch(t){case"running":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(s.Spinner,{size:"md",className:n.spinner})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(l.default,r({color:"blue"},{children:"Running"}))})]}));case"failed":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.ExclamationCircleIcon,{color:d})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(l.default,r({color:"green"},{children:"Failed"}))})]}));case"completed":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.CheckCircleIcon,{color:f})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(l.default,r({color:"green"},{children:"Completed"}))})]}));case"canceled":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.BanIcon,{color:d})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(l.default,r({color:"green"},{children:"Canceled"}))})]}));case"pending":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.ClockIcon,{color:p})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(l.default,r({color:"blue"},{children:"Pending"}))})]}));default:return(0,a.jsx)(a.Fragment,{})}}},88296:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),s=n(42060),l=n(92950),u=i(n(74965)),c=i(n(55171)),d=i(n(58578)),f=n(5294),p=n(16114),h=n(87034),v=i(n(10453)),m=(0,s.createUseStyles)({jsonView:{fontSize:"12px"}});t.default=function(){var e=(0,p.useParams)().taskUUID,t=m(),n=(0,p.useNavigate)(),i=(0,v.default)(),s=function(){return n("".concat(i,"/").concat(h.ADMIN_TASKS_ROUTE))},g=(0,l.useState)(0),x=g[0],y=g[1],b=(0,l.createRef)(),_=(0,f.useFetchAdminTaskQuery)(e),j=_.isLoading,S=_.isFetching,I=_.data,C=_.isError;(0,l.useEffect)((function(){C&&s()}),[C]);var T=(0,l.useMemo)((function(){var e=[];if(!I)return e;if(I.payload&&e.push({title:"Payload",data:I.payload,contentRef:(0,l.createRef)()}),"snapshot"===I.typename){var t=I.pulp;t&&(t.sync&&e.push({title:"Sync",data:t.sync,contentRef:(0,l.createRef)()}),t.distribution&&e.push({title:"Distribution",data:t.distribution,contentRef:(0,l.createRef)()}),t.publication&&e.push({title:"Publication",data:t.publication,contentRef:(0,l.createRef)()}))}return e}),[null==I?void 0:I.uuid,S]),P=S&&!!I,w=j||!I;return(0,a.jsxs)(o.Modal,r({position:"top",variant:o.ModalVariant.medium,ouiaId:"task_details",ouiaSafe:!P,"aria-label":"Task details",isOpen:!0,onClose:s,header:(0,a.jsx)(d.default,r({hide:j},{children:(0,a.jsxs)(o.Tabs,r({activeKey:x,onSelect:function(e,t){y(t)},"aria-label":"Task tabs",ouiaId:"task-tabs"},{children:[(0,a.jsx)(o.Tab,{title:(0,a.jsx)(o.TabTitleText,{children:"Task details"}),"aria-label":"Task details",ouiaId:"task-details",eventKey:0,tabContentRef:b}),T.map((function(e){var t=e.title,n=e.contentRef;return(0,a.jsx)(o.Tab,{eventKey:t,"aria-label":t,ouiaId:t,tabContentRef:n,title:(0,a.jsx)(o.TabTitleText,{children:t})},t)}))]}))}))},{children:[(0,a.jsx)(d.default,r({hide:!w},{children:(0,a.jsx)(o.Bullseye,{children:(0,a.jsx)(o.Spinner,{})})})),(0,a.jsxs)(d.default,r({hide:w},{children:[(0,a.jsx)(o.TabContent,r({"aria-label":"Task details",eventKey:0,id:"task-details",ref:b},{children:(0,a.jsx)(u.default,{adminTask:I})})),T.map((function(e,n){var i=e.title,s=e.data,l=e.contentRef;return(0,a.jsx)(o.TabContent,r({eventKey:i,"aria-label":i,id:i,className:t.jsonView,ref:l,hidden:!0},{children:(0,a.jsx)(c.default,{name:null,src:s,enableClipboard:function(e){navigator.clipboard.writeText(JSON.stringify(e.src,null,"\t"))}})}),n)}))]}))]}))}},74965:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(85893),i=n(89624),a=n(25886);t.default=function(e){var t=e.adminTask;return(0,r.jsxs)(i.DescriptionList,{children:[(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"UUID"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.uuid})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Account ID"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.account_id?t.account_id:"Unknown; repository configuration deleted"})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Org ID"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.org_id})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Type"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.typename})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Status"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.status})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Queued At"}),(0,r.jsx)(i.DescriptionListDescription,{children:(0,a.formatDate)(t.queued_at)})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Started At"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.started_at?(0,a.formatDate)(t.started_at):"Not started"})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Finished At"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.finished_at?(0,a.formatDate)(t.finished_at):"Not finished"})]}),(0,r.jsxs)(i.DescriptionListGroup,{children:[(0,r.jsx)(i.DescriptionListTerm,{children:"Error"}),(0,r.jsx)(i.DescriptionListDescription,{children:t.error?t.error:"None"})]})]})}},98243:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useClearCheckedRepositories=void 0;var a=n(85893),o=n(89624),s=n(14040),l=n(64470),u=n(92950),c=n(42060),d=n(92418),f=n(31104),p=i(n(38824)),h=i(n(58578)),v=i(n(13876)),m=n(88767),g=i(n(29906)),x=i(n(87322)),y=i(n(23903)),b=n(28803),_=i(n(55537)),j=i(n(27484)),S=n(16114),I=(0,c.createUseStyles)({mainContainer:{backgroundColor:l.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},mainContainer100Height:{composes:["$mainContainer"],minHeight:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0},checkboxMinWidth:{minWidth:"45px!important"}}),C="contentListPerPage";t.useClearCheckedRepositories=function(){return(0,S.useOutletContext)()},t.default=function(){var e,t,n,i=I(),l=(0,m.useQueryClient)(),c=(0,S.useNavigate)(),T=(0,b.useAppContext)().rbac,P=Number(localStorage.getItem(C))||20,w=(0,u.useState)(1),k=w[0],O=w[1],E=(0,u.useState)(P),A=E[0],D=E[1],R=(0,u.useState)(0),N=R[0],F=R[1],L=(0,u.useState)("asc"),M=L[0],K=L[1],U=(0,u.useState)(new Set),V=U[0],Q=U[1],B=(0,u.useState)({searchQuery:"",versions:[],arches:[],statuses:[]}),G=B[0],Y=B[1],q=function(){return Y({searchQuery:"",versions:[],arches:[],statuses:[]})},z=!(null===(e=G.arches)||void 0===e?void 0:e.length)&&""===G.searchQuery&&!(null===(t=G.versions)||void 0===t?void 0:t.length)&&!(null===(n=G.statuses)||void 0===n?void 0:n.length),H=(0,f.useRepositoryParams)(),W=H.isLoading,$=H.error,X=H.isError,Z=H.data,J=void 0===Z?{distribution_versions:[],distribution_arches:[]}:Z,ee=J.distribution_versions,te=J.distribution_arches,ne=["name","distribution_arch","distribution_versions","package_count","last_introspection_time","status"],re=function(){return ne[N]+":"+M},ie=(0,f.useContentListQuery)(k,A,G,re()),ae=ie.isLoading,oe=ie.error,se=ie.isError,le=ie.isFetching,ue=ie.data,ce=void 0===ue?{data:[],meta:{count:0,limit:20,offset:0}}:ue,de=(0,f.useDeleteContentItemMutate)(l,k,A,G,re()),fe=de.mutateAsync,pe=de.isLoading,he=(0,f.useIntrospectRepositoryMutate)(l,k,A,G,re()),ve=he.mutateAsync,me=he.isLoading,ge=function(e){return ve({uuid:e,reset_count:!0})},xe=(0,f.useBulkDeleteContentItemMutate)(l,V,k,A,G,re()),ye=xe.mutateAsync,be=xe.isLoading,_e=pe||le||W||me||be,je=function(e,t){return O(t)},Se=function(e,t,n){localStorage.setItem(C,t.toString()),D(t),O(n)},Ie=["Name","Architecture","Versions","Packages","Last Introspection","Status"],Ce=function(e){var t;return null===(t=te.find((function(t){var n=t.label;return e===n})))||void 0===t?void 0:t.name};if(se)throw oe;if(X)throw $;var Te=ce.data,Pe=void 0===Te?[]:Te,we=ce.meta.count,ke=void 0===we?0:we,Oe=(0,u.useCallback)((function(e){return[{title:"Delete",onClick:function(){return fe(null==e?void 0:e.uuid).then((function(){Ee(),k>1&&ke/A+1>=k&&(ke-1)%A==0&&O(k-1)}))}},{isDisabled:_e,title:"Edit",onClick:function(){c("edit-repository?repoUUIDS=".concat(e.uuid))}},{isDisabled:_e||"Retrying"==(null==e?void 0:e.status),title:"Introspect Now",onClick:function(){return ge(null==e?void 0:e.uuid).then(Ee)}}]}),[_e,V]),Ee=function(){return Q(new Set)},Ae=function(e){return"Pending"!==e.status},De=(0,u.useMemo)((function(){return V.size>=1}),[V]),Re=(0,u.useMemo)((function(){return ce.data.every((function(e){return!Ae(e)}))}),[ce]),Ne=(0,u.useMemo)((function(){var e=!1;return ce.data.every((function(t){return V.has(t.uuid)&&(e=!0),!Ae(t)||V.has(t.uuid)}))&&e}),[ce,V]),Fe="custom repositories",Le="To get started, create a custom repository",Me=0===ke,Ke=Me&&z&&!ae;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.Outlet,{context:Ee}),Ke?(0,a.jsx)(o.Bullseye,r({"data-ouia-safe":!_e,"data-ouia-component-id":"content_list_page"},{children:(0,a.jsx)(v.default,{notFiltered:z,clearFilters:q,itemName:Fe,notFilteredBody:Le,notFilteredButton:(0,a.jsx)(_.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==T?void 0:T.write),setDisabled:!0},{children:(0,a.jsx)(o.Button,r({id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:ae,onClick:function(){return c("add-repository")}},{children:"Add repositories"}))}))})})):(0,a.jsxs)(o.Grid,r({"data-ouia-safe":!_e,"data-ouia-component-id":"content_list_page",className:Me?i.mainContainer100Height:i.mainContainer},{children:[(0,a.jsxs)(o.Flex,r({className:i.topContainer},{children:[(0,a.jsx)(p.default,{isLoading:ae,setFilterData:function(e){Y(e),O(1)},filterData:G,atLeastOneRepoChecked:De,numberOfReposChecked:V.size,deleteCheckedRepos:function(){return ye(V).then((function(){var e=Math.ceil((ke-V.size)/A);k>1&&e<k&&O(e),Ee()}))}}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(h.default,r({hide:Me},{children:(0,a.jsx)(o.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",isDisabled:ae,itemCount:ke,perPage:A,page:k,onSetPage:je,isCompact:!0,onPerPageSelect:Se})}))})]})),(0,a.jsx)(h.default,r({hide:!ae},{children:(0,a.jsx)(o.Grid,r({className:i.mainContainer},{children:(0,a.jsx)(d.SkeletonTable,{rowSize:A,colSize:Ie.length,variant:s.TableVariant.compact})}))})),(0,a.jsx)(h.default,r({hide:Me||ae},{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.TableComposable,r({"aria-label":"Custom repositories table",ouiaId:"custom_repositories_table",variant:"compact"},{children:[(0,a.jsx)(s.Thead,{children:(0,a.jsxs)(s.Tr,{children:[(0,a.jsx)(h.default,r({hide:!(null==T?void 0:T.write)},{children:(0,a.jsx)(s.Th,{className:i.checkboxMinWidth,select:{onSelect:function(e,t){if(t){var n=new Set(V);ce.data.filter((function(e){return Ae(e)})).forEach((function(e){return n.add(e.uuid)})),Q(n)}else{for(var r=new Set(V),i=0,a=ce.data;i<a.length;i++){var o=a[i];r.delete(o.uuid)}Q(r)}},isSelected:Ne,isHeaderSelectDisabled:Re}})})),Ie.map((function(e,t){return(0,a.jsx)(s.Th,r({sort:(n=t,{sortBy:{index:N,direction:M,defaultDirection:"asc"},onSort:function(e,t,n){F(t),K(n)},columnIndex:n})},{children:e}),e+"column");var n})),(0,a.jsx)(s.Th,{children:(0,a.jsx)(o.Spinner,{size:"md",className:_e?"":i.invisible})})]})}),(0,a.jsx)(s.Tbody,{children:Pe.map((function(e,t){var n,i,o=e.uuid,l=e.name,u=e.url,c=e.distribution_arch,d=e.distribution_versions,f=e.last_introspection_time;return(0,a.jsxs)(s.Tr,{children:[(0,a.jsx)(h.default,r({hide:!(null==T?void 0:T.write)},{children:(0,a.jsx)(s.Td,{select:{rowIndex:t,onSelect:function(t,n){return function(e,t){var n=new Set(V);t?n.add(e):n.delete(e),Q(n)}(e.uuid,n)},isSelected:V.has(e.uuid),disable:!Ae(e)}})})),(0,a.jsxs)(s.Td,{children:[l,(0,a.jsx)("br",{}),(0,a.jsx)(x.default,{href:u})]}),(0,a.jsx)(s.Td,{children:Ce(c)}),(0,a.jsx)(s.Td,{children:(i=d,ee.filter((function(e){var t=e.label;return null==i?void 0:i.includes(t)})).map((function(e){return e.name})).join(", "))}),(0,a.jsx)(s.Td,{children:(0,a.jsx)(y.default,{rowData:e})}),(0,a.jsx)(s.Td,{children:(n=f,""===n||void 0===n?"Never":(0,j.default)(n).fromNow())}),(0,a.jsx)(s.Td,{children:(0,a.jsx)(g.default,{rowData:e,retryHandler:ge})}),(0,a.jsx)(s.Td,r({isActionCell:!0},{children:(0,a.jsx)(_.default,r({content:"Pending"==(null==e?void 0:e.status)?"Introspection is in progress":"You do not have the required permissions to perform this action.",show:!(null==T?void 0:T.write)||"Pending"===(null==e?void 0:e.status),setDisabled:!0},{children:(0,a.jsx)(s.ActionsColumn,{items:Oe(e)})}))}))]},o)}))})]})),(0,a.jsxs)(o.Flex,r({className:i.bottomContainer},{children:[(0,a.jsx)(o.FlexItem,{}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(o.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:ke,perPage:A,page:k,onSetPage:je,variant:o.PaginationVariant.bottom,onPerPageSelect:Se})})]}))]})})),(0,a.jsx)(h.default,r({hide:!Me||ae},{children:(0,a.jsx)(v.default,{notFiltered:z,clearFilters:q,itemName:Fe,notFilteredBody:Le,notFilteredButton:(0,a.jsx)(_.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==T?void 0:T.write),setDisabled:!0},{children:(0,a.jsx)(o.Button,r({id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:ae,onClick:function(){return c("add-repository")}},{children:"Add repositories"}))}))})}))]}))]})}},25574:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(85893),u=n(89624),c=n(51225),d=n(14040),f=n(64470),p=n(61558),h=n(92950),v=n(42060),m=s(n(58578)),g=n(97715),x=s(n(44703)),y=s(n(37303)),b=n(31104),_=s(n(6378)),j=n(88767),S=s(n(55537)),I=n(44439),C=s(n(11882)),T=s(n(97237)),P=n(16114),w=n(98243),k=s(n(10453)),O=(0,v.createUseStyles)({description:{paddingTop:"12px",color:f.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:f.global_link_Color.value+"!important",padding:"8px 0!important"},"& svg":{fill:f.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"8px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},addRepositoryButton:{marginBottom:"24px"},saveButton:{marginRight:"36px",transition:"unset!important"},removeButton:{display:"flex!important",justifyContent:"flex-end"},singleContentCol:{padding:"8px 0px 0px !important"},gpgKeyInput:{"& .pf-c-form-control":{backgroundPositionX:"calc(100% - 1.3em)"}}}),E={name:!1,url:!1,gpgKey:!1};t.default=function(){var e,t=(0,P.useNavigate)(),n=(0,k.default)(),s=(0,h.useState)(!1),v=s[0],A=s[1],D=(0,h.useState)([""]),R=D[0],N=D[1],F=O(),L=(0,j.useQueryClient)(),M=(0,p.useFormik)({initialValues:[g.defaultFormikValues],validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,g.makeValidationSchema)(),initialTouched:[E],onSubmit:function(){}}),K=(0,w.useClearCheckedRepositories)(),U=function(e,t){A(!1);var n=o([],R,!0);n[e]=t,N(n)},V=(0,b.useFetchGpgKey)(),Q=V.fetchGpgKey,B=V.isLoading,G=(0,T.default)(R,300),Y=L.getQueryData(b.REPOSITORY_PARAMS_KEY)||{},q=Y.distribution_arches,z=void 0===q?[]:q,H=Y.distribution_versions,W=void 0===H?[]:H;(0,h.useEffect)((function(){var e;e=G,i(void 0,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,Promise.all(o([],M.values,!0).map((function(t,n){return i(void 0,void 0,void 0,(function(){var i,o,s,l,u,c;return a(this,(function(a){switch(a.label){case 0:return i=e[n],(0,g.isValidURL)(i)?[4,Q(i)]:[3,2];case 1:if((o=a.sent())!==i)return U(n,o),[2,r(r(r({},t),{gpgKey:o}),""===t.gpgKey&&i?{metadataVerification:!!(null===(l=null===(s=null==de?void 0:de[n])||void 0===s?void 0:s.url)||void 0===l?void 0:l.metadata_signature_present)}:{})];a.label=2;case 2:return[2,r(r(r({},t),{gpgKey:i}),""===t.gpgKey&&i?{metadataVerification:!!(null===(c=null===(u=null==de?void 0:de[n])||void 0===u?void 0:u.url)||void 0===c?void 0:c.metadata_signature_present)}:{})]}}))}))})))];case 1:return t=n.sent(),M.setValues(t),[2]}}))}))}),[G]);var $=(0,h.useMemo)((function(){var e={},t={};return z.forEach((function(t){var n=t.name,r=t.label;return e[n]=r})),W.forEach((function(e){var n=e.name,r=e.label;return t[n]=r})),{distributionArches:e,distributionVersions:t}}),[z,W]),X=$.distributionArches,Z=$.distributionVersions,J=function(){return t(n)},ee=(0,b.useAddContentQuery)(L,(0,g.mapFormikToAPIValues)(M.values)),te=ee.mutateAsync,ne=ee.isLoading,re=1===M.values.length,ie=!M.values.some((function(e){return!e.expanded})),ae=function(e,t,n){A(!1);var i=o([],M.values,!0);i[e]=r(r({},i[e]),t),M.setValues(i).then(n)},oe=function(e,t){var n,r,i,a=!!(null===(n=M.values[e])||void 0===n?void 0:n[t]),o=!!(null===(r=M.errors[e])||void 0===r?void 0:r[t]),s=null===(i=M.touched[e])||void 0===i?void 0:i[t];switch(!0){case o&&s:return"error";case"gpgKey"===t:return"default";case a&&s:return"success";default:return"default"}},se=function(){var e,t=(null===(e=M.touched)||void 0===e?void 0:e.length)-1||0,n=M.touched[t]||{},i=n.name,a=n.url;if(!i&&!a){var s=o([],M.touched,!0);s[t]=r(r({},s[t]),{name:!0,url:!0}),M.setTouched(s)}},le=(0,T.default)(M.values)||[],ue=(0,b.useValidateContentList)(),ce=ue.mutateAsync,de=ue.data,fe=ue.isLoading;(0,C.default)((function(){le.length!==M.values.length&&(le=M.values);var e=o([],M.touched,!0);ce(le.map((function(t,n){var i,a,o,s=t.name,l=t.url,u=t.gpgKey,c=t.metadataVerification;return!(null===(i=e[n])||void 0===i?void 0:i.name)&&s&&(e[n]=r(r({},e[n]),{name:!0})),!(null===(a=e[n])||void 0===a?void 0:a.url)&&l&&(e[n]=r(r({},e[n]),{url:!0})),!(null===(o=e[n])||void 0===o?void 0:o.gpgKey)&&u&&(e[n]=r(r({},e[n]),{gpgKey:!0})),{name:s,url:l,gpg_key:u,metadata_verification:c}}))).then((function(t){return i(void 0,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return[4,M.validateForm(le)];case 1:return n=i.sent(),r=(0,g.mapValidationData)(t,n),M.setErrors(r),A(!0),M.setTouched(e),[2]}}))}))}))}),[le,le.length]);var pe=function(e){var t;(null===(t=M.values[e])||void 0===t?void 0:t.expanded)?(ae(e,r(r({},M.values[e]),{expanded:!1})),se()):ae(e,r(r({},M.values[e]),{expanded:!0}))},he=(0,x.default)().notify,ve=B||ne||fe||!v;return(0,l.jsx)(u.Modal,r({position:"top",variant:u.ModalVariant.medium,title:"Add custom repositories",ouiaId:"add_custom_repository",ouiaSafe:!ve,help:(0,l.jsx)(u.Popover,r({headerContent:(0,l.jsx)("div",{children:"Add a custom repository"}),bodyContent:(0,l.jsx)("div",{children:"Use this form to enter the values for a new repository."})},{children:(0,l.jsx)(u.Button,r({variant:"plain","aria-label":"Help"},{children:(0,l.jsx)(c.OutlinedQuestionCircleIcon,{})}))})),description:(0,l.jsx)("p",r({className:F.description},{children:"Add by completing the form. Default values may be provided automatically."})),isOpen:!0,onClose:J,footer:(0,l.jsxs)(u.Stack,{children:[(0,l.jsx)(u.StackItem,{children:(0,l.jsx)(u.Button,r({isDisabled:!M.isValid||M.values.length>19,className:F.addRepositoryButton,variant:"link",onClick:function(){M.setTouched(o(o([],M.touched,!0),[E],!1)),M.setValues(o(o([],M.values.map((function(e){return r(r({},e),{expanded:!1})})),!0),[g.defaultFormikValues],!1)),A(!1)},icon:(0,l.jsx)(c.PlusCircleIcon,{}),ouiaId:"add_row"},{children:"Add another repository"}))}),(0,l.jsxs)(u.StackItem,{children:[(0,l.jsx)(u.Button,r({className:F.saveButton,ouiaId:"modal_save",variant:"primary",isLoading:ve,isDisabled:!v||!M.isValid||ve||(null===(e=M.values)||void 0===e?void 0:e.length)!==(null==le?void 0:le.length),onClick:function(){te().then((function(){J(),K()}))}},{children:"Save"}),"confirm"),(0,l.jsx)(u.Button,r({variant:"link",onClick:J,ouiaId:"modal_cancel"},{children:"Cancel"}),"cancel")]})]})},{children:(0,l.jsxs)(d.TableComposable,r({"aria-label":"Table for repo add modal",ouiaId:"add_modal_table"},{children:[(0,l.jsx)(m.default,r({hide:re},{children:(0,l.jsx)(d.Tbody,r({isExpanded:ie},{children:(0,l.jsxs)(d.Tr,r({onClick:function(){M.setValues(o([],M.values.map((function(e){return r(r({},e),{expanded:!ie})})),!0)),se()},className:F.toggleAllRow},{children:[(0,l.jsx)(d.Td,{className:F.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:ie}}),(0,l.jsx)(d.Td,r({dataLabel:"expand-collapse"},{children:ie?"Collapse all":"Expand all"}))]}))}))})),M.values.map((function(e,t){var n,i,a,s,p,h,v,x,b,j,C,T,P,w=e.expanded,k=e.name,O=e.url,E=e.arch,A=e.gpgKey,D=e.versions,N=e.gpgLoading,L=e.metadataVerification;return(0,l.jsxs)(d.Tbody,r({isExpanded:re?void 0:w},{children:[(0,l.jsx)(m.default,r({hide:re},{children:(0,l.jsxs)(d.Tr,r({className:F.colHeader},{children:[(0,l.jsx)(d.Td,{onClick:function(){return pe(t)},className:F.toggleAction,isActionCell:!0,expand:{rowIndex:t,isExpanded:w}}),(0,l.jsx)(d.Td,r({width:35,onClick:function(){return pe(t)},dataLabel:k},{children:k||"New content"})),(0,l.jsx)(d.Td,r({onClick:function(){return pe(t)},dataLabel:"validity"},{children:(0,l.jsx)(y.default,{touched:M.touched[t],errors:M.errors[t]})})),(0,l.jsx)(d.Td,r({dataLabel:"removeButton",className:F.removeButton},{children:(0,l.jsx)(m.default,r({hide:1===M.values.length},{children:(0,l.jsx)(u.Button,r({onClick:function(){return function(e){var t=M.values;t.splice(e,1);var n=M.touched;n.splice(e,1);var r=M.errors;r.splice(e,1),M.setTouched(n),M.setErrors(r),M.setValues(t)}(t)},variant:"link",icon:(0,l.jsx)(c.MinusCircleIcon,{})},{children:"Remove"}))}))}))]}))})),(0,l.jsx)(d.Tr,r({isExpanded:re?void 0:w},{children:(0,l.jsx)(d.Td,r({colSpan:4,className:re?F.singleContentCol:F.mainContentCol},{children:(0,l.jsxs)(u.Form,{children:[(0,l.jsx)(u.FormGroup,r({label:"Name",isRequired:!0,fieldId:"namegroup",validated:oe(t,"name"),helperTextInvalid:null===(n=M.errors[t])||void 0===n?void 0:n.name},{children:(0,l.jsx)(u.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",ouiaId:"input_name",type:"text",validated:oe(t,"name"),onChange:function(e){ae(t,{name:e})},value:k||"",placeholder:"Enter name"})})),(0,l.jsx)(u.FormGroup,r({label:"URL",isRequired:!0,fieldId:"url",validated:oe(t,"url"),helperTextInvalid:null===(i=M.errors[t])||void 0===i?void 0:i.url},{children:(0,l.jsx)(u.TextInput,{isRequired:!0,type:"url",validated:oe(t,"url"),onBlur:function(){return function(e){var t,n,i,a,s,l,u,c,d,f,p,h=null===(t=M.values[e])||void 0===t?void 0:t.url;if((0,g.isValidURL)(h)&&("any"===(null===(n=M.values[e])||void 0===n?void 0:n.arch)||"any"===M.values[e].versions[0])){var v="any"!==(null===(i=M.values[e])||void 0===i?void 0:i.arch)&&(null===(a=M.values[e])||void 0===a?void 0:a.arch)||(null===(s=z.find((function(e){var t=e.name,n=e.label;return h.includes(t)||h.includes(n)})))||void 0===s?void 0:s.label)||"any",m=[];if((null===(u=null===(l=M.values[e])||void 0===l?void 0:l.versions)||void 0===u?void 0:u.length)&&"any"!==M.values[e].versions[0])m=null===(c=M.values[e])||void 0===c?void 0:c.versions;else{var x=null===(d=W.find((function(e){var t=e.name,n=e.label;return h.includes(t)||h.includes("/"+n)})))||void 0===d?void 0:d.label;x&&(m=[x]),(0,I.isEmpty)(m)&&(m=["any"])}if((null===(f=M.values[e])||void 0===f?void 0:f.arch)!==v&&!(0,I.isEqual)(m,null===(p=M.values[e])||void 0===p?void 0:p.arch)){var y=o([],M.values,!0);y[e]=r(r({},y[e]),{arch:v,versions:m}),M.setValues(y)}}}(t)},onChange:function(e){O!==e&&ae(t,{url:e})},value:O||"",placeholder:"https://",id:"url",name:"url",label:"Url",ouiaId:"input_url"})})),(0,l.jsx)(u.FormGroup,r({label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,l.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package architecture"},{children:(0,l.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:f.global_Color_200.value})})),fieldId:"arch"},{children:(0,l.jsx)(_.default,{ouiaId:"restrict_to_architecture",menuAppendTo:document.body,toggleId:"archSelection"+t,options:Object.keys(X),variant:u.SelectVariant.single,selectedProp:Object.keys(X).find((function(e){return E===X[e]})),setSelected:function(e){return ae(t,{arch:X[e]})}})})),(0,l.jsx)(u.FormGroup,r({label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,l.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package OS version"},{children:(0,l.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:f.global_Color_200.value})})),fieldId:"version"},{children:(0,l.jsx)(_.default,{ouiaId:"restrict_to_os_version",menuAppendTo:document.body,toggleId:"versionSelection"+t,options:Object.keys(Z),variant:u.SelectVariant.typeaheadMulti,selectedProp:Object.keys(Z).filter((function(e){return null==D?void 0:D.includes(Z[e])})),placeholderText:(null==D?void 0:D.length)?"":"Any version",setSelected:function(e){return function(e,t){var n=e.map((function(e){return Z[e]}));0!==e.length&&"any"!==n[e.length-1]||(n=["any"]),n.length>1&&n.includes("any")&&(n=n.filter((function(e){return"any"!==e}))),ae(t,{versions:n})}(e,t)}})})),(0,l.jsx)(u.FormGroup,r({label:"GPG key",labelIcon:(0,l.jsx)(u.Tooltip,r({content:"Optional: Add GPG Key file or URL"},{children:(0,l.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:f.global_Color_200.value})})),fieldId:"gpgKey",validated:oe(t,"gpgKey"),helperTextInvalid:null===(a=M.errors[t])||void 0===a?void 0:a.gpgKey},{children:(0,l.jsx)(u.FileUpload,{className:F.gpgKeyInput,validated:oe(t,"gpgKey"),id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:R[t],isLoading:N,spellCheck:!1,onDataChange:function(e){return U(t,e)},onTextChange:function(e){return U(t,e)},onClearClick:function(){return U(t,"")},dropzoneProps:{maxSize:g.maxUploadSize,onDropRejected:function(e){return(0,g.failedFileUpload)(e,he)}},allowEditingUploadedText:!0,browseButtonText:"Upload"})})),(0,l.jsx)(m.default,r({hide:!A},{children:(0,l.jsxs)(u.FormGroup,r({fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0},{children:[(0,l.jsx)(u.Radio,{isDisabled:!(null===(p=null===(s=null==de?void 0:de[t])||void 0===s?void 0:s.url)||void 0===p?void 0:p.metadata_signature_present)||!!(null===(v=null===(h=null==M?void 0:M.errors)||void 0===h?void 0:h[t])||void 0===v?void 0:v.gpgKey),id:"package-verification-only",name:"package-verification-only",label:"Package verification only",isChecked:!L,onChange:function(){return ae(t,{metadataVerification:!1})}}),(0,l.jsx)(S.default,r({show:!1===(null===(b=null===(x=null==de?void 0:de[t])||void 0===x?void 0:x.url)||void 0===b?void 0:b.metadata_signature_present),content:"This repository's metadata is not signed, metadata verification is not possible."},{children:(0,l.jsx)(u.Radio,{isDisabled:!(null===(C=null===(j=null==de?void 0:de[t])||void 0===j?void 0:j.url)||void 0===C?void 0:C.metadata_signature_present)||!!(null===(P=null===(T=null==M?void 0:M.errors)||void 0===T?void 0:T[t])||void 0===P?void 0:P.gpgKey),id:"package-and-repository-verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:L,onChange:function(){return ae(t,{metadataVerification:!0})}})}))]}))}))]})}))}))]}),t)}))]}))}))}},37303:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(64470),s=n(51225),l=n(42060),u=o.global_danger_color_100.value,c=o.global_success_color_100.value,d=(0,l.createUseStyles)({red:{color:u,fontWeight:"bold",fontSize:"14px"},green:{color:c,fontWeight:"bold",fontSize:"14px"}});t.default=function(e){var t=e.touched,n=e.errors,o=e.loading,l=d(),f=["name","url"].every((function(e){return null==t?void 0:t[e]})),p=Object.values(n||{}).every((function(e){return!e})),h=Object.keys(t||{}).filter((function(e){return!!(null==t?void 0:t[e])})).some((function(e){return null==n?void 0:n[e]}));switch(!0){case o:return(0,i.jsx)(a.Spinner,{size:"md"});case f&&p:return(0,i.jsxs)(a.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,i.jsx)(a.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,i.jsx)(s.CheckCircleIcon,{color:c})})),(0,i.jsx)(a.FlexItem,{children:(0,i.jsx)("span",r({className:l.green},{children:"Valid"}))})]}));case h:return(0,i.jsxs)(a.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,i.jsx)(a.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,i.jsx)(s.ExclamationCircleIcon,{color:u})})),(0,i.jsx)(a.FlexItem,{children:(0,i.jsx)("span",r({className:l.red},{children:"Invalid"}))})]}));default:return(0,i.jsx)(i.Fragment,{})}}},97715:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.failedFileUpload=t.maxUploadSize=t.makeValidationSchema=t.mapValidationData=t.mapFormikToAPIValues=t.isValidURL=t.REGEX_URL=t.defaultFormikValues=void 0;var u=n(44439),c=o(n(87561)),d=l(n(62307)),f=n(89624);t.defaultFormikValues={name:"",url:"",gpgKey:"",arch:"any",versions:["any"],gpgLoading:!1,expanded:!0,metadataVerification:!1},t.REGEX_URL=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,t.isValidURL=function(e){if(!e)return!1;var n=new RegExp(t.REGEX_URL);return e.match(n)},t.mapFormikToAPIValues=function(e){return e.map((function(e){return{name:e.name,url:e.url,distribution_arch:e.arch,distribution_versions:e.versions,gpg_key:e.gpgKey,metadata_verification:e.metadataVerification}}))},t.mapValidationData=function(e,t){var n=function(e){return e.map((function(e){var t=e.url,n=s(e,["url"]);return r(r({},n),{url:r(r({},t),{error:(null==t?void 0:t.error)||(null==t?void 0:t.metadata_present)?null==t?void 0:t.error:"Unable to retrieve YUM Metadata, Recieved HTTP ".concat(null==t?void 0:t.http_code,": ").concat(t?d.default[t.http_code]:"")})})}))}(e),i=n.map((function(e,n){var i=e.name,a=e.url,o=e.gpg_key;return r(r(r(r({},(null==i?void 0:i.error)?{name:null==i?void 0:i.error}:{}),(null==a?void 0:a.error)?{url:null==a?void 0:a.error}:{}),(null==o?void 0:o.error)?{gpgKey:null==o?void 0:o.error}:{}),t[n])}));return i.every((function(e){return(0,u.isEmpty)(e)}))?[]:i},t.makeValidationSchema=function(){return c.addMethod(c.object,"uniqueProperty",(function(e,t){return this.test("unique",t,(function(t){if(!t||!t[e])return!0;if(this.parent.filter((function(e){return e!==t})).some((function(n){return n[e]===t[e]})))throw this.createError({path:"".concat(this.path,".").concat(e)});return!0}))})),c.array(c.object().shape({name:c.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),url:c.string().url("Invalid URL").required("Required")}).uniqueProperty("name","Names must be unique").uniqueProperty("url","Url's must be unique"))},t.maxUploadSize=32e3,t.failedFileUpload=function(e,n){var r="Check the file and try again.";1!=e.length?r="Only a single file upload is supported.":e[0].size>t.maxUploadSize&&(r="The file is larger than "+t.maxUploadSize+" bytes."),n({variant:f.AlertVariant.danger,title:"There was an problem uploading the file.",description:r})}},38824:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),s=n(92950),l=n(89624),u=a(n(6378)),c=n(51225),d=n(64470),f=a(n(58578)),p=n(88767),h=n(31104),v=a(n(97237)),m=n(42060),g=n(44439),x=n(28803),y=a(n(55537)),b=n(16114),_=a(n(68363)),j=(0,m.createUseStyles)({chipsContainer:{backgroundColor:d.global_BackgroundColor_100.value,paddingTop:"16px"},clearFilters:{marginLeft:"16px"},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:d.global_secondary_color_100.value,position:"relative",top:"3px",left:"-5px",pointerEvents:"none"},repositoryActions:{display:"flex",flexDirection:"row"}}),S=["Invalid","Pending","Unavailable","Valid"];t.default=function(e){var t=e.isLoading,n=e.setFilterData,a=e.filterData,d=e.atLeastOneRepoChecked,m=e.numberOfReposChecked,I=e.deleteCheckedRepos,C=j(),T=(0,x.useAppContext)().rbac,P=(0,p.useQueryClient)(),w=(0,b.useNavigate)(),k=(0,s.useState)("Name/URL"),O=k[0],E=k[1],A=(0,s.useState)({}),D=A[0],R=A[1],N=(0,s.useState)({}),F=N[0],L=N[1],M=(0,s.useState)(""),K=M[0],U=M[1],V=(0,s.useState)([]),Q=V[0],B=V[1],G=(0,s.useState)([]),Y=G[0],q=G[1],z=(0,s.useState)([]),H=z[0],W=z[1],$=P.getQueryData(h.REPOSITORY_PARAMS_KEY)||{},X=$.distribution_arches,Z=void 0===X?[]:X,J=$.distribution_versions,ee=void 0===J?[]:J,te=function(){U(""),B([]),q([]),W([]),n({searchQuery:"",versions:[],arches:[],statuses:[]})};(0,s.useEffect)((function(){0!==a.arches.length||0!==a.versions.length||0!==a.statuses.length||""!==a.searchQuery||""===K&&0===Y.length&&0===Q.length&&0===H.length||te()}),[a]);var ne=(0,v.default)({searchQuery:K,selectedVersions:Q,selectedArches:Y,selectedStatuses:H}),re=ne.searchQuery,ie=ne.selectedVersions,ae=ne.selectedArches,oe=ne.selectedStatuses,se=function(e,t){var n="arch"===e?Z:ee,r=[];return t.forEach((function(e){var t=n.find((function(t){return t.name===e}));t&&r.push(t.label)})),r};(0,s.useEffect)((function(){n({searchQuery:re,versions:se("version",ie),arches:se("arch",ae),statuses:oe})}),[re,ie,ae,oe]);var le=function(e,t,n){n(i([],t,!0).filter((function(t){return t!==e})))};(0,s.useEffect)((function(){if((0,g.isEmpty)(D)&&(0,g.isEmpty)(F)&&0!==Z.length&&0!==ee.length){var e={},t={};Z.forEach((function(t){return e[t.name]=t.label})),ee.forEach((function(e){return t[e.name]=e.label})),R(t),L(e)}}),[Z,ee]);var ue=(0,s.useMemo)((function(){switch(O){case"Name/URL":return(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.TextInput,{isDisabled:t,id:"search",ouiaId:"filter_search",placeholder:"Filter by name/url",value:K,onChange:function(e){return U(e)},className:C.searchInput}),(0,o.jsx)(c.SearchIcon,{size:"sm",className:C.searchIcon})]});case"Version":return(0,o.jsx)(u.default,{toggleAriaLabel:"filter version",toggleId:"versionSelect",ouiaId:"filter_version",isDisabled:t,options:Object.keys(D),variant:l.SelectVariant.checkbox,selectedProp:Q,setSelected:B,placeholderText:"Filter by version"});case"Architecture":return(0,o.jsx)(u.default,{toggleAriaLabel:"filter architecture",toggleId:"archSelect",ouiaId:"filter_arch",isDisabled:t,options:Object.keys(F),variant:l.SelectVariant.checkbox,selectedProp:Y,setSelected:q,placeholderText:"Filter by architecture"});case"Status":return(0,o.jsx)(u.default,{toggleAriaLabel:"filter status",toggleId:"statusSelect",ouiaId:"filter_status",isDisabled:t,options:S,variant:l.SelectVariant.checkbox,selectedProp:H,setSelected:W,placeholderText:"Filter by status"});default:return(0,o.jsx)(o.Fragment,{})}}),[O,t,K,D,Q,F,Y,H]);return(0,o.jsxs)(l.Flex,{children:[(0,o.jsx)(l.FlexItem,{children:(0,o.jsxs)(l.InputGroup,{children:[(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(u.default,{toggleId:"filterSelectionDropdown",ouiaId:"filter_type",isDisabled:t,options:["Name/URL","Version","Architecture","Status"],variant:l.SelectVariant.single,selectedProp:O,setSelected:E,placeholderText:"filter",toggleIcon:(0,o.jsx)(c.FilterIcon,{})})}),(0,o.jsx)(l.FlexItem,{children:ue})]})}),(0,o.jsxs)(l.FlexItem,r({className:C.repositoryActions},{children:[(0,o.jsx)(y.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==T?void 0:T.write),setDisabled:!0},{children:(0,o.jsx)(l.Button,r({id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:t,onClick:function(){return w("add-repository")}},{children:"Add repositories"}))})),(0,o.jsx)(y.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==T?void 0:T.write),setDisabled:!0},{children:(0,o.jsx)(_.default,{atLeastOneRepoChecked:d,numberOfReposChecked:m,deleteCheckedRepos:I})}))]})),(0,o.jsx)(f.default,r({hide:!(Q.length||Y.length||H.length||""!=K)},{children:(0,o.jsxs)(l.FlexItem,r({fullWidth:{default:"fullWidth"},className:C.chipsContainer},{children:[(0,o.jsx)(l.ChipGroup,r({categoryName:"Version"},{children:Q.map((function(e){return(0,o.jsx)(l.Chip,r({onClick:function(){return le(e,Q,B)}},{children:e}),e)}))})),(0,o.jsx)(l.ChipGroup,r({categoryName:"Architecture"},{children:Y.map((function(e){return(0,o.jsx)(l.Chip,r({onClick:function(){return le(e,Y,q)}},{children:e}),e)}))})),(0,o.jsx)(l.ChipGroup,r({categoryName:"Status"},{children:H.map((function(e){return(0,o.jsx)(l.Chip,r({onClick:function(){return le(e,H,W)}},{children:e}),e)}))})),""!==K&&(0,o.jsx)(l.ChipGroup,r({categoryName:"Name/URL"},{children:(0,o.jsx)(l.Chip,r({onClick:function(){return U("")}},{children:K}),"search_chip")})),(""!==re&&""!==K||!!(null==Q?void 0:Q.length)||!!(null==Y?void 0:Y.length)||!!(null==H?void 0:H.length))&&(0,o.jsx)(l.Button,r({className:C.clearFilters,onClick:te,variant:"link",isInline:!0},{children:"Clear filters"}))]}))}))]})}},89869:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(85893),u=n(89624),c=n(51225),d=n(14040),f=n(64470),p=n(61558),h=n(92950),v=n(42060),m=s(n(58578)),g=s(n(97237)),x=n(31104),y=s(n(6378)),b=n(88767),_=n(97715),j=s(n(37303)),S=n(45971),I=n(44439),C=s(n(55537)),T=s(n(44703)),P=s(n(11882)),w=f.global_success_color_100.value,k=(0,v.createUseStyles)({description:{paddingTop:"12px",color:f.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:f.global_link_Color.value+"!important",padding:"12px 0!important"},"& svg":{fill:f.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"12px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},saveButton:{marginRight:"36px",transition:"unset!important"},singleContentCol:{padding:"8px 0px 0px !important"},gpgKeyInput:{"& .pf-c-form-control":{backgroundPositionX:"calc(100% - 1.3em)"}}});t.default=function(e){var t=e.setIsValid,n=e.values,s=e.setIsLoading,v=e.setUpdatedValues,O=(0,S.mapToDefaultFormikValues)(n),E=(0,h.useState)(!1),A=E[0],D=E[1],R=(0,h.useState)(O.map((function(e){return e.gpgKey}))),N=R[0],F=R[1],L=k(),M=(0,b.useQueryClient)(),K=(0,p.useFormik)({initialValues:O,validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,_.makeValidationSchema)(),initialTouched:n.map((function(){return{name:!0,url:!0}})),onSubmit:function(){}}),U=function(e,t){D(!1);var n=o([],N,!0);n[e]=t,F(n)},V=(0,x.useFetchGpgKey)(),Q=V.fetchGpgKey,B=V.isLoading,G=(0,g.default)(N,300),Y=M.getQueryData(x.REPOSITORY_PARAMS_KEY)||{},q=Y.distribution_arches,z=void 0===q?[]:q,H=Y.distribution_versions,W=void 0===H?[]:H;(0,h.useEffect)((function(){var e;e=G,i(void 0,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,Promise.all(o([],K.values,!0).map((function(t,n){return i(void 0,void 0,void 0,(function(){var i,o,s,l,u,c;return a(this,(function(a){switch(a.label){case 0:return i=e[n],(0,_.isValidURL)(i)?[4,Q(i)]:[3,2];case 1:if((o=a.sent())!==i)return U(n,o),[2,r(r(r({},t),{gpgKey:o}),""===t.gpgKey&&i?{metadataVerification:!!(null===(l=null===(s=null==oe?void 0:oe[n])||void 0===s?void 0:s.url)||void 0===l?void 0:l.metadata_signature_present)}:{})];a.label=2;case 2:return[2,r(r(r({},t),{gpgKey:i}),""===t.gpgKey&&i?{metadataVerification:!!(null===(c=null===(u=null==oe?void 0:oe[n])||void 0===u?void 0:u.url)||void 0===c?void 0:c.metadata_signature_present)}:{})]}}))}))})))];case 1:return t=n.sent(),K.setValues(t),[2]}}))}))}),[G]);var $=(0,h.useMemo)((function(){var e={},t={};return z.forEach((function(t){var n=t.name,r=t.label;return e[n]=r})),W.forEach((function(e){var n=e.name,r=e.label;return t[n]=r})),{distributionArches:e,distributionVersions:t}}),[z,W]),X=$.distributionArches,Z=$.distributionVersions,J=1===K.values.length,ee=!K.values.some((function(e){return!e.expanded})),te=function(e,t){D(!1);var n=o([],K.values,!0);n[e]=r(r({},n[e]),t),K.setValues(n)},ne=function(e,t){var n,r,i,a=(0,I.isEqual)(null===(n=O[e])||void 0===n?void 0:n[t],null===(r=K.values[e])||void 0===r?void 0:r[t]);switch(!0){case!!(null===(i=K.errors[e])||void 0===i?void 0:i[t]):return"error";case a:return"default";case!a:return"success";default:return"default"}},re=(0,g.default)(K.values),ie=(0,x.useValidateContentList)(),ae=ie.mutateAsync,oe=ie.data,se=ie.isLoading;(0,P.default)((function(){ae(re.map((function(e){return{name:e.name,url:e.url,gpg_key:e.gpgKey,metadata_verification:e.metadataVerification,uuid:e.uuid}}))).then((function(e){return i(void 0,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return[4,K.validateForm(re)];case 1:return t=r.sent(),n=(0,_.mapValidationData)(e,t),K.setErrors(n),D(!0),[2]}}))}))}))}),[re,n,open]);var le=function(e){var t;(null===(t=K.values[e])||void 0===t?void 0:t.expanded)?te(e,r(r({},K.values[e]),{expanded:!1})):te(e,r(r({},K.values[e]),{expanded:!0}))},ue=(0,T.default)().notify,ce=B||se||!A;return(0,h.useEffect)((function(){s(ce),t(K.isValid)}),[ce,K.isValid]),(0,h.useEffect)((function(){v((0,S.mapFormikToEditAPIValues)(K.values))}),[K.values]),(0,l.jsxs)(d.TableComposable,r({"aria-label":"Table for edit modal",ouiaId:"edit_modal_table"},{children:[(0,l.jsx)(m.default,r({hide:J},{children:(0,l.jsx)(d.Tbody,r({isExpanded:ee},{children:(0,l.jsxs)(d.Tr,r({onClick:function(){K.setValues(o([],K.values.map((function(e){return r(r({},e),{expanded:!ee})})),!0))},className:L.toggleAllRow},{children:[(0,l.jsx)(d.Td,{className:L.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:ee}}),(0,l.jsx)(d.Td,r({dataLabel:"expand-collapse"},{children:ee?"Collapse all":"Expand all"}))]}))}))})),K.values.map((function(e,t){var n,i,a,s,p,h,v,g,x,b,S,T,P,k=e.expanded,O=e.name,E=e.url,A=e.arch,D=e.gpgKey,R=e.versions,F=e.gpgLoading,M=e.metadataVerification;return(0,l.jsxs)(d.Tbody,r({isExpanded:J?void 0:k},{children:[(0,l.jsx)(m.default,r({hide:J},{children:(0,l.jsxs)(d.Tr,r({className:L.colHeader},{children:[(0,l.jsx)(d.Td,{onClick:function(){return le(t)},className:L.toggleAction,isActionCell:!0,expand:{rowIndex:t,isExpanded:k}}),(0,l.jsx)(d.Td,r({width:35,onClick:function(){return le(t)},dataLabel:O},{children:O||"New content"})),(0,l.jsx)(d.Td,r({onClick:function(){return le(t)},dataLabel:"validity"},{children:(0,l.jsx)(j.default,{touched:K.touched[t],errors:K.errors[t]})}))]}))})),(0,l.jsx)(d.Tr,r({isExpanded:J?void 0:k},{children:(0,l.jsx)(d.Td,r({colSpan:4,className:J?L.singleContentCol:L.mainContentCol},{children:(0,l.jsxs)(u.Form,{children:[(0,l.jsx)(u.FormGroup,r({label:"Name",isRequired:!0,fieldId:"namegroup",validated:ne(t,"name"),helperTextInvalid:null===(n=K.errors[t])||void 0===n?void 0:n.name},{children:(0,l.jsx)(u.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",ouiaId:"input_name",type:"text",validated:ne(t,"name"),onChange:function(e){te(t,{name:e})},value:O||"",placeholder:"Enter name"})})),(0,l.jsx)(u.FormGroup,r({label:"URL",isRequired:!0,fieldId:"url",validated:ne(t,"url"),helperTextInvalid:null===(i=K.errors[t])||void 0===i?void 0:i.url},{children:(0,l.jsx)(u.TextInput,{isRequired:!0,type:"url",validated:ne(t,"url"),onBlur:function(){return function(e){!function(e){var t,n,i,a,s,l,u,c,d,f,p,h=null===(t=K.values[e])||void 0===t?void 0:t.url;if((0,_.isValidURL)(h)&&("any"===(null===(n=K.values[e])||void 0===n?void 0:n.arch)||"any"===K.values[e].versions[0])){var v="any"!==(null===(i=K.values[e])||void 0===i?void 0:i.arch)&&(null===(a=K.values[e])||void 0===a?void 0:a.arch)||(null===(s=z.find((function(e){var t=e.name,n=e.label;return h.includes(t)||h.includes(n)})))||void 0===s?void 0:s.label)||"any",m=[];if((null===(u=null===(l=K.values[e])||void 0===l?void 0:l.versions)||void 0===u?void 0:u.length)&&"any"!==K.values[e].versions[0])m=null===(c=K.values[e])||void 0===c?void 0:c.versions;else{var g=null===(d=W.find((function(e){var t=e.name,n=e.label;return h.includes(t)||h.includes("/"+n)})))||void 0===d?void 0:d.label;g&&(m=[g]),(0,I.isEmpty)(m)&&(m=["any"])}if((null===(f=K.values[e])||void 0===f?void 0:f.arch)!==v&&!(0,I.isEqual)(m,null===(p=K.values[e])||void 0===p?void 0:p.arch)){var x=o([],K.values,!0);x[e]=r(r({},x[e]),{arch:v,versions:m}),K.setValues(x)}}}(e)}(t)},onChange:function(e){E!==e&&te(t,{url:e})},value:E||"",placeholder:"https://",id:"url",name:"url",label:"Url",ouiaId:"input_url"})})),(0,l.jsx)(u.FormGroup,r({label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,l.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package architecture"},{children:(0,l.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:f.global_Color_200.value})})),fieldId:"arch"},{children:(0,l.jsx)(y.default,{ouiaId:"restrict_to_architecture",validated:ne(t,"arch"),menuAppendTo:document.body,toggleId:"archSelection"+t,options:Object.keys(X),variant:u.SelectVariant.single,selectedProp:Object.keys(X).find((function(e){return A===X[e]})),setSelected:function(e){return te(t,{arch:X[e]})}})})),(0,l.jsx)(u.FormGroup,r({label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,l.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package OS version"},{children:(0,l.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:f.global_Color_200.value})})),fieldId:"version"},{children:(0,l.jsx)(y.default,{ouiaId:"restrict_to_os_version",validated:ne(t,"versions"),menuAppendTo:document.body,toggleId:"versionSelection"+t,options:Object.keys(Z),variant:u.SelectVariant.typeaheadMulti,selectedProp:Object.keys(Z).filter((function(e){return null==R?void 0:R.includes(Z[e])})),placeholderText:(null==R?void 0:R.length)?"":"Any version",setSelected:function(e){return function(e,t){var n=e.map((function(e){return Z[e]}));0!==e.length&&"any"!==n[e.length-1]||(n=["any"]),n.length>1&&n.includes("any")&&(n=n.filter((function(e){return"any"!==e}))),te(t,{versions:n})}(e,t)}})})),(0,l.jsx)(u.FormGroup,r({label:"GPG key",labelIcon:(0,l.jsx)(u.Tooltip,r({content:"Optional: Add GPG Key file or URL"},{children:(0,l.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:f.global_Color_200.value})})),fieldId:"gpgKey",validated:ne(t,"gpgKey"),helperTextInvalid:null===(a=K.errors[t])||void 0===a?void 0:a.gpgKey},{children:(0,l.jsx)(u.FileUpload,{className:L.gpgKeyInput,validated:ne(t,"gpgKey"),id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:N[t],isLoading:F,spellCheck:!1,onDataChange:function(e){return U(t,e)},onTextChange:function(e){return U(t,e)},onClearClick:function(){return U(t,"")},dropzoneProps:{maxSize:_.maxUploadSize,onDropRejected:function(e){return(0,_.failedFileUpload)(e,ue)}},allowEditingUploadedText:!0,browseButtonText:"Upload"})})),(0,l.jsx)(m.default,r({hide:!D},{children:(0,l.jsxs)(u.FormGroup,r({fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0},{children:[(0,l.jsx)(u.Radio,{isDisabled:!1===(null===(p=null===(s=null==oe?void 0:oe[t])||void 0===s?void 0:s.url)||void 0===p?void 0:p.metadata_signature_present)||!!(null===(v=null===(h=null==K?void 0:K.errors)||void 0===h?void 0:h[t])||void 0===v?void 0:v.gpgKey),id:"package verification only",name:"package-verification-only",label:"Package verification only",isChecked:!M,onChange:function(){return te(t,{metadataVerification:!1})}}),(0,l.jsx)(C.default,r({show:!1===(null===(x=null===(g=null==oe?void 0:oe[t])||void 0===g?void 0:g.url)||void 0===x?void 0:x.metadata_signature_present),content:"This repository's metadata is not signed, metadata verification is not possible."},{children:(0,l.jsx)(u.Radio,{isDisabled:!1===(null===(S=null===(b=null==oe?void 0:oe[t])||void 0===b?void 0:b.url)||void 0===S?void 0:S.metadata_signature_present)||!!(null===(P=null===(T=null==K?void 0:K.errors)||void 0===T?void 0:T[t])||void 0===P?void 0:P.gpgKey),id:"Package and metadata verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:M,onChange:function(){return te(t,{metadataVerification:!0})}})})),(0,l.jsx)(m.default,r({hide:"success"!==ne(t,"metadataVerification")},{children:(0,l.jsx)(c.CheckCircleIcon,{noVerticalAlign:!0,color:w})}))]}))}))]})}))}))]}),t)}))]}))}},68604:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),l=n(89624),u=n(51225),c=n(64470),d=n(92950),f=n(42060),p=o(n(58578)),h=n(31104),v=n(88767),m=n(16114),g=o(n(89869)),x=n(44439),y=n(45971),b=n(98243),_=o(n(10453)),j=(0,f.createUseStyles)({description:{paddingTop:"12px",color:c.global_Color_200.value},saveButton:{marginRight:"36px",transition:"unset!important"}});t.default=function(){var e,t=j(),n=(0,m.useNavigate)(),o=(0,_.default)(),c=(0,v.useQueryClient)(),f=(0,m.useLocation)().search,S=(0,d.useState)(!0),I=S[0],C=S[1],T=(0,d.useState)([]),P=T[0],w=T[1],k=(0,d.useState)(!1),O=k[0],E=k[1],A=(0,d.useState)(!1),D=A[0],R=A[1],N=(0,b.useClearCheckedRepositories)(),F=(null===(e=new URLSearchParams(f).get("repoUUIDS"))||void 0===e?void 0:e.split(","))||[],L=(0,h.useEditContentQuery)(c,P),M=L.mutateAsync,K=L.isLoading,U=function(){return n(o)},V=(0,h.useFetchContent)(F),Q=V.data,B=V.isError,G=Q?[Q]:[];(0,d.useEffect)((function(){Q&&w(G),B&&U()}),[B,!!Q]),(0,d.useEffect)((function(){G.length&&C(!1)}),[G]);var Y=!(0,x.isEqual)((0,y.mapToContentItemsToEditContentRequest)(G),P),q=K||O||I;return(0,s.jsxs)(l.Modal,r({position:"top",variant:l.ModalVariant.medium,title:"Edit custom repository",ouiaId:"edit_custom_repository",ouiaSafe:!q,help:(0,s.jsx)(l.Popover,r({headerContent:(0,s.jsx)("div",{children:"Edit custom repository"}),bodyContent:(0,s.jsx)("div",{children:"Use this form to edit the values of an existing repository."})},{children:(0,s.jsx)(l.Button,r({variant:"plain","aria-label":"Help"},{children:(0,s.jsx)(u.OutlinedQuestionCircleIcon,{})}))})),description:(0,s.jsx)("p",r({className:t.description},{children:"Edit by completing the form. Default values may be provided automatically."})),isOpen:!0,onClose:U,footer:(0,s.jsx)(l.Stack,{children:(0,s.jsxs)(l.StackItem,{children:[(0,s.jsx)(l.Button,r({className:t.saveButton,ouiaId:"edit_modal_save",variant:"primary",isLoading:q,isDisabled:q||!Y||!D,onClick:function(){return i(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2,M().then((function(){U(),N(),c.invalidateQueries(h.CONTENT_ITEM_KEY)}))]}))}))}},{children:Y?"Save changes":"No changes"}),"confirm"),(0,s.jsx)(l.Button,r({variant:"link",onClick:U,ouiaId:"edit_modal_cancel"},{children:"Cancel"}),"cancel")]})})},{children:[(0,s.jsx)(p.default,r({hide:!I},{children:(0,s.jsx)(l.Bullseye,{children:(0,s.jsx)(l.Spinner,{})})})),(0,s.jsx)(p.default,r({hide:I},{children:(0,s.jsx)(g.default,{setIsValid:R,values:G,setIsLoading:E,setUpdatedValues:w})}))]}))}},45971:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToContentItemsToEditContentRequest=t.mapToDefaultFormikValues=t.mapFormikToEditAPIValues=void 0,t.mapFormikToEditAPIValues=function(e){return e.map((function(e){var t=e.name,n=e.url,r=e.arch,i=e.versions,a=e.gpgKey,o=e.metadataVerification;return{uuid:e.uuid,name:t,url:n,distribution_arch:r,distribution_versions:i,gpg_key:a,metadata_verification:o}}))},t.mapToDefaultFormikValues=function(e){return e.map((function(t,n){var r=t.name,i=t.url,a=t.distribution_arch,o=t.distribution_versions,s=t.uuid;return{name:r,url:i,arch:a,versions:o,gpgKey:t.gpg_key,gpgLoading:!1,metadataVerification:t.metadata_verification,expanded:n+1===e.length,uuid:s}}))},t.mapToContentItemsToEditContentRequest=function(e){return(0,t.mapFormikToEditAPIValues)((0,t.mapToDefaultFormikValues)(e))}},23903:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(42060),s=n(64470),l=n(16114),u=(0,o.createUseStyles)({text:{color:s.global_disabled_color_100.value,width:"fit-content"},link:{padding:0}});t.default=function(e){var t=e.rowData,n=u(),o=(0,l.useNavigate)();return t.package_count||"Pending"!==t.status?"Invalid"===t.status?(0,i.jsx)(a.Tooltip,r({isContentLeftAligned:!0,content:"Repository is invalid."},{children:(0,i.jsx)(a.Text,r({className:n.text},{children:"N/A"}))})):(0,i.jsx)(a.Button,r({ouiaId:"package_count_button",variant:"link",className:n.link,onClick:function(){return o("".concat(t.uuid,"/packages"))}},{children:t.package_count})):(0,i.jsx)(a.Tooltip,r({isContentLeftAligned:!0,content:"Introspection is in progress"},{children:(0,i.jsx)(a.Text,r({className:n.text},{children:"N/A"}))}))}},21887:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),s=n(14040),l=n(64470),u=n(92950),c=n(42060),d=n(92418),f=i(n(58578)),p=n(31104),h=n(51225),v=i(n(97237)),m=i(n(21713)),g=n(16114),x=i(n(10453)),y=(0,c.createUseStyles)({description:{paddingTop:"12px",paddingBottom:"8px",color:l.global_Color_200.value},mainContainer:{backgroundColor:l.global_BackgroundColor_100.value,display:"flex",flexDirection:"column",height:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:l.global_secondary_color_100.value,position:"relative",top:"3px",left:"-5px",pointerEvents:"none"}}),b="packagePerPage";t.default=function(){var e=y(),t=(0,g.useParams)().repoUUID,n=(0,x.default)(),i=(0,g.useNavigate)(),l=Number(localStorage.getItem(b))||20,c=(0,u.useState)(1),_=c[0],j=c[1],S=(0,u.useState)(l),I=S[0],C=S[1],T=(0,u.useState)(""),P=T[0],w=T[1],k=(0,u.useState)(0),O=k[0],E=k[1],A=(0,u.useState)("asc"),D=A[0],R=A[1],N=["Name","Version","Release","Arch"],F=["name","version","release","arch"],L=(0,u.useMemo)((function(){return F[O]+":"+D}),[O,D]),M=(0,v.default)(P);(0,u.useEffect)((function(){j(1)}),[M,L]);var K=(0,p.useGetPackagesQuery)(t,_,I,M,L),U=K.isLoading,V=K.isFetching,Q=K.isError,B=K.data,G=void 0===B?{data:[],meta:{count:0,limit:20,offset:0}}:B;(0,u.useEffect)((function(){Q&&H()}),[Q]);var Y=function(e,t){return j(t)},q=function(e,t,n){C(t),j(n),localStorage.setItem(b,t.toString())},z=function(e,t){if(!t)return{sortBy:{index:O,direction:D,defaultDirection:"asc"},onSort:function(e,t,n){E(t),R(n)},columnIndex:e}},H=function(){return i(n)},W=G.data,$=void 0===W?[]:W,X=G.meta.count,Z=void 0===X?0:X,J=V||U,ee=!J&&!Z;return(0,a.jsx)(o.Modal,r({position:"top",hasNoBodyWrapper:!0,"aria-label":"RPM package modal",ouiaId:"rpm_package_modal",ouiaSafe:J,variant:o.ModalVariant.medium,title:"Packages",description:(0,a.jsx)("p",r({className:e.description},{children:"View list of packages"})),isOpen:!0,onClose:H,footer:(0,a.jsx)(o.Button,r({variant:"secondary",onClick:H},{children:"Close"}),"close")},{children:(0,a.jsx)(s.InnerScrollContainer,{children:(0,a.jsxs)(o.Grid,r({className:e.mainContainer},{children:[(0,a.jsxs)(o.Flex,r({className:e.topContainer},{children:[(0,a.jsxs)(o.Flex,{children:[(0,a.jsx)(o.TextInput,{id:"search",ouiaId:"name_search",placeholder:"Filter by name",value:P,onChange:function(e){return w(e)},className:e.searchInput}),(0,a.jsx)(h.SearchIcon,{size:"sm",className:e.searchIcon})]}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(f.default,r({hide:ee},{children:(0,a.jsx)(o.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",itemCount:Z,perPage:I,page:_,onSetPage:Y,isCompact:!0,onPerPageSelect:q})}))})]})),(0,a.jsx)(f.default,r({hide:!J},{children:(0,a.jsx)(o.Grid,r({className:e.mainContainer},{children:(0,a.jsx)(d.SkeletonTable,{rowSize:I,colSize:N.length,variant:s.TableVariant.compact})}))})),(0,a.jsx)(f.default,r({hide:J},{children:(0,a.jsxs)(s.TableComposable,r({"aria-label":"Custom repositories table",ouiaId:"packages_table",variant:"compact"},{children:[(0,a.jsx)(s.Thead,{children:(0,a.jsx)(s.Tr,{children:N.map((function(e,t){return(0,a.jsx)(s.Th,r({sort:z(t,ee)},{children:e}),e+"_column")}))})}),(0,a.jsxs)(s.Tbody,{children:[$.map((function(e,t){var n=e.name,r=e.version,i=e.release,o=e.arch;return(0,a.jsxs)(s.Tr,{children:[(0,a.jsx)(s.Td,{children:n}),(0,a.jsx)(s.Td,{children:r}),(0,a.jsx)(s.Td,{children:i}),(0,a.jsx)(s.Td,{children:o})]},n+t)})),(0,a.jsx)(f.default,r({hide:!ee},{children:(0,a.jsx)(m.default,{clearSearch:function(){return w("")}})}))]})]}))})),(0,a.jsxs)(o.Flex,r({className:e.bottomContainer},{children:[(0,a.jsx)(o.FlexItem,{}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(f.default,r({hide:ee},{children:(0,a.jsx)(o.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:Z,perPage:I,page:_,onSetPage:Y,variant:o.PaginationVariant.bottom,onPerPageSelect:q})}))})]}))]}))})}),t)}},21713:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(45718),s=n(14040),l=(0,n(42060).createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1,margin:"auto"}});t.default=function(e){var t=e.clearSearch,n=l();return(0,i.jsx)(s.Tr,{children:(0,i.jsx)(s.Td,r({colSpan:4},{children:(0,i.jsx)(a.Bullseye,{children:(0,i.jsxs)(a.EmptyState,r({variant:a.EmptyStateVariant.full,className:n.emptyStateContainer},{children:[(0,i.jsx)(a.EmptyStateIcon,{icon:o.SearchIcon}),(0,i.jsx)(a.Title,r({headingLevel:"h2",size:"lg"},{children:"No packages match the search criteria"})),(0,i.jsx)(a.EmptyStateBody,{children:"Clear your current search to show more results"}),(0,i.jsx)(a.Button,r({ouiaId:"clear_filters",variant:"link",onClick:t},{children:"Clear search"}))]}))})}))})}},29906:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(51225),s=n(89624),l=i(n(14288)),u=n(64470),c=n(42060),d=i(n(27484)),f=n(84110),p=i(n(55537)),h=n(28803);d.default.extend(f);var v=u.global_danger_color_100.value,m=u.global_success_color_100.value,g=u.global_warning_color_100.value,x=(0,c.createUseStyles)({spinner:{animationDuration:"6s !important",margin:"-3px 0"}}),y=function(e){var t=e.error,n=e.count,i=e.time,o=""===i||void 0===i?"Never":(0,d.default)(i).fromNow();return(0,a.jsxs)("div",{children:[t,(0,a.jsxs)(s.Flex,{children:[(0,a.jsxs)(s.Stack,r({className:"pf-u-mt-sm"},{children:[(0,a.jsx)(s.StackItem,r({className:"pf-u-font-weight-bold"},{children:"Last introspection"})),(0,a.jsxs)(s.StackItem,{children:[" ",o," "]})]})),(0,a.jsxs)(s.Stack,r({className:"pf-u-mt-sm"},{children:[(0,a.jsx)(s.StackItem,r({className:"pf-u-font-weight-bold"},{children:"Failed attempts"})),(0,a.jsxs)(s.StackItem,{children:[" ",n," "]})]}))]})]})},b=function(e){var t=e.retryHandler,n=e.uuid,i=(0,h.useAppContext)().rbac;return(0,a.jsx)(s.Flex,{children:(0,a.jsx)(p.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==i?void 0:i.write),setDisabled:!0},{children:(0,a.jsx)(s.Button,r({variant:"link",isInline:!0,onClick:function(){return t?t(n):null}},{children:"Retry"}))}))})};t.default=function(e){var t=e.rowData,n=t.uuid,i=t.status,u=t.failed_introspections_count,c=t.last_introspection_time,d=t.last_introspection_error,f=e.retryHandler,p=x();switch(i){case"Valid":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.CheckCircleIcon,{color:m})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(l.default,r({color:"green"},{children:"Valid"}))})]}));case"Invalid":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.ExclamationCircleIcon,{color:v})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(s.Popover,r({"aria-label":"invalid popover",alertSeverityVariant:"danger",headerContent:"Invalid",headerIcon:(0,a.jsx)(o.ExclamationCircleIcon,{}),bodyContent:(0,a.jsx)(y,{error:d,count:u,time:c}),position:"left",footerContent:(0,a.jsx)(b,{retryHandler:f,uuid:n})},{children:(0,a.jsx)(s.Button,r({variant:"link",isInline:!0},{children:(0,a.jsx)(l.default,r({color:"red",isLink:!0},{children:"Invalid"}))}))}))})]}));case"Unavailable":return(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.ExclamationTriangleIcon,{color:g})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(s.Popover,r({"aria-label":"unavailable popover",alertSeverityVariant:"warning",headerContent:"Unavailable",headerIcon:(0,a.jsx)(o.ExclamationTriangleIcon,{}),bodyContent:(0,a.jsx)(y,{error:d,count:u,time:c}),position:"left",footerContent:(0,a.jsx)(b,{retryHandler:f,uuid:n})},{children:(0,a.jsx)(l.default,r({color:"gold",isLink:!0},{children:"Unavailable"}))}))})]}));case"Pending":return(0,a.jsx)(s.Tooltip,r({position:"top-start",content:"Repository is being introspected"},{children:(0,a.jsxs)(s.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(s.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(s.Spinner,{size:"md",className:p.spinner})})),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(l.default,r({color:"blue"},{children:"In progress"}))})]}))}));default:return(0,a.jsx)(a.Fragment,{})}}},11947:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),l=n(89624),u=n(14040),c=n(64470),d=n(92950),f=n(42060),p=n(92418),h=n(31104),v=o(n(58578)),m=n(88767),g=n(28803),x=o(n(55537)),y=o(n(87322)),b=n(51225),_=o(n(97237)),j=o(n(13876)),S=o(n(68363)),I=n(13768),C=(0,f.createUseStyles)({mainContainer:{backgroundColor:c.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:c.global_secondary_color_100.value,position:"relative",left:"-5px",pointerEvents:"none"},addRepositoriesButton:{marginLeft:"16px"},checkboxMinWidth:{minWidth:"45px!important"},disabled:{color:c.global_disabled_color_100.value},repositoryActions:{display:"flex",flexDirection:"row"}}),T="popularRepositoriesperPage";t.default=function(){var e,t=C(),n=(0,m.useQueryClient)(),o=(0,g.useAppContext)().rbac,c=(0,d.useState)(new Map),f=c[0],P=c[1],w=(0,d.useState)(new Set),k=w[0],O=w[1],E=(0,d.useState)([]),A=E[0],D=E[1],R=(0,d.useState)(""),N=R[0],F=R[1],L=Number(localStorage.getItem(T))||20,M=(0,d.useState)(1),K=M[0],U=M[1],V=(0,d.useState)(""),Q=V[0],B=V[1],G=(0,_.default)(Q),Y=(0,d.useState)(L),q=Y[0],z=Y[1],H=(0,h.usePopularRepositoriesQuery)(K,q,{searchQuery:Q?G:Q}),W=H.isLoading,$=H.error,X=H.isError,Z=H.isFetching,J=H.data,ee=void 0===J?{data:[],meta:{count:0,limit:20,offset:0}}:J,te=(0,h.useRepositoryParams)(),ne=te.isLoading,re=te.error,ie=te.isError,ae=te.data,oe=void 0===ae?{distribution_versions:[],distribution_arches:[]}:ae,se=oe.distribution_versions,le=oe.distribution_arches,ue=(0,h.useAddPopularRepositoryQuery)(n,A,K,q,{searchQuery:G}),ce=ue.mutateAsync,de=ue.isLoading,fe=function(){P(new Map),O(new Set)},pe=(0,d.useMemo)((function(){return k.size>=1}),[k]),he=(0,d.useMemo)((function(){return f.size>=1}),[f]),ve=(0,d.useMemo)((function(){return ee.data.every((function(e){return e.uuid?k.has(e.uuid):f.has(e.url)}))}),[ee,f,k]);(0,d.useEffect)((function(){Z||(D([]),F(""))}),[Z]),(0,d.useEffect)((function(){0!=A.length&&ce().then((function(){D([]),fe()}),(function(){return D([])}))}),[A]),(0,d.useEffect)((function(){N&&xe(N).then(fe,(function(){return F("")}))}),[N]);var me=function(e){var t;return null===(t=le.find((function(t){var n=t.label;return e===n})))||void 0===t?void 0:t.name},ge=(0,h.useDeletePopularRepositoryMutate)(n,K,q,{searchQuery:G}),xe=ge.mutateAsync,ye=ge.isLoading,be=(0,h.useBulkDeleteContentItemMutate)(n,k,K,q,{searchQuery:G},void 0),_e=be.mutateAsync,je=be.isLoading,Se=ye||Z||ne||de||je,Ie=function(e,t){return U(t)},Ce=function(e,t,n){localStorage.setItem(T,t.toString()),z(t),U(n)},Te=["Name","Architecture","Versions"];if(X)throw $;if(ie)throw re;var Pe=ee.data,we=void 0===Pe?[]:Pe,ke=ee.meta.count,Oe=void 0===ke?0:ke,Ee=!(null===(e=null==ee?void 0:ee.data)||void 0===e?void 0:e.length);return(0,s.jsxs)(l.Grid,r({"data-ouia-safe":!Se,"data-ouia-component-id":"popular_repositories_page",className:t.mainContainer},{children:[(0,s.jsxs)(l.Flex,r({className:t.topContainer},{children:[(0,s.jsx)(l.FlexItem,{children:(0,s.jsxs)(l.InputGroup,{children:[(0,s.jsxs)(l.FlexItem,{children:[(0,s.jsx)(l.TextInput,{isDisabled:W,id:"search",ouiaId:"popular_filter_search",placeholder:"Filter by name/url",value:Q,onChange:B,className:t.searchInput}),(0,s.jsx)(b.SearchIcon,{size:"sm",className:t.searchIcon})]}),(0,s.jsxs)(l.FlexItem,r({className:t.repositoryActions},{children:[(0,s.jsx)(x.default,r({content:(null==o?void 0:o.write)?"Make a selection below to add multiple repositories":"You do not have the required permissions to perform this action.",show:!(null==o?void 0:o.write)||!he,setDisabled:!0},{children:(0,s.jsx)(l.Button,r({onClick:function(){var e=[];f.forEach((function(t){e.push(t)})),D(e)},className:t.addRepositoriesButton,ouiaId:"add_checked_repos"},{children:he?"Add ".concat(f.size," repositories"):"Add selected repositories"}))})),(0,s.jsx)(x.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==o?void 0:o.write),setDisabled:!0},{children:(0,s.jsx)(S.default,{atLeastOneRepoChecked:pe,numberOfReposChecked:k.size,deleteCheckedRepos:function(){return i(void 0,void 0,void 0,(function(){return a(this,(function(e){return _e(k).then((function(){var e=Math.ceil((Oe-k.size)/q);K>1&&e<K&&U(e),fe()})),[2]}))}))}})}))]}))]})}),(0,s.jsx)(l.FlexItem,{children:(0,s.jsx)(v.default,r({hide:W||Ee},{children:(0,s.jsx)(l.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",isDisabled:W,itemCount:Oe,perPage:q,page:K,onSetPage:Ie,isCompact:!0,onPerPageSelect:Ce})}))})]})),(0,s.jsx)(v.default,r({hide:!W},{children:(0,s.jsx)(l.Grid,r({className:t.mainContainer},{children:(0,s.jsx)(p.SkeletonTable,{rowSize:q,colSize:Te.length,variant:u.TableVariant.compact})}))})),(0,s.jsx)(v.default,r({hide:W||Ee},{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.TableComposable,r({"aria-label":"Popular repositories table",ouiaId:"popular_repos_table",variant:"compact"},{children:[(0,s.jsx)(u.Thead,{children:(0,s.jsxs)(u.Tr,{children:[(0,s.jsx)(v.default,r({hide:!(null==o?void 0:o.write)},{children:(0,s.jsx)(u.Th,{className:t.checkboxMinWidth,select:{onSelect:function(e,t){var n=new Set(k),r=new Map(f);t?we.forEach((function(e){e.uuid?n.add(e.uuid):r.set(e.url,(0,I.repoToRequestItem)(e))})):we.forEach((function(e){e.uuid?n.delete(e.uuid):r.delete(e.url)})),O(n),P(r)},isSelected:ve}})})),Te.map((function(e){return(0,s.jsx)(u.Th,{children:e},e+"column")})),(0,s.jsx)(u.Th,{children:(0,s.jsx)(l.Spinner,{size:"md",className:Se?"":t.invisible})})]})}),(0,s.jsx)(u.Tbody,{children:we.map((function(e,n){var i,a,c=e.uuid,d=e.existing_name,p=e.suggested_name,h=e.url,m=e.distribution_arch,g=e.distribution_versions,b=e.gpg_key,_=e.metadata_verification;return(0,s.jsxs)(u.Tr,{children:[(0,s.jsx)(v.default,r({hide:!(null==o?void 0:o.write)},{children:(0,s.jsx)(u.Td,{select:{rowIndex:n,onSelect:function(t,n){return function(e,t){if(e.uuid){var n=new Set(k);t?n.add(e.uuid):n.delete(e.uuid),O(n)}else{var r=new Map(f);t?r.set(e.url,(0,I.repoToRequestItem)(e)):r.delete(e.url),P(r)}}(e,n)},isSelected:c?k.has(c):f.has(h)}})})),(0,s.jsx)(u.Td,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Flex,r({direction:{default:"row"}},{children:[(0,s.jsxs)(l.FlexItem,{children:[" ",p]}),d&&p!==d&&(0,s.jsxs)(l.FlexItem,r({className:t.disabled},{children:["Current name: ",d]}))]})),(0,s.jsx)(y.default,{href:h})]})}),(0,s.jsx)(u.Td,{children:me(m)}),(0,s.jsx)(u.Td,{children:(a=g,se.filter((function(e){var t=e.label;return null==a?void 0:a.includes(t)})).map((function(e){return e.name})).join(", "))}),(0,s.jsx)(u.Td,r({width:10},{children:(0,s.jsx)(x.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==o?void 0:o.write),setDisabled:!0},{children:c?(0,s.jsx)(l.Button,r({isDisabled:c===N||de,onClick:function(){return F(c)},variant:"danger",ouiaId:"remove_popular_repo"},{children:"Remove"})):(0,s.jsx)(l.Button,r({variant:"secondary",isDisabled:(null===(i=A[n])||void 0===i?void 0:i.url)===h||Z||ye||je,onClick:function(){var e=[];e[n]={name:p,url:h,distribution_versions:g,distribution_arch:m,gpg_key:b,metadata_verification:_},D(e)},ouiaId:"add_popular_repo"},{children:"Add"}))}))}))]},p+n)}))})]})),(0,s.jsx)(v.default,r({hide:W||Ee},{children:(0,s.jsxs)(l.Flex,r({className:t.bottomContainer},{children:[(0,s.jsx)(l.FlexItem,{}),(0,s.jsx)(l.FlexItem,{children:(0,s.jsx)(l.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:Oe,perPage:q,page:K,onSetPage:Ie,variant:l.PaginationVariant.bottom,onPerPageSelect:Ce})})]}))}))]})})),(0,s.jsx)(v.default,r({hide:!Ee},{children:(0,s.jsx)(j.default,{clearFilters:function(){return B("")},notFiltered:!G,itemName:"popular repositories"})}))]}))}},13768:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.repoToRequestItem=void 0,t.repoToRequestItem=function(e,t){return void 0===t&&(t=!1),{name:e.suggested_name,url:e.url,distribution_versions:e.distribution_versions,distribution_arch:e.distribution_arch,gpg_key:e.gpg_key,metadata_verification:e.metadata_verification,snapshot:t}}},78742:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(92950),s=n(89624),l=n(16114),u=n(64470),c=n(42060),d=n(44439),f=i(n(46517)),p=i(n(64722)),h=(0,c.createUseStyles)({tabs:{backgroundColor:u.global_BackgroundColor_100.value},tab:{"& button":{padding:0}},link:{color:"inherit",textDecoration:"none",padding:"8px 16px","&:focus-visible":{outlineOffset:"-6px"}}});t.default=function(e){var t=e.pathname,n=e.tabs,i=h(),u=(0,o.useMemo)((function(){return(0,d.last)(t.split("/"))}),[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.default,{}),(0,a.jsx)(s.Tabs,r({className:i.tabs,ouiaId:"routed-tabs",activeKey:u},{children:n.map((function(e){var t=e.title,n=e.route;return(0,a.jsx)(s.Tab,{className:i.tab,keyParams:n,tabIndex:-1,eventKey:n||"content","aria-label":t,ouiaId:t,title:(0,a.jsx)(l.Link,r({className:i.link,accessKey:n,to:n},{children:(0,a.jsx)(s.TabTitleText,{children:t})}),n)},n)}))})),(0,a.jsx)(p.default,{}),(0,a.jsx)(l.Outlet,{})]})}},2722:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(85893),u=n(89624),c=n(16114),d=n(42060),f=n(78280),p=s(n(78742)),h=n(92950),v=o(n(87034)),m=(0,d.createUseStyles)({containerMargin:{margin:"24px"}});t.default=function(){var e=m(),t=(0,c.useLocation)().pathname,n=(0,h.useMemo)((function(){return Math.random()}),[]),i=(0,v.default)();return(0,l.jsx)(c.Routes,{children:(0,l.jsxs)(c.Route,r({element:(0,l.jsx)(p.default,{pathname:t,tabs:i})},{children:[i.map((function(t,n){var i=t.route,a=t.Element,o=t.ChildRoutes;return(0,l.jsx)(c.Route,r({path:i,element:(0,l.jsx)(f.ErrorPage,{children:(0,l.jsx)(u.Grid,r({className:e.containerMargin},{children:(0,l.jsx)(a,{})}))})},{children:null==o?void 0:o.map((function(e,t){var n=e.path,r=e.Element;return(0,l.jsx)(c.Route,{path:n,element:(0,l.jsx)(r,{})},t)}))}),n.toString())})),(0,l.jsx)(c.Route,{path:"*",element:(0,l.jsx)(c.Navigate,{to:v.DEFAULT_ROUTE,replace:!0})})]}))},n)}},87034:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ADMIN_TASKS_ROUTE=t.POPULAR_REPOSITORIES_ROUTE=t.DEFAULT_ROUTE=void 0;var a=n(92950),o=i(n(25886)),s=i(n(88296)),l=i(n(98243)),u=i(n(25574)),c=i(n(68604)),d=i(n(21887)),f=i(n(11947)),p=n(28803);t.DEFAULT_ROUTE="",t.POPULAR_REPOSITORIES_ROUTE="popular-repositories",t.ADMIN_TASKS_ROUTE="admin-tasks",t.default=function(){var e=(0,p.useAppContext)(),n=e.features,i=e.rbac,h=null==i?void 0:i.write,v=(0,a.useMemo)((function(){var e,i;return r([{title:"Your repositories",route:t.DEFAULT_ROUTE,Element:l.default,ChildRoutes:r(r([],h?[{path:"edit-repository",Element:c.default},{path:"add-repository",Element:u.default}]:[],!0),[{path:":repoUUID/packages",Element:d.default}],!1)},{title:"Popular repositories",route:t.POPULAR_REPOSITORIES_ROUTE,Element:f.default}],(null===(e=null==n?void 0:n.admintasks)||void 0===e?void 0:e.enabled)&&(null===(i=n.admintasks)||void 0===i?void 0:i.accessible)?[{title:"Admin tasks",route:t.ADMIN_TASKS_ROUTE,Element:o.default,ChildRoutes:[{path:":taskUUID",Element:s.default}]}]:[],!0)}),[h,n]);return v}},55537:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),s=n(92950);t.default=function(e){var t=e.show,n=e.children,l=e.setDisabled,u=i(e,["show","children","setDisabled"]);return t?(0,a.jsx)(o.Tooltip,r({},u,{children:(0,a.jsx)("div",{children:n&&(0,s.cloneElement)(n,l?{isDisabled:l}:void 0)})})):(0,a.jsx)(a.Fragment,{children:n})}},68363:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),s=n(92950),l=n(28803),u=i(n(55537));t.default=function(e){var t=e.atLeastOneRepoChecked,n=e.numberOfReposChecked,i=e.deleteCheckedRepos,c=(0,l.useAppContext)().rbac,d=(0,s.useState)(!1),f=d[0],p=d[1],h=[(0,a.jsx)(u.default,r({content:"Make a selection below to delete multiple repositories",show:!t,setDisabled:!0},{children:(0,a.jsx)(o.DropdownItem,r({onClick:i},{children:t?"Remove ".concat(n," repositories"):"Remove selected repositories"}))}),"delete")];return(0,a.jsx)(o.Dropdown,{onSelect:function(){p(!1),document.getElementById("delete-kebab").focus()},toggle:(0,a.jsx)(o.KebabToggle,{id:"delete-kebab",onToggle:function(e){p(e)},isDisabled:!(null==c?void 0:c.write)}),isOpen:f,isPlain:!0,dropdownItems:h,direction:"up"})}},6378:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},l=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var u=n(85893),c=n(89624),d=o(n(92950));t.default=function(e){var t=e.options,n=e.variant,i=e.selectedProp,a=e.setSelected,o=e.toggleIcon,f=e.placeholderText,p=e.isDisabled,h=s(e,["options","variant","selectedProp","setSelected","toggleIcon","placeholderText","isDisabled"]),v=Array.isArray(i)?i:[i],m=(0,d.useState)(!1),g=m[0],x=m[1],y=t.map((function(e,t){return(0,u.jsx)(c.SelectOption,{id:e,value:e},e+t)}));return(0,u.jsx)(c.Select,r({isDisabled:p,variant:n,onSelect:function(e,t){switch(n){case c.SelectVariant.single:a(t),x(!1);break;case c.SelectVariant.typeaheadMulti:case c.SelectVariant.checkbox:if(Array.isArray(i)){if(v.includes(t)){var r=v.filter((function(e){return e!==t}));a(r);break}a(l(l([],v,!0),[t],!1));break}}},selections:v,isOpen:g,onToggle:function(e){return x(e)},placeholderText:f,isCheckboxSelectionBadgeHidden:!0,toggleIcon:o},h,{children:y}))}},13876:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(45718),s=(0,n(42060).createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1},emptyStateBody:{marginBottom:"16px"}});t.default=function(e){var t=e.notFiltered,n=e.clearFilters,l=e.itemName,u=e.notFilteredBody,c=e.notFilteredButton,d=s();return(0,i.jsxs)(a.EmptyState,r({variant:a.EmptyStateVariant.full,className:d.emptyStateContainer},{children:[(0,i.jsx)(a.EmptyStateIcon,{icon:t?o.PlusCircleIcon:o.SearchIcon}),(0,i.jsx)(a.Title,r({headingLevel:"h2",size:"lg",ouiaId:"empty_custom_title"},{children:t?"No ".concat(l):"No ".concat(l," match the filter criteria")})),(0,i.jsx)(a.EmptyStateBody,r({className:d.emptyStateBody},{children:t?u:"Clear all filters to show more results"})),t?c:(0,i.jsx)(a.Button,r({ouiaId:"clear_filters",variant:"link",onClick:n},{children:"Clear all filters"}))]}))}},78280:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPage=void 0;var i=n(85893),a=n(92418).ErrorBoundary;t.ErrorPage=function(e){var t=e.children;return(0,i.jsx)(a,r({headerTitle:"Content Sources",errorTitle:"Unhandled error",errorDescription:"There was a problem trying to process your request"},{children:t}))}},46517:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(92418),s=n(64470),l=n(42060),u=o.PageHeader,c=(0,l.createUseStyles)({subtext:{color:s.global_Color_100.value,paddingTop:"8px"}});t.default=function(){var e=c();return(0,i.jsxs)(u,{children:[(0,i.jsx)(o.PageHeaderTitle,{title:"Custom Repositories"}),(0,i.jsx)(a.Text,r({className:e.subtext,ouiaId:"custom_repositories_description"},{children:"View all custom repositories within your organization."}))]})}},58578:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(85893);t.default=function(e){var t=e.hide,n=e.children;return t?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(r.Fragment,{children:n})}},72734:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsPage=void 0;var i=n(85893),a=n(89624),o=n(51225),s=n(92418),l=s.PageHeader;t.NoPermissionsPage=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{children:(0,i.jsx)(s.PageHeaderTitle,{title:"Repositories"})}),(0,i.jsx)(a.Grid,r({style:{margin:"24px"}},{children:(0,i.jsxs)(a.EmptyState,r({variant:a.EmptyStateVariant.full},{children:[(0,i.jsx)(a.EmptyStateIcon,{icon:o.LockIcon}),(0,i.jsx)(a.Title,r({headingLevel:"h5",size:"lg"},{children:"You do not have access to Repositories"})),(0,i.jsx)(a.EmptyStateBody,{children:"Contact your organization administrator(s) for more information."})]}))}))]})}},64722:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),s=n(89624),l=n(64470),u=n(92950),c=n(42060),d=n(95699),f=n(51225),p=(0,c.createUseStyles)({quickstartContainer:{margin:"24px 24px 0",backgroundColor:l.global_BackgroundColor_100.value},quickstartSpinner:{margin:"0 0 -4px 5px"},buildCustomButton:{marginTop:"20px",padding:0,fontWeight:600}}),h="QUICKSTART_EXPANDED";t.default=function(){var e=this,t=(0,d.useChrome)(),n=t.isBeta,l=t.quickStarts,c=(0,u.useMemo)(n,[]),v=(0,u.useMemo)((function(){return localStorage.getItem(h)||"true"}),[]),m=(0,u.useState)("true"===v),g=m[0],x=m[1],y=(0,u.useState)(!1),b=y[0],_=y[1],j=p();if(!c)return(0,o.jsx)(o.Fragment,{});var S=function(){return x((function(e){return localStorage.setItem(h,"".concat(!e)),!e}))};return(0,o.jsx)(s.Grid,r({className:j.quickstartContainer},{children:(0,o.jsxs)(s.ExpandableSection,r({toggleText:"Need help getting started with Preview features?",onToggle:S,isExpanded:g,displaySize:"large","aria-label":"quickStart-expansion","data-ouia-component-id":"quickstart_expand"},{children:[(0,o.jsx)(s.Text,{children:"For help getting started, access the quick start below:"}),(0,o.jsx)(s.Button,r({className:j.buildCustomButton,iconPosition:"right",icon:b?(0,o.jsx)(s.Spinner,{size:"md",className:j.quickstartSpinner}):(0,o.jsx)(f.ArrowRightIcon,{}),variant:"link",ouiaId:"quickstart_link",onClick:function(){return i(e,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:_(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,null==l?void 0:l.activateQuickstart("insights-custom-repos")];case 2:return t.sent(),S(),[3,4];case 3:return e=t.sent(),console.warn(e),[3,4];case 4:return _(!1),[2]}}))}))},isDisabled:b},{children:"Build an Image with Custom Content"}))]}))}))}},14288:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(42060),o=n(64470),s=o.global_danger_color_200.value,l=o.global_success_color_200.value,u=o.global_warning_color_200.value,c=o.global_info_color_200.value;t.default=function(e){var t,n=(t=e.isLink,(0,a.createUseStyles)({fontStyle:r({fontWeight:"bold",fontSize:"14px"},t?{textDecoration:"grey dotted underline",cursor:"pointer"}:{}),red:{extend:"fontStyle",color:s},green:{extend:"fontStyle",color:l},gold:{extend:"fontStyle",color:u},blue:{extend:"fontStyle",color:c}}))(),o=e.color,d=e.children;return(0,i.jsx)("span",r({className:n[o]},{children:d}))}},87322:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(51225),o=(0,n(42060).createUseStyles)({link:{alignItems:"center",display:"flex",width:"fit-content"},icon:{marginLeft:"5px"}});t.default=function(e){var t=e.href,n=o();return(0,i.jsxs)("a",r({href:t,className:n.link,rel:"noreferrer",target:"_blank"},{children:[t," ",(0,i.jsx)(a.ExternalLinkAltIcon,{className:n.icon})]}))}},28803:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useAppContext=t.ContextProvider=t.AppContext=void 0;var s=n(85893),l=n(92950),u=n(55128),c=n(83215),d=n(22782),f=n(4147),p=o(n(95699)),h=n(46433),v=d.getRegistry,m=f.insights.appname;t.AppContext=(0,l.createContext)({}),t.ContextProvider=function(e){var n=e.children,o=(0,l.useState)(void 0),d=o[0],f=o[1],g=(0,l.useState)(null),x=g[0],y=g[1],b=(0,p.default)(),_=(0,h.useFetchFeaturesQuery)(),j=_.fetchFeatures,S=_.isLoading;return(0,l.useEffect)((function(){v().register({notifications:c.notificationsReducer}),b&&!d&&b.auth.getUser().then((function(){return i(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2,(0,u.fetchRBAC)(m).then(f)]}))}))})),i(void 0,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,j()];case 1:return e=t.sent(),y(e),[2]}}))}))}),[!!b]),(0,s.jsx)(t.AppContext.Provider,r({value:{rbac:d?{read:null==d?void 0:d.hasPermission("content-sources","repositories","read"),write:null==d?void 0:d.hasPermission("content-sources","repositories","write")}:void 0,features:x,isFetchingFeatures:S}},{children:n}))},t.useAppContext=function(){return(0,l.useContext)(t.AppContext)}},9683:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAdminTask=t.getAdminTasks=void 0;var o=a(n(78991));t.getAdminTasks=function(e,t,n,a){return r(void 0,void 0,void 0,(function(){var r,s,l,u;return i(this,(function(i){switch(i.label){case 0:return r=n.accountId,s=n.orgId,l=null===(u=null==n?void 0:n.statuses)||void 0===u?void 0:u.join(",").toLowerCase(),[4,o.default.get("/api/content-sources/v1/admin/tasks/?offset=".concat((e-1)*t,"&limit=").concat(t,"&account_id=").concat(r,"&org_id=").concat(s,"&status=").concat(l,"&sort_by=").concat(a))];case 1:return[2,i.sent().data]}}))}))},t.getAdminTask=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.get("/api/content-sources/v1/admin/tasks/".concat(e))];case 1:return[2,t.sent().data]}}))}))}},5294:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useFetchAdminTaskQuery=t.useAdminTaskListQuery=t.ADMIN_TASK_KEY=t.ADMIN_TASK_LIST_KEY=void 0;var a=n(92950),o=n(88767),s=n(9683),l=i(n(90272));t.ADMIN_TASK_LIST_KEY="ADMIN_TASK_LIST_KEY",t.ADMIN_TASK_KEY="ADMIN_TASK_KEY",t.useAdminTaskListQuery=function(e,n,i,u){var c=(0,a.useState)(!1),d=c[0],f=c[1],p=(0,a.useState)(0),h=p[0],v=p[1],m=(0,l.default)();return(0,o.useQuery)(r([t.ADMIN_TASK_LIST_KEY,e,n,u],Object.values(i),!0),(function(){return(0,s.getAdminTasks)(e,n,i,u)}),{onSuccess:function(e){var t,n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.some((function(e){return"running"===e.status}));return d&&n&&v(h+1),d&&!n&&v(0),f(!(h>40)&&n)},onError:function(e){f(!1),v(0),m("Unable to get admin task list","An error occurred",e)},refetchInterval:d?15e3:void 0,refetchIntervalInBackground:!1,refetchOnWindowFocus:d,keepPreviousData:!0,staleTime:2e4})},t.useFetchAdminTaskQuery=function(e){var n=(0,l.default)();return(0,o.useQuery)([t.ADMIN_TASK_KEY,e],(function(){return(0,s.getAdminTask)(e)}),{onError:function(e){n("Unable to find an Admin task with the given UUID.","An error occurred",e)},keepPreviousData:!0,staleTime:2e4})}},34427:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.introspectRepository=t.getPackages=t.getGpgKey=t.validateContentListItems=t.getRepositoryParams=t.EditContentListItem=t.AddContentListItems=t.deleteContentListItems=t.deleteContentListItem=t.fetchContentItem=t.getContentList=t.getPopularRepositories=void 0;var o=a(n(78991));t.getPopularRepositories=function(e,t,n,a){return r(void 0,void 0,void 0,(function(){var r,s,l,u,c;return i(this,(function(i){switch(i.label){case 0:return r=null==n?void 0:n.searchQuery,s=null===(u=null==n?void 0:n.versions)||void 0===u?void 0:u.join(","),l=null===(c=null==n?void 0:n.arches)||void 0===c?void 0:c.join(","),[4,o.default.get("/api/content-sources/v1/popular_repositories/?offset=".concat((e-1)*t,"&limit=").concat(t,"&search=").concat(r,"&version=").concat(s,"&arch=").concat(l,"&sort_by=").concat(a))];case 1:return[2,i.sent().data]}}))}))},t.getContentList=function(e,t,n,a){return r(void 0,void 0,void 0,(function(){var r,s,l,u,c;return i(this,(function(i){switch(i.label){case 0:return r=n.searchQuery,s=n.versions.join(","),l=n.arches.join(","),u=null===(c=null==n?void 0:n.statuses)||void 0===c?void 0:c.join(","),[4,o.default.get("/api/content-sources/v1/repositories/?offset=".concat((e-1)*t,"&limit=").concat(t,"&search=").concat(r,"&version=").concat(s,"&status=").concat(u,"&arch=").concat(l,"&sort_by=").concat(a))];case 1:return[2,i.sent().data]}}))}))},t.fetchContentItem=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.get("/api/content-sources/v1/repositories/".concat(e))];case 1:return[2,t.sent().data]}}))}))},t.deleteContentListItem=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.delete("/api/content-sources/v1/repositories/".concat(e))];case 1:return[2,t.sent().data]}}))}))},t.deleteContentListItems=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1/repositories/bulk_delete/",{uuids:e})];case 1:return[2,t.sent().data]}}))}))},t.AddContentListItems=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1.0/repositories/bulk_create/",e)];case 1:return[2,t.sent().data]}}))}))},t.EditContentListItem=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.patch("/api/content-sources/v1.0/repositories/".concat(e.uuid),e)];case 1:return[2,t.sent().data]}}))}))},t.getRepositoryParams=function(){return r(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,o.default.get("/api/content-sources/v1/repository_parameters/")];case 1:return[2,e.sent().data]}}))}))},t.validateContentListItems=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1.0/repository_parameters/validate/",e)];case 1:return[2,t.sent().data]}}))}))},t.getGpgKey=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1/repository_parameters/external_gpg_key/",{url:e})];case 1:return[2,t.sent().data]}}))}))},t.getPackages=function(e,t,n,a,s){return r(void 0,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,o.default.get("/api/content-sources/v1.0/repositories/".concat(e,"/rpms?offset=").concat((t-1)*n,"&limit=").concat(n,"&search=").concat(a,"&sort_by=").concat(s))];case 1:return[2,r.sent().data]}}))}))},t.introspectRepository=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1/repositories/".concat(e.uuid,"/introspect/"),{reset_count:e.reset_count})];case 1:return[2,t.sent().data]}}))}))}},31104:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useIntrospectRepositoryMutate=t.useGetPackagesQuery=t.useFetchGpgKey=t.useRepositoryParams=t.useBulkDeleteContentItemMutate=t.useDeleteContentItemMutate=t.useDeletePopularRepositoryMutate=t.useValidateContentList=t.useEditContentQuery=t.useAddPopularRepositoryQuery=t.useAddContentQuery=t.useContentListQuery=t.usePopularRepositoriesQuery=t.useFetchContent=t.CONTENT_ITEM_KEY=t.PACKAGES_KEY=t.CREATE_PARAMS_KEY=t.REPOSITORY_PARAMS_KEY=t.POPULAR_REPOSITORIES_LIST_KEY=t.CONTENT_LIST_KEY=void 0;var l=n(89624),u=n(92950),c=n(88767),d=n(44439),f=n(34427),p=n(5294),h=s(n(90272)),v=s(n(44703));t.CONTENT_LIST_KEY="CONTENT_LIST_KEY",t.POPULAR_REPOSITORIES_LIST_KEY="POPULAR_REPOSITORIES_LIST_KEY",t.REPOSITORY_PARAMS_KEY="REPOSITORY_PARAMS_KEY",t.CREATE_PARAMS_KEY="CREATE_PARAMS_KEY",t.PACKAGES_KEY="PACKAGES_KEY",t.CONTENT_ITEM_KEY="CONTENT_ITEM_KEY",t.useFetchContent=function(e){var n=(0,h.default)();return(0,c.useQuery)(o([t.CONTENT_ITEM_KEY],e,!0),(function(){return(0,f.fetchContentItem)(e[0])}),{onError:function(e){return n("Unable to find associated repository.","An error occurred",e)},keepPreviousData:!0,staleTime:2e4})},t.usePopularRepositoriesQuery=function(e,n,r,i){var a=(0,h.default)();return(0,c.useQuery)(o([t.POPULAR_REPOSITORIES_LIST_KEY,e,n,i],Object.values(r||{}),!0),(function(){return(0,f.getPopularRepositories)(e,n,r,i)}),{keepPreviousData:!0,staleTime:2e4,onError:function(e){return a("Unable to get popular repositories list","An error occurred",e)}})},t.useContentListQuery=function(e,n,r,i){var a=(0,u.useState)(!1),s=a[0],l=a[1],d=(0,u.useState)(0),p=d[0],v=d[1],m=(0,h.default)();return(0,c.useQuery)(o([t.CONTENT_LIST_KEY,e,n,i],Object.values(r),!0),(function(){return(0,f.getContentList)(e,n,r,i)}),{onSuccess:function(e){var t,n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.some((function(e){var t=e.status;return"Pending"===t||""===t}));return s&&n&&v(p+1),s&&!n&&v(0),l(!(p>40)&&n)},onError:function(e){l(!1),v(0),m("Unable to get repositories list","An error occurred",e)},refetchInterval:s?15e3:void 0,refetchIntervalInBackground:!1,refetchOnWindowFocus:s,keepPreviousData:!0,staleTime:2e4})},t.useAddContentQuery=function(e,n){var r=(0,h.default)(),i=(0,v.default)().notify;return(0,c.useMutation)((function(){return(0,f.AddContentListItems)(n.filter((function(e){return!!e})))}),{onSuccess:function(r){var a,o=r.some((function(e){return"Pending"===e.status}));i({variant:l.AlertVariant.success,title:(null==n?void 0:n.length)>1?"".concat(null==n?void 0:n.length," custom repositories added"):'Custom repository "'.concat(null===(a=null==n?void 0:n[0])||void 0===a?void 0:a.name,'" added'),description:o?"Repository introspection in progress":"Repository introspection data already available"}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(p.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(e){r("Error adding items to content list","An error occurred",e)}})},t.useAddPopularRepositoryQuery=function(e,n,s,u,d){var m=(0,h.default)(),g=(0,v.default)().notify,x=o([t.POPULAR_REPOSITORIES_LIST_KEY,s,u,void 0],Object.values(d||{}),!0),y=n.filter((function(e){return!!e}));return(0,c.useMutation)((function(){return(0,f.AddContentListItems)(y)}),{onMutate:function(){return i(void 0,void 0,void 0,(function(){var t,n;return a(this,(function(i){switch(i.label){case 0:return t=y[0].name,[4,e.cancelQueries(x)];case 1:return i.sent(),n=e.getQueryData(x)||{},e.setQueryData(x,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.map((function(e){return t!==e.suggested_name||e.uuid?e:r(r({},e),{uuid:"temp",existing_name:t})}))})})),[2,{previousData:n}]}}))}))},onSuccess:function(n){var r,i=n.some((function(e){return"Pending"===e.status}));g({variant:l.AlertVariant.success,title:'Custom repository "'.concat(null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.name,'" added'),description:i?"Repository introspection in progress":"Repository introspection data already available"}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(p.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(x,i)}m("Error adding item from popularRepo","An error occurred",t)}})},t.useEditContentQuery=function(e,n){var r=(0,h.default)(),i=(0,v.default)().notify;return(0,c.useMutation)((function(){return(0,f.EditContentListItem)(n[0])}),{onSuccess:function(){i({variant:l.AlertVariant.success,title:"Successfully edited ".concat(n.length," ").concat(n.length>1?"items":"item")}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(p.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(e){r("Error editing items on content list","An error occurred",e)}})},t.useValidateContentList=function(){var e=(0,h.default)();return(0,c.useMutation)((function(e){return(0,f.validateContentListItems)(e)}),{onError:function(t){e("Error validating form fields","An error occurred",t)}})},t.useDeletePopularRepositoryMutate=function(e,n,s,l){var u=o([t.POPULAR_REPOSITORIES_LIST_KEY,n,s,void 0],Object.values(l||{}),!0),d=(0,h.default)();return(0,c.useMutation)(f.deleteContentListItem,{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return[4,e.cancelQueries(u)];case 1:return i.sent(),n=e.getQueryData(u)||{},e.setQueryData(u,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.map((function(e){return e.uuid===t?r(r({},e),{uuid:void 0}):e}))})})),[2,{previousData:n,queryClient:e}]}}))}))},onSuccess:function(){e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(p.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(u,i)}d("Unable to delete the given repository.","An error occurred",t)}})},t.useDeleteContentItemMutate=function(e,n,s,l,u){var d=o([t.CONTENT_LIST_KEY,n,s,u],Object.values(l||{}),!0),v=(0,h.default)();return(0,c.useMutation)(f.deleteContentListItem,{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return[4,e.cancelQueries(d)];case 1:return i.sent(),n=e.getQueryData(d)||{},e.setQueryData(d,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.filter((function(e){return t!==e.uuid})),meta:n.meta?r(r({},n.meta),{count:n.meta.count?n.meta.count-1:1}):void 0})})),[2,{previousData:n,queryClient:e}]}}))}))},onSuccess:function(n,r,i){var a=i.previousData;e.setQueriesData(t.CONTENT_LIST_KEY,(function(e){var t,n;return void 0===e&&(e={}),(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.count)&&(e.meta.count=(null===(n=null==a?void 0:a.meta)||void 0===n?void 0:n.count)-1),e})),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(p.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(d,i)}v("Unable to delete the given repository.","An error occurred",t)}})},t.useBulkDeleteContentItemMutate=function(e,n,s,l,u,d){var v=Array.from(n),m=o([t.CONTENT_LIST_KEY,s,l,d],Object.values(u||{}),!0),g=(0,h.default)();return(0,c.useMutation)((function(){return(0,f.deleteContentListItems)(v)}),{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n,i;return a(this,(function(a){switch(a.label){case 0:return[4,e.cancelQueries(m)];case 1:return a.sent(),n=e.getQueryData(m)||{},i=n.meta?r(r({},n.meta),{count:n.meta.count?n.meta.count-t.size:1}):void 0,e.setQueryData(m,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.filter((function(e){return!t.has(e.uuid)})),meta:i})})),[2,{previousData:n,newMeta:i,queryClient:e}]}}))}))},onSuccess:function(n,r,i){var a=i.newMeta;e.setQueriesData(t.CONTENT_LIST_KEY,(function(e){var t;return void 0===e&&(e={}),(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.count)&&(e.meta.count=null==a?void 0:a.count),e})),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(p.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(m,i)}g("Error deleting items from content list","An error occurred",t)}})},t.useRepositoryParams=function(){return(0,c.useQuery)(t.REPOSITORY_PARAMS_KEY,f.getRepositoryParams,{keepPreviousData:!0,staleTime:1/0})},t.useFetchGpgKey=function(){var e=(0,h.default)(),t=(0,u.useState)(!1),n=t[0],r=t[1];return{fetchGpgKey:function(t){return i(void 0,void 0,Promise,(function(){var n,i,o;return a(this,(function(a){switch(a.label){case 0:r(!0),n=t,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,f.getGpgKey)(t)];case 2:return i=a.sent(),n=i.gpg_key,[3,4];case 3:return o=a.sent(),e("Error fetching GPG key from provided URL","An error occurred",o),[3,4];case 4:return r(!1),[2,n]}}))}))},isLoading:n}},t.useGetPackagesQuery=function(e,n,r,i,a){var o=(0,h.default)();return(0,c.useQuery)([t.PACKAGES_KEY,e,n,r,i,a],(function(){return(0,f.getPackages)(e,n,r,i,a)}),{keepPreviousData:!0,optimisticResults:!0,staleTime:6e4,onError:function(e){o("Unable to find packages with the given UUID.","An error occurred",e)}})},t.useIntrospectRepositoryMutate=function(e,n,s,u,m){var g=o([t.CONTENT_LIST_KEY,n,s,m],Object.values(u||{}),!0),x=(0,h.default)(),y=(0,v.default)().notify;return(0,c.useMutation)(f.introspectRepository,{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n,i,o,s,l;return a(this,(function(a){switch(a.label){case 0:return[4,e.cancelQueries(g)];case 1:return a.sent(),n=e.getQueryData(g)||{},i=null===(l=null===(s=n.data)||void 0===s?void 0:s.find((function(e){return t.uuid==e.uuid})))||void 0===l?void 0:l.status,o=(0,d.cloneDeep)(n),i&&(o.data.filter((function(e){return t.uuid==e.uuid})).at(0).status="Pending"),e.setQueryData(g,(function(){return r({},o)})),[2,{previousData:n,queryClient:e}]}}))}))},onSuccess:function(){y({variant:l.AlertVariant.success,title:"Repository introspection in progress"}),e.invalidateQueries(p.ADMIN_TASK_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(g,i)}x("Error introspecting repository","An error occurred",t)}})}},71931:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFeatures=void 0;var o=a(n(78991));t.getFeatures=function(){return r(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,o.default.get("/api/content-sources/v1/features/")];case 1:return[2,e.sent().data]}}))}))}},46433:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useFetchFeaturesQuery=void 0;var o=n(92950),s=n(71931),l=a(n(90272));t.useFetchFeaturesQuery=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],a=(0,l.default)();return{fetchFeatures:function(){return r(void 0,void 0,Promise,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:n(!0),e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,s.getFeatures)()];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),a("Error fetching features","An error occurred",t),[3,4];case 4:return n(!1),[2,e]}}))}))},isLoading:t}}},16239:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.resetStore=t.createStore=void 0;var i=n(55128);t.createStore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.initStore.apply(void 0,r([{},{}],e,!1))},t.resetStore=function(){return(0,i.restoreStore)()}},4147:e=>{e.exports=JSON.parse('{"name":"content-sources-frontend","version":"0.0.1","private":false,"engines":{"node":"=16.14.0","npm":">=8.0.0"},"scripts":{"build":"fec build","deploy":"npm-run-all build lint test","lint":"eslint src/**/*.{js,jsx,ts,tsx} --no-error-on-unmatched-pattern","lint:fix":"eslint --fix \'src/**/*.{js,jsx,ts,tsx}\' --no-error-on-unmatched-pattern","format":"prettier --write \'src/**/*.{js,jsx,ts,tsx,css,md}\' --config ./.prettierrc","patch:hosts":"fec patch-etc-hosts","start":"fec dev","test":"TZ=UTC jest --verbose --no-cache","verify":"npm-run-all build lint test"},"dependencies":{"@patternfly/react-core":"^4.206.2","@patternfly/react-icons":"^4.53.16","@patternfly/react-table":"^4.75.2","@redhat-cloud-services/frontend-components":"^3.9.22","@redhat-cloud-services/frontend-components-config":"^4.6.34","@redhat-cloud-services/frontend-components-notifications":"^3.2.12","@redhat-cloud-services/frontend-components-utilities":"^3.3.5","@redhat-cloud-services/insights-common-typescript":"^4.12.3","@testing-library/dom":"^8.13.0","@types/jest":"^27.5.0","@types/node":"^17.0.31","@types/react":"^18.0.8","@types/react-dom":"^18.0.3","@unleash/proxy-client-react":"^3.0.0","axios":"^0.21.1","dayjs":"^1.11.7","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-react-hooks":"^4.6.0","formik":"^2.2.9","lodash":"^4.17.21","prettier":"^2.7.1","react":"^17.0.2","react-dom":"^17.0.2","react-json-view":"^1.21.3","react-jss":"^10.9.0","react-query":"^3.39.1","react-redux":"^8.0.1","react-router-dom":"^6.0.0","redux":"^4.2.0","typescript":"^4.6.4","yup":"^0.32.11"},"devDependencies":{"@babel/core":"^7.17.10","@babel/plugin-proposal-class-properties":"^7.16.7","@babel/plugin-proposal-object-rest-spread":"^7.17.3","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/plugin-transform-runtime":"^7.17.10","@babel/preset-env":"^7.17.10","@babel/preset-react":"^7.16.7","@babel/preset-typescript":"^7.16.7","@testing-library/dom":"^8.13.0","@testing-library/jest-dom":"^5.16.4","@testing-library/react":"^11.2.7","@testing-library/react-hooks":"^7.0.0","@testing-library/user-event":"14.1.1","@types/jest":"^27.5.0","@types/lodash":"^4.14.182","@types/react-router-dom":"^5.3.3","@typescript-eslint/eslint-plugin":"^5.29.0","@typescript-eslint/parser":"^5.29.0","babel-jest":"^28.0.3","babel-plugin-transform-imports":"^2.0.0","eslint":"^7.0.0","eslint-plugin-react":"^7.30.0","identity-obj-proxy":"^3.0.0","insights-common-typescript-dev":"^0.1.21","jest":"^28.0.3","jest-environment-jsdom":"^28.0.3","npm-run-all":"^4.1.5","ts-jest":"^28.0.1","webpack-bundle-analyzer":"^4.5.0"},"insights":{"appname":"content-sources","buildrepo":"git@github.com:RedHatInsights/content-sources-frontend-build.git"}}')},62307:e=>{e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Time-out","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","511":"Network Authentication Required"}')}}]);
//# sourceMappingURL=../sourcemaps/236.aff689478b6d214f5d4e3a4ec846ce1b.js.map