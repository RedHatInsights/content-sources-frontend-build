(self.webpackChunkcontentSources=self.webpackChunkcontentSources||[]).push([[8178,5467],{40991:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893);a(58805),a(35705);const n=i(a(96533)),r=i(a(28)),o=a(89926),l=a(54662),d=a(9317);t.default=function(){const{rbac:e,isFetchingFeatures:t}=(0,o.useAppContext)();switch(!0){case!e||t:return(0,s.jsx)(d.Bullseye,{children:(0,s.jsx)(d.Spinner,{size:"xl"})});case e?.read:return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{}),(0,s.jsx)(r.default,{})]});default:return(0,s.jsx)(l.NoPermissionsPage,{})}}},99138:function(e,t,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a);var s=Object.getOwnPropertyDescriptor(t,a);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,i,s)}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&i(t,e,a);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(85893),l=n(a(28416)),d=a(88767),c=a(86706),u=r(a(40991)),p=a(89926),h=a(34581),m=new d.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});t.default=function({logger:e}){const t=l.default.useMemo((()=>((0,h.restoreStore)(),e?(0,h.createStore)(e).store:(0,h.createStore)().store)),[e]);return(0,l.useEffect)((()=>{insights?.chrome?.appAction?.("view-list-page")}),[]),(0,o.jsx)(c.Provider,{store:t,children:(0,o.jsx)(d.QueryClientProvider,{client:m,children:(0,o.jsx)(p.ContextProvider,{children:(0,o.jsx)(u.default,{})})})})}},19203:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(44439),s=a(28416);t.default=function(e,t){const[a,n]=(0,s.useState)(e);return(0,s.useEffect)((()=>{if(!(0,i.isEqual)(e,a)){const a=setTimeout((()=>n(e)),t||500);return()=>{clearTimeout(a)}}}),[e,t]),a}},33614:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(44439),s=a(28416);function n(e){const t=(0,s.useRef)();return(0,i.isEqual)(e,t.current)||(t.current=e),t.current}t.default=function(e,t){(0,s.useEffect)(e,t.map(n))}},2430:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(9317),n=i(a(64006));t.default=function(){const{notify:e}=(0,n.default)();return(t,a,i)=>{let n=t,r=a;switch(typeof i?.response?.data){case"string":r=i.response.data;break;case"object":i?.response?.data.errors?.find((({title:e,detail:t,description:a})=>{if(e&&(n=e),a&&(r=a),t&&(r=t),e||a||t)return!0}))}e({variant:s.AlertVariant.danger,title:n,description:r})}}},64006:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(83215),s=a(86706);t.default=function(){const e=(0,s.useDispatch)();return{notify:t=>e((0,i.addNotification)(t))}}},7714:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(28416),s=a(34046);t.default=function(){const{pathname:e}=(0,s.useLocation)();return(0,i.useMemo)((()=>e.split("content")[0]+"content"),[e.split("content")[0]])}},54619:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=void 0;const s=a(85893),n=a(9317),r=a(87696),o=a(83634),l=a(28416),d=a(42060),c=a(49923),u=i(a(56654)),p=i(a(71874)),h=i(a(75475)),m=i(a(27484)),f=i(a(92370)),g=a(77747),x=a(34046),_=(0,d.createUseStyles)({mainContainer:{backgroundColor:o.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},mainContainer100Height:{composes:["$mainContainer"],minHeight:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0}});t.formatDate=e=>(0,m.default)(e).format("DD MMM YYYY HH:mm UTCZ");const j="adminTaskPerPage";t.default=()=>{const e=_(),a=(0,x.useNavigate)(),i=Number(localStorage.getItem(j))||20,[o,d]=(0,l.useState)(1),[m,v]=(0,l.useState)(i),[y,b]=(0,l.useState)(3),[I,S]=(0,l.useState)("desc"),[C,T]=(0,l.useState)({accountId:"",orgId:"",statuses:[]}),P=()=>T({statuses:[],accountId:"",orgId:""}),k=0===C.statuses.length&&""===C.accountId&&""===C.orgId,E=["org_id","account_id","typename","queued_at","started_at","finished_at","status"],D=(0,l.useMemo)((()=>E[y]+":"+I),[y,I]),{isLoading:A,error:O,isError:w,isFetching:R,data:F={data:[],meta:{count:0,limit:20,offset:0}}}=(0,g.useAdminTaskListQuery)(o,m,C,D),N=R,L=(e,t)=>d(t),M=(e,t,a)=>{localStorage.setItem(j,t.toString()),v(t),d(a)},U=["Org ID","Account ID","Type","Queued At","Status"];if(w)throw O;const{data:K=[],meta:{count:V=0}}=F,B="tasks",G="Certain actions, such as repository introspection, will start a task",Q=0===V;return Q&&k&&!A?(0,s.jsx)(n.Bullseye,{"data-ouia-safe":!N,"data-ouia-component-id":"admin_task_list_page",children:(0,s.jsx)(p.default,{notFiltered:k,clearFilters:P,itemName:B,notFilteredBody:G})}):(0,s.jsxs)(n.Grid,{"data-ouia-safe":!N,"data-ouia-component-id":"admin_task_list_page",className:Q?e.mainContainer100Height:e.mainContainer,children:[(0,s.jsx)(x.Outlet,{}),(0,s.jsxs)(n.Flex,{className:e.topContainer,children:[(0,s.jsx)(h.default,{isLoading:A,setFilterData:e=>{T(e),d(1)},filterData:C}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(u.default,{hide:Q,children:(0,s.jsx)(n.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",isDisabled:A,itemCount:V,perPage:m,page:o,onSetPage:L,isCompact:!0,onPerPageSelect:M})})})]}),(0,s.jsx)(u.default,{hide:!A,children:(0,s.jsx)(n.Grid,{className:e.mainContainer,children:(0,s.jsx)(c.SkeletonTable,{rows:m,numberOfColumns:U.length,variant:r.TableVariant.compact})})}),(0,s.jsx)(u.default,{hide:Q||A,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.Table,{"aria-label":"Admin tasks table",ouiaId:"admin_tasks_table",variant:"compact",children:[(0,s.jsx)(r.Thead,{children:(0,s.jsxs)(r.Tr,{children:[U.map(((e,t)=>{return(0,s.jsx)(r.Th,{sort:(a=t,{sortBy:{index:y,direction:I,defaultDirection:"asc"},onSort:(e,t,a)=>{b(t),S(a)},columnIndex:a}),children:e},e+"column");var a})),(0,s.jsx)(r.Th,{children:(0,s.jsx)(n.Spinner,{size:"md",className:N?"":e.invisible})})]})}),(0,s.jsx)(r.Tbody,{children:K.map(((e,i)=>(0,s.jsxs)(r.Tr,{children:[(0,s.jsx)(r.Td,{children:e.org_id}),(0,s.jsx)(r.Td,{children:e.account_id?e.account_id:"Unknown"}),(0,s.jsx)(r.Td,{children:e.typename}),(0,s.jsx)(r.Td,{children:(0,t.formatDate)(e.queued_at)}),(0,s.jsx)(r.Td,{children:(0,s.jsx)(f.default,{status:e.status})}),(0,s.jsx)(r.Td,{width:10,children:(0,s.jsx)(n.Button,{onClick:()=>a(e.uuid),variant:"secondary",ouiaId:"view_task_details",children:"View Details"})})]},e.uuid+i+"")))})]}),(0,s.jsxs)(n.Flex,{className:e.bottomContainer,children:[(0,s.jsx)(n.FlexItem,{}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(n.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",itemCount:V,perPage:m,page:o,onSetPage:L,variant:n.PaginationVariant.bottom,onPerPageSelect:M})})]})]})}),(0,s.jsx)(u.default,{hide:!Q||A,children:(0,s.jsx)(p.default,{notFiltered:k,clearFilters:P,itemName:B,notFilteredBody:G})})]})}},75475:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(28416),r=a(9317),o=a(55026),l=i(a(11269)),d=a(36962),c=a(83634),u=i(a(56654)),p=i(a(19203)),h=(0,a(42060).createUseStyles)({chipsContainer:{backgroundColor:c.global_BackgroundColor_100.value,paddingTop:"16px"},clearFilters:{marginLeft:"16px"}}),m=["Running","Failed","Completed","Canceled","Pending"],f=["Account ID","Org ID","Status"];t.default=({isLoading:e,setFilterData:t,filterData:a})=>{const i=h(),[c,g]=(0,n.useState)("Account ID"),[x,_]=(0,n.useState)(""),[j,v]=(0,n.useState)(""),[y,b]=(0,n.useState)([]),I=()=>{_(""),v(""),b([]),t({accountId:"",orgId:"",statuses:[]})};(0,n.useEffect)((()=>{""!==a.accountId||""!==a.orgId||0!==a.statuses.length||""===x&&""===j&&0===y.length||I()}),[a]);const{accountId:S,orgId:C,selectedStatuses:T}=(0,p.default)({accountId:x,orgId:j,selectedStatuses:y});(0,n.useEffect)((()=>{t({accountId:S,orgId:C,statuses:T})}),[S,C,T]);const P=(0,n.useMemo)((()=>{switch(c){case"Account ID":return(0,s.jsxs)(r.InputGroupItem,{children:[(0,s.jsx)(r.TextInput,{type:"text",isDisabled:e,id:"account-id",ouiaId:"filter_account_id",placeholder:"Filter by account ID",value:x,onChange:(e,t)=>_(t)}),(0,s.jsx)(r.InputGroupText,{isDisabled:e,id:"search-icon",children:(0,s.jsx)(d.SearchIcon,{})})]});case"Org ID":return(0,s.jsxs)(r.InputGroupItem,{children:[(0,s.jsx)(r.TextInput,{isDisabled:e,id:"org-id",ouiaId:"filter_org_id",placeholder:"Filter by org ID",value:j,onChange:(e,t)=>v(t)}),(0,s.jsx)(r.InputGroupText,{id:"search-icon",children:(0,s.jsx)(d.SearchIcon,{})})]});case"Status":return(0,s.jsx)(l.default,{toggleAriaLabel:"filter status",toggleId:"statusSelect",ouiaId:"filter_status",isDisabled:e,options:m,variant:o.SelectVariant.checkbox,selectedProp:y,setSelected:b,placeholderText:"Filter by status"});default:return(0,s.jsx)(s.Fragment,{})}}),[c,e,x,j,y]);return(0,s.jsxs)(r.Flex,{children:[(0,s.jsx)(r.FlexItem,{children:(0,s.jsxs)(r.InputGroup,{children:[(0,s.jsx)(r.InputGroupItem,{children:(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(l.default,{toggleId:"filterSelectionDropdown",ouiaId:"filter_type",isDisabled:e,options:f,variant:o.SelectVariant.single,selectedProp:c,setSelected:g,placeholderText:"filter",toggleIcon:(0,s.jsx)(d.FilterIcon,{})})})}),(0,s.jsx)(r.InputGroupItem,{children:(0,s.jsx)(r.FlexItem,{children:P})})]})}),(0,s.jsx)(u.default,{hide:!(""!==x||""!==j||y.length),children:(0,s.jsxs)(r.FlexItem,{fullWidth:{default:"fullWidth"},className:i.chipsContainer,children:[(0,s.jsx)(r.ChipGroup,{categoryName:"Status",children:y.map((e=>(0,s.jsx)(r.Chip,{onClick:()=>{return t=e,a=y,void b([...a].filter((e=>e!==t)));var t,a},children:e},e)))}),""!==j&&(0,s.jsx)(r.ChipGroup,{categoryName:"Org ID",children:(0,s.jsx)(r.Chip,{onClick:()=>v(""),children:j},"org_id_chip")}),""!==x&&(0,s.jsx)(r.ChipGroup,{categoryName:"Account ID",children:(0,s.jsx)(r.Chip,{onClick:()=>_(""),children:x},"account_id_chip")}),(""!==S&&""!==x||""!==C&&""!==j||!!y?.length)&&(0,s.jsx)(r.Button,{className:i.clearFilters,onClick:I,variant:"link",isInline:!0,children:"Clear filters"})]})})]})}},92370:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(36962),r=a(9317),o=i(a(27002)),l=a(83634),d=a(42060),c=l.global_danger_color_100.value,u=l.global_success_color_100.value,p=l.global_warning_color_100.value,h=(0,d.createUseStyles)({spinner:{animationDuration:"6s !important",margin:"-3px 0"},red:{color:c,fill:c},green:{color:u,fill:u},gold:{color:p,fill:p}});t.default=({status:e})=>{const t=h();switch(e){case"running":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(r.Spinner,{size:"md",className:t.spinner})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(o.default,{color:"blue",children:"Running"})})]});case"failed":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(n.ExclamationCircleIcon,{className:t.red})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(o.default,{color:"red",children:"Failed"})})]});case"completed":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(n.CheckCircleIcon,{className:t.green})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(o.default,{color:"green",children:"Completed"})})]});case"canceled":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(n.BanIcon,{className:t.red})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(o.default,{color:"red",children:"Canceled"})})]});case"pending":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(n.ClockIcon,{className:t.gold})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(o.default,{color:"gold",children:"Pending"})})]});default:return(0,s.jsx)(s.Fragment,{})}}},96555:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=a(42060),o=a(28416),l=i(a(94693)),d=i(a(70733)),c=i(a(56654)),u=a(77747),p=a(34046),h=a(69997),m=i(a(7714)),f=(0,r.createUseStyles)({jsonView:{fontSize:"14px"}});t.default=()=>{const{taskUUID:e}=(0,p.useParams)(),t=f(),a=(0,p.useNavigate)(),i=(0,m.default)(),r=()=>a(`${i}/${h.ADMIN_TASKS_ROUTE}`),[g,x]=(0,o.useState)(0),_=(0,o.createRef)(),{isLoading:j,isFetching:v,data:y,isError:b}=(0,u.useFetchAdminTaskQuery)(e);(0,o.useEffect)((()=>{b&&r()}),[b]);const I=(0,o.useMemo)((()=>{const e=[];if(!y)return e;switch(y.payload&&e.push({title:"Payload",data:y.payload,contentRef:(0,o.createRef)()}),y.typename){case"snapshot":{const t=y.pulp;t&&(t.sync&&e.push({title:"Sync",data:t.sync,contentRef:(0,o.createRef)()}),t.distribution&&e.push({title:"Distribution",data:t.distribution,contentRef:(0,o.createRef)()}),t.publication&&e.push({title:"Publication",data:t.publication,contentRef:(0,o.createRef)()}));break}}return e}),[y?.uuid,v]),S=v&&!!y,C=j||!y;return(0,s.jsxs)(n.Modal,{position:"top",variant:n.ModalVariant.medium,ouiaId:"task_details",ouiaSafe:!S,"aria-label":"Task details",isOpen:!0,onClose:r,header:(0,s.jsx)(c.default,{hide:j,children:(0,s.jsx)(n.Tabs,{activeKey:g,onSelect:(e,t)=>{x(t)},"aria-label":"Task tabs",ouiaId:"task-tabs",children:[(0,s.jsx)(n.Tab,{title:(0,s.jsx)(n.TabTitleText,{children:"Task details"}),"aria-label":"Task details",ouiaId:"task-details",eventKey:0,tabContentRef:_},"taskDetails"),...I.map((({title:e,contentRef:t},a)=>(0,s.jsx)(n.Tab,{eventKey:e,"aria-label":e,ouiaId:e,tabContentRef:t,title:(0,s.jsx)(n.TabTitleText,{children:e})},e+a)))]})}),children:[(0,s.jsx)(c.default,{hide:!C,children:(0,s.jsx)(n.Bullseye,{children:(0,s.jsx)(n.Spinner,{})})}),(0,s.jsxs)(c.default,{hide:C,children:[(0,s.jsx)(n.TabContent,{"aria-label":"Task details",eventKey:0,id:"task-details",ref:_,children:(0,s.jsx)(l.default,{adminTask:y})}),I.map((({title:e,data:a,contentRef:i},r)=>(0,s.jsx)(n.TabContent,{eventKey:e,"aria-label":e,id:e,className:t.jsonView,ref:i,hidden:!0,children:(0,s.jsx)(d.default,{src:a,enableClipboard:!0,theme:"atom"})},r)))]})]})}},94693:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(54619);t.default=({adminTask:e})=>(0,i.jsxs)(s.DescriptionList,{children:[(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"UUID"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.uuid})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Account ID"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.account_id?e.account_id:"Unknown; repository configuration deleted"})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Org ID"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.org_id})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Type"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.typename})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Status"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.status})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Queued At"}),(0,i.jsx)(s.DescriptionListDescription,{children:(0,n.formatDate)(e.queued_at)})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Started At"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.started_at?(0,n.formatDate)(e.started_at):"Not started"})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Finished At"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.finished_at?(0,n.formatDate)(e.finished_at):"Not finished"})]}),(0,i.jsxs)(s.DescriptionListGroup,{children:[(0,i.jsx)(s.DescriptionListTerm,{children:"Error"}),(0,i.jsx)(s.DescriptionListDescription,{children:e.error?e.error:"None"})]})]})},33e3:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useContentListOutletContext=void 0;const s=a(85893),n=a(9317),r=a(87696),o=a(83634),l=a(28416),d=a(42060),c=a(49923),u=a(85802),p=i(a(11956)),h=i(a(56654)),m=i(a(71874)),f=a(88767),g=i(a(87739)),x=i(a(55673)),_=i(a(29678)),j=a(89926),v=i(a(24619)),y=i(a(27484)),b=a(34046),I=(0,d.createUseStyles)({mainContainer:{backgroundColor:o.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},mainContainer100Height:{composes:["$mainContainer"],minHeight:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0},checkboxMinWidth:{minWidth:"45px!important"}}),S="contentListPerPage";t.useContentListOutletContext=()=>(0,b.useOutletContext)(),t.default=()=>{const e=I(),t=(0,f.useQueryClient)(),a=(0,b.useNavigate)(),{rbac:i,features:o}=(0,j.useAppContext)(),d=Number(localStorage.getItem(S))||20,[C,T]=(0,l.useState)(1),[P,k]=(0,l.useState)(d),[E,D]=(0,l.useState)(0),[A,O]=(0,l.useState)("asc"),[w,R]=(0,l.useState)(new Set),[F,N]=(0,l.useState)({searchQuery:"",versions:[],arches:[],statuses:[]}),L=()=>N({searchQuery:"",versions:[],arches:[],statuses:[]}),M=!F.arches?.length&&""===F.searchQuery&&!F.versions?.length&&!F.statuses?.length,{isLoading:U,error:K,isError:V,data:{distribution_versions:B,distribution_arches:G}={distribution_versions:[],distribution_arches:[]}}=(0,u.useRepositoryParams)(),Q=["name","distribution_arch","distribution_versions","package_count","last_introspection_time","status"],Y=()=>Q[E]+":"+A,{isLoading:q,error:$,isError:z,isFetching:H,data:W={data:[],meta:{count:0,limit:20,offset:0}}}=(0,u.useContentListQuery)(C,P,F,Y()),{mutateAsync:Z,isLoading:X}=(0,u.useDeleteContentItemMutate)(t,C,P,F,Y()),{mutateAsync:J,isLoading:ee}=(0,u.useIntrospectRepositoryMutate)(t,C,P,F,Y()),te=e=>J({uuid:e,reset_count:!0}),{mutateAsync:ae,isLoading:ie}=(0,u.useBulkDeleteContentItemMutate)(t,w,C,P,F,Y()),se=X||H||U||ee||ie,ne=(e,t)=>T(t),re=(e,t,a)=>{localStorage.setItem(S,t.toString()),k(t),T(a)},oe=["Name","Architecture","Versions","Packages","Last Introspection","Status"];if(z)throw $;if(V)throw K;const{data:le=[],meta:{count:de=0}}=W,ce=(0,l.useCallback)((e=>[{isDisabled:se,title:"Edit",onClick:()=>{a(`edit-repository?repoUUIDS=${e.uuid}`)}},...o?.snapshots?.accessible?[{isDisabled:se||!e.snapshot||!(e.snapshot&&e.last_snapshot_uuid),title:e.snapshot&&e.last_snapshot_uuid?"View all snapshots":"No snapshots yet",onClick:()=>{a(`${e.uuid}/snapshots`)}}]:[],{isDisabled:se||"Retrying"==e?.status,title:"Introspect Now",onClick:()=>te(e?.uuid).then(ue)},{isSeparator:!0},{title:"Delete",onClick:()=>Z(e?.uuid).then((()=>{ue(),C>1&&de/P+1>=C&&(de-1)%P==0&&T(C-1)}))}]),[se,w]),ue=()=>R(new Set),pe=e=>"Pending"!==e.status,he=(0,l.useMemo)((()=>w.size>=1),[w]),me=(0,l.useMemo)((()=>W.data.every((e=>!pe(e)))),[W]),fe=(0,l.useMemo)((()=>{let e=!1;return W.data.every((t=>(w.has(t.uuid)&&(e=!0),!pe(t)||w.has(t.uuid))))&&e}),[W,w]),ge="custom repositories",xe="To get started, create a custom repository",_e=0===de,je=_e&&M&&!q;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Outlet,{context:{clearCheckedRepositories:ue}}),je?(0,s.jsx)(n.Bullseye,{"data-ouia-safe":!se,"data-ouia-component-id":"content_list_page",children:(0,s.jsx)(m.default,{notFiltered:M,clearFilters:L,itemName:ge,notFilteredBody:xe,notFilteredButton:(0,s.jsx)(v.default,{content:"You do not have the required permissions to perform this action.",show:!i?.write,setDisabled:!0,children:(0,s.jsx)(n.Button,{id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:q,onClick:()=>a("add-repository"),children:"Add repositories"})})})}):(0,s.jsxs)(n.Grid,{"data-ouia-safe":!se,"data-ouia-component-id":"content_list_page",className:_e?e.mainContainer100Height:e.mainContainer,children:[(0,s.jsxs)(n.Flex,{className:e.topContainer,children:[(0,s.jsx)(p.default,{isLoading:q,setFilterData:e=>{N(e),T(1)},filterData:F,atLeastOneRepoChecked:he,numberOfReposChecked:w.size,deleteCheckedRepos:()=>ae(w).then((()=>{const e=Math.ceil((de-w.size)/P);C>1&&e<C&&T(e),ue()}))}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(h.default,{hide:_e,children:(0,s.jsx)(n.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",isDisabled:q,itemCount:de,perPage:P,page:C,onSetPage:ne,isCompact:!0,onPerPageSelect:re})})})]}),(0,s.jsx)(h.default,{hide:!q,children:(0,s.jsx)(n.Grid,{className:e.mainContainer,children:(0,s.jsx)(c.SkeletonTable,{rows:P,numberOfColumns:oe.length,variant:r.TableVariant.compact})})}),(0,s.jsx)(h.default,{hide:_e||q,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.Table,{"aria-label":"Custom repositories table",ouiaId:"custom_repositories_table",variant:"compact",children:[(0,s.jsx)(r.Thead,{children:(0,s.jsxs)(r.Tr,{children:[(0,s.jsx)(h.default,{hide:!i?.write,children:(0,s.jsx)(r.Th,{className:e.checkboxMinWidth,select:{onSelect:(e,t)=>{if(t){const e=new Set(w);W.data.filter((e=>pe(e))).forEach((t=>e.add(t.uuid))),R(e)}else{const e=new Set(w);for(const t of W.data)e.delete(t.uuid);R(e)}},isSelected:fe,isHeaderSelectDisabled:me}})}),oe.map(((e,t)=>{return(0,s.jsx)(r.Th,{sort:(a=t,{sortBy:{index:E,direction:A,defaultDirection:"asc"},onSort:(e,t,a)=>{D(t),O(a)},columnIndex:a}),children:e},e+"column");var a})),(0,s.jsx)(r.Th,{children:(0,s.jsx)(n.Spinner,{size:"md",className:se?"":e.invisible})})]})}),(0,s.jsx)(r.Tbody,{children:le.map(((e,t)=>{const{uuid:a,name:n,url:o,distribution_arch:l,distribution_versions:d,last_introspection_time:c}=e;return(0,s.jsxs)(r.Tr,{children:[(0,s.jsx)(h.default,{hide:!i?.write,children:(0,s.jsx)(r.Td,{select:{rowIndex:t,onSelect:(t,a)=>((e,t)=>{const a=new Set(w);t?a.add(e):a.delete(e),R(a)})(e.uuid,a),isSelected:w.has(e.uuid),isDisabled:!pe(e)}})}),(0,s.jsxs)(r.Td,{children:[n,(0,s.jsx)("br",{}),(0,s.jsx)(x.default,{href:o})]}),(0,s.jsx)(r.Td,{children:(m=l,G.find((({label:e})=>m===e))?.name)}),(0,s.jsx)(r.Td,{children:(p=d,B.filter((({label:e})=>p?.includes(e))).map((({name:e})=>e)).join(", "))}),(0,s.jsx)(r.Td,{children:(0,s.jsx)(_.default,{rowData:e})}),(0,s.jsx)(r.Td,{children:(u=c,""===u||void 0===u?"Never":(0,y.default)(u).fromNow())}),(0,s.jsx)(r.Td,{children:(0,s.jsx)(g.default,{rowData:e,retryHandler:te})}),(0,s.jsx)(r.Td,{isActionCell:!0,children:(0,s.jsx)(v.default,{content:"Pending"==e?.status?"Introspection is in progress":"You do not have the required permissions to perform this action.",show:!i?.write||"Pending"===e?.status,setDisabled:!0,children:(0,s.jsx)(r.ActionsColumn,{items:ce(e)})})})]},a);var u,p,m}))})]}),(0,s.jsxs)(n.Flex,{className:e.bottomContainer,children:[(0,s.jsx)(n.FlexItem,{}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(n.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",itemCount:de,perPage:P,page:C,onSetPage:ne,variant:n.PaginationVariant.bottom,onPerPageSelect:re})})]})]})}),(0,s.jsx)(h.default,{hide:!_e||q,children:(0,s.jsx)(m.default,{notFiltered:M,clearFilters:L,itemName:ge,notFilteredBody:xe,notFilteredButton:(0,s.jsx)(v.default,{content:"You do not have the required permissions to perform this action.",show:!i?.write,setDisabled:!0,children:(0,s.jsx)(n.Button,{id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:q,onClick:()=>a("add-repository"),children:"Add repositories"})})})})]})]})}},7933:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=a(55026),o=a(36962),l=a(87696),d=a(83634),c=a(76582),u=a(28416),p=a(42060),h=i(a(56654)),m=a(85386),f=i(a(64006)),g=i(a(40277)),x=a(85802),_=i(a(11269)),j=a(88767),v=i(a(24619)),y=a(44439),b=i(a(33614)),I=i(a(19203)),S=a(34046),C=a(33e3),T=i(a(7714)),P=a(89926),k=i(a(19548)),E=(0,p.createUseStyles)({description:{paddingTop:"12px",color:d.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:d.global_link_Color.value+"!important",padding:"8px 0!important"},"& svg":{fill:d.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"8px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},addRepositoryButton:{marginBottom:"24px"},saveButton:{marginRight:"36px",transition:"unset!important"},removeButton:{display:"flex!important",justifyContent:"flex-end"},singleContentCol:{padding:"8px 0px 0px !important"},gpgKeyInput:{"& .pf-v5-svg":{marginRight:"10px"}},gpgKeyFormGroup:{paddingBottom:"20px","& .pf-v5-c-radio":{width:"auto"}}}),D={name:!1,url:!1,gpgKey:!1};t.default=()=>{const e=(0,S.useNavigate)(),t=(0,T.default)(),[a,i]=(0,u.useState)(!1),[p,A]=(0,u.useState)([""]),{features:O}=(0,P.useAppContext)(),w=(0,u.useMemo)((()=>!!O?.snapshots?.enabled&&!!O?.snapshots?.accessible),[!!O?.snapshots?.enabled]),R=E(),F=(0,j.useQueryClient)(),N=(0,c.useFormik)({initialValues:[(0,m.getDefaultFormikValues)({snapshot:w})],validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,m.makeValidationSchema)(),initialTouched:[D],onSubmit:()=>{}}),{clearCheckedRepositories:L}=(0,C.useContentListOutletContext)(),M=(e,t)=>{i(!1);const a=[...p];a[e]=t,A(a)},{fetchGpgKey:U,isLoading:K}=(0,x.useFetchGpgKey)(),V=(0,I.default)(p,300),{distribution_arches:B=[],distribution_versions:G=[]}=F.getQueryData(x.REPOSITORY_PARAMS_KEY)||{};(0,u.useEffect)((()=>{(async e=>{const t=await Promise.all([...N.values].map((async(t,a)=>{const i=e[a];if((0,m.isValidURL)(i)){const e=await U(i);if(e!==i)return M(a,e),{...t,gpgKey:e,...""===t.gpgKey&&i?{metadataVerification:!!ae?.[a]?.url?.metadata_signature_present}:{}}}return{...t,gpgKey:i,...""===t.gpgKey&&i?{metadataVerification:!!ae?.[a]?.url?.metadata_signature_present}:{}}})));N.setValues(t)})(V)}),[V]);const{distributionArches:Q,distributionVersions:Y}=(0,u.useMemo)((()=>{const e={},t={};return B.forEach((({name:t,label:a})=>e[t]=a)),G.forEach((({name:e,label:a})=>t[e]=a)),{distributionArches:e,distributionVersions:t}}),[B,G]),q=()=>e(t),{mutateAsync:$,isLoading:z}=(0,x.useAddContentQuery)(F,(0,m.mapFormikToAPIValues)(N.values)),H=1===N.values.length,W=!N.values.some((({expanded:e})=>!e)),Z=(e,t,a)=>{i(!1);const s=[...N.values];s[e]={...s[e],...t},N.setValues(s).then(a)},X=(e,t)=>{const a=!!N.values[e]?.[t],i=!!N.errors[e]?.[t],s=N.touched[e]?.[t];switch(!0){case i&&s:return"error";case"gpgKey"===t:return"default";case a&&s:return"success";default:return"default"}},J=()=>{const e=N.touched?.length-1||0,{name:t,url:a}=N.touched[e]||{};if(!t&&!a){const t=[...N.touched];t[e]={...t[e],name:!0,url:!0},N.setTouched(t)}};let ee=(0,I.default)(N.values)||[];const{mutateAsync:te,data:ae,isLoading:ie}=(0,x.useValidateContentList)();(0,b.default)((()=>{ee.length!==N.values.length&&(ee=N.values);const e=[...N.touched];te(ee.map((({name:t,url:a,gpgKey:i,metadataVerification:s},n)=>(!e[n]?.name&&t&&(e[n]={...e[n],name:!0}),!e[n]?.url&&a&&(e[n]={...e[n],url:!0}),!e[n]?.gpgKey&&i&&(e[n]={...e[n],gpgKey:!0}),{name:t,url:a,gpg_key:i,metadata_verification:s})))).then((async t=>{const a=await N.validateForm(ee),s=(0,m.mapValidationData)(t,a);N.setErrors(s),i(!0),N.setTouched(e)}))}),[ee,ee.length]);const se=e=>{N.values[e]?.expanded?(Z(e,{...N.values[e],expanded:!1}),J()):Z(e,{...N.values[e],expanded:!0})},{notify:ne}=(0,f.default)(),re=K||z||ie||!a;return(0,s.jsx)(n.Modal,{position:"top",variant:n.ModalVariant.medium,title:"Add custom repositories",ouiaId:"add_custom_repository",ouiaSafe:!re,help:(0,s.jsx)(n.Popover,{headerContent:(0,s.jsx)("div",{children:"Add a custom repository"}),bodyContent:(0,s.jsx)("div",{children:"Use this form to enter the values for a new repository."}),children:(0,s.jsx)(n.Button,{variant:"plain","aria-label":"Help",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{})})}),description:(0,s.jsx)("p",{className:R.description,children:"Add by completing the form. Default values may be provided automatically."}),isOpen:!0,onClose:q,footer:(0,s.jsxs)(n.Stack,{children:[(0,s.jsx)(n.StackItem,{children:(0,s.jsx)(n.Button,{isDisabled:!N.isValid||N.values.length>19,className:R.addRepositoryButton,variant:"link",onClick:()=>{N.setTouched([...N.touched,D]),N.setValues([...N.values.map((e=>({...e,expanded:!1}))),(0,m.getDefaultFormikValues)({snapshot:w})]),i(!1)},icon:(0,s.jsx)(o.PlusCircleIcon,{}),ouiaId:"add_row",children:"Add another repository"})}),(0,s.jsxs)(n.StackItem,{children:[(0,s.jsx)(n.Button,{className:R.saveButton,ouiaId:"modal_save",variant:"primary",isLoading:re,isDisabled:!a||!N.isValid||re||N.values?.length!==ee?.length,onClick:()=>{$().then((()=>{q(),L()}))},children:"Save"},"confirm"),(0,s.jsx)(n.Button,{variant:"link",onClick:q,ouiaId:"modal_cancel",children:"Cancel"},"cancel")]})]}),children:(0,s.jsxs)(l.Table,{"aria-label":"Table for repo add modal",ouiaId:"add_modal_table",children:[(0,s.jsx)(h.default,{hide:H,children:(0,s.jsx)(l.Tbody,{isExpanded:W,children:(0,s.jsxs)(l.Tr,{onClick:()=>{N.setValues([...N.values.map((e=>({...e,expanded:!W})))]),J()},className:R.toggleAllRow,children:[(0,s.jsx)(l.Td,{className:R.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:W}}),(0,s.jsx)(l.Td,{dataLabel:"expand-collapse",children:W?"Collapse all":"Expand all"})]})})}),N.values.map((({expanded:e,name:t,url:a,arch:i,gpgKey:c,versions:u,gpgLoading:f,metadataVerification:x,snapshot:j},b)=>(0,s.jsxs)(l.Tbody,{isExpanded:H?void 0:e,children:[(0,s.jsx)(h.default,{hide:H,children:(0,s.jsxs)(l.Tr,{className:R.colHeader,children:[(0,s.jsx)(l.Td,{onClick:()=>se(b),className:R.toggleAction,isActionCell:!0,expand:{rowIndex:b,isExpanded:e}}),(0,s.jsx)(l.Td,{width:35,onClick:()=>se(b),dataLabel:t,children:t||"New content"}),(0,s.jsx)(l.Td,{onClick:()=>se(b),dataLabel:"validity",children:(0,s.jsx)(g.default,{touched:N.touched[b],errors:N.errors[b]})}),(0,s.jsx)(l.Td,{dataLabel:"removeButton",className:R.removeButton,children:(0,s.jsx)(h.default,{hide:1===N.values.length,children:(0,s.jsx)(n.Button,{onClick:()=>(e=>{const t=N.values;t.splice(e,1);const a=N.touched;a.splice(e,1);const i=N.errors;i.length&&i.splice(e,1),N.setTouched(a),N.setErrors(i),N.setValues(t)})(b),variant:"link",icon:(0,s.jsx)(o.MinusCircleIcon,{}),children:"Remove"})})})]})}),(0,s.jsx)(l.Tr,{isExpanded:H?void 0:e,children:(0,s.jsx)(l.Td,{colSpan:4,className:H?R.singleContentCol:R.mainContentCol,children:(0,s.jsxs)(n.Form,{children:[(0,s.jsx)(h.default,{hide:!w,children:(0,s.jsxs)(n.FormGroup,{fieldId:"snapshot",children:[(0,s.jsx)(n.Switch,{id:"snapshot-switch-"+b,hasCheckIcon:!0,label:"Snapshot creation enabled",labelOff:"Snapshot creation disabled",isChecked:j,onChange:()=>{Z(b,{snapshot:!j})}}),(0,s.jsx)(n.Tooltip,{content:"Automatically create daily snapshots of this repository.",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),(0,s.jsx)(h.default,{hide:j,children:(0,s.jsx)(n.FormAlert,{style:{paddingTop:"20px"},children:(0,s.jsx)(n.Alert,{variant:"warning",title:"Disabling snapshots might result in a higher risk of losing content or unintentionally modifying it irreversibly.",isInline:!0})})})]})}),(0,s.jsxs)(n.FormGroup,{label:"Name",isRequired:!0,fieldId:"namegroup",children:[(0,s.jsx)(n.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",ouiaId:"input_name",type:"text",validated:X(b,"name"),onChange:(e,t)=>{Z(b,{name:t})},value:t||"",placeholder:"Enter name"}),(0,s.jsx)(k.default,{hide:"default"===X(b,"name"),textValue:N.errors[b]?.name})]}),(0,s.jsxs)(n.FormGroup,{label:"URL",isRequired:!0,fieldId:"url",children:[(0,s.jsx)(n.TextInput,{isRequired:!0,type:"url",validated:X(b,"url"),onBlur:()=>(e=>{const t=N.values[e]?.url;if((0,m.isValidURL)(t)&&("any"===N.values[e]?.arch||"any"===N.values[e].versions[0])){const a="any"!==N.values[e]?.arch&&N.values[e]?.arch||B.find((({name:e,label:a})=>t.includes(e)||t.includes(a)))?.label||"any";let i=[];if(N.values[e]?.versions?.length&&"any"!==N.values[e].versions[0])i=N.values[e]?.versions;else{const e=G.find((({name:e,label:a})=>t.includes(e)||t.includes("/"+a)))?.label;e&&(i=[e]),(0,y.isEmpty)(i)&&(i=["any"])}if(N.values[e]?.arch!==a&&!(0,y.isEqual)(i,N.values[e]?.arch)){const t=[...N.values];t[e]={...t[e],arch:a,versions:i},N.setValues(t)}}})(b),onChange:(e,t)=>{a!==t&&Z(b,{url:t})},value:a||"",placeholder:"https://",id:"url",name:"url",label:"Url",ouiaId:"input_url"}),(0,s.jsx)(k.default,{hide:"default"===X(b,"url"),textValue:N.errors[b]?.url})]}),(0,s.jsx)(n.FormGroup,{label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,s.jsx)(n.Tooltip,{content:"Optional: Select value to restrict package architecture",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),fieldId:"arch",children:(0,s.jsx)(_.default,{ouiaId:"restrict_to_architecture",menuAppendTo:document.body,toggleId:"archSelection"+b,options:Object.keys(Q),variant:r.SelectVariant.single,selectedProp:Object.keys(Q).find((e=>i===Q[e])),setSelected:e=>Z(b,{arch:Q[e]})})}),(0,s.jsx)(n.FormGroup,{label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,s.jsx)(n.Tooltip,{content:"Optional: Select value to restrict package OS version",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),fieldId:"version",children:(0,s.jsx)(_.default,{ouiaId:"restrict_to_os_version",menuAppendTo:document.body,toggleId:"versionSelection"+b,options:Object.keys(Y),variant:r.SelectVariant.typeaheadMulti,selectedProp:Object.keys(Y).filter((e=>u?.includes(Y[e]))),placeholderText:u?.length?"":"Any version",setSelected:e=>((e,t)=>{let a=e.map((e=>Y[e]));0!==e.length&&"any"!==a[e.length-1]||(a=["any"]),a.length>1&&a.includes("any")&&(a=a.filter((e=>"any"!==e))),Z(t,{versions:a})})(e,b)})}),(0,s.jsxs)(n.FormGroup,{label:"GPG key",labelIcon:(0,s.jsx)(n.Tooltip,{content:"Optional: Add GPG Key file or URL",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),fieldId:"gpgKey",children:[(0,s.jsx)(n.FileUpload,{className:R.gpgKeyInput,validated:X(b,"gpgKey"),id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:p[b],isLoading:f,spellCheck:!1,onDataChange:(e,t)=>M(b,t),onTextChange:(e,t)=>M(b,t),onClearClick:()=>M(b,""),dropzoneProps:{maxSize:m.maxUploadSize,onDropRejected:e=>(0,m.failedFileUpload)(e,ne)},allowEditingUploadedText:!0,browseButtonText:"Upload"}),(0,s.jsx)(k.default,{hide:"default"===X(b,"gpgKey"),textValue:N.errors[b]?.gpgKey})]}),(0,s.jsx)(h.default,{hide:!c,children:(0,s.jsxs)(n.FormGroup,{fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0,className:R.gpgKeyFormGroup,children:[(0,s.jsx)(n.Radio,{id:"package-verification-only",name:"package-verification-only",label:"Package verification only",isChecked:!x,onChange:()=>Z(b,{metadataVerification:!1})}),(0,s.jsx)(v.default,{show:!1===ae?.[b]?.url?.metadata_signature_present,content:"This repository's metadata is not signed, metadata verification is not possible.",children:(0,s.jsx)(n.Radio,{id:"package-and-repository-verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:x,onChange:()=>Z(b,{metadataVerification:!0})})})]})})]})})})]},b)))]})})}},40277:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(83634),r=a(36962),o=a(42060),l=n.global_danger_color_100.value,d=n.global_success_color_100.value,c=(0,o.createUseStyles)({red:{color:l,fontWeight:"bold",fontSize:"14px"},green:{color:d,fontWeight:"bold",fontSize:"14px"}});t.default=({touched:e,errors:t,loading:a})=>{const n=c(),o=["name","url"].every((t=>e?.[t])),u=Object.values(t||{}).every((e=>!e)),p=Object.keys(e||{}).filter((t=>!!e?.[t])).some((e=>t?.[e]));switch(!0){case a:return(0,i.jsx)(s.Spinner,{size:"md"});case o&&u:return(0,i.jsxs)(s.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,i.jsx)(s.FlexItem,{spacer:{default:"spacerSm"},children:(0,i.jsx)(r.CheckCircleIcon,{color:d})}),(0,i.jsx)(s.FlexItem,{children:(0,i.jsx)("span",{className:n.green,children:"Valid"})})]});case p:return(0,i.jsxs)(s.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,i.jsx)(s.FlexItem,{spacer:{default:"spacerSm"},children:(0,i.jsx)(r.ExclamationCircleIcon,{color:l})}),(0,i.jsx)(s.FlexItem,{children:(0,i.jsx)("span",{className:n.red,children:"Invalid"})})]});default:return(0,i.jsx)(i.Fragment,{})}}},85386:function(e,t,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a);var s=Object.getOwnPropertyDescriptor(t,a);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,i,s)}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&i(t,e,a);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.failedFileUpload=t.maxUploadSize=t.makeValidationSchema=t.mapValidationData=t.mapFormikToAPIValues=t.isValidURL=t.REGEX_URL=t.getDefaultFormikValues=t.ErrorCode=void 0;const o=a(44439),l=n(a(87561)),d=r(a(62307)),c=a(9317);var u;!function(e){e.FileInvalidType="file-invalid-type",e.FileTooLarge="file-too-large",e.FileTooSmall="file-too-small",e.TooManyFiles="too-many-files"}(u||(t.ErrorCode=u={})),t.getDefaultFormikValues=(e={})=>({name:"",url:"",gpgKey:"",arch:"any",versions:["any"],gpgLoading:!1,expanded:!0,metadataVerification:!1,snapshot:!1,...e}),t.REGEX_URL=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,t.isValidURL=e=>{if(!e)return!1;const a=new RegExp(t.REGEX_URL);return e.match(a)},t.mapFormikToAPIValues=e=>e.map((({name:e,url:t,arch:a,versions:i,gpgKey:s,metadataVerification:n,snapshot:r})=>({name:e,url:t,distribution_arch:a,distribution_versions:i,gpg_key:s,snapshot:r,metadata_verification:n}))),t.mapValidationData=(e,t)=>{const a=(e=>e.map((({url:e,...t})=>({...t,url:{...e,error:e?.error||e?.metadata_present?e?.error:`Unable to retrieve YUM Metadata, Recieved HTTP ${e?.http_code}: ${e?d.default[e.http_code]:""}`}}))))(e),i=a.map((({name:e,url:a,gpg_key:i},s)=>{const n=a?.error||t[s]?.url;return{...e?.error?{name:e?.error}:{},...a?.error?{url:a?.error}:{},...!n&&i?.error?{gpgKey:i?.error}:{},...t[s]}}));return i.every((e=>(0,o.isEmpty)(e)))?[]:i},t.makeValidationSchema=()=>(l.addMethod(l.object,"uniqueProperty",(function(e,t){return this.test("unique",t,(function(t){if(!t||!t[e])return!0;if(this.parent.filter((e=>e!==t)).some((a=>a[e]===t[e])))throw this.createError({path:`${this.path}.${e}`});return!0}))})),l.array(l.object().shape({name:l.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),url:l.string().url("Invalid URL").required("Required")}).uniqueProperty("name","Names must be unique").uniqueProperty("url","Url's must be unique"))),t.maxUploadSize=32e3,t.failedFileUpload=(e,a)=>{let i="Check the file and try again.";1!=e.length?i="Only a single file upload is supported.":e[0].file.size>t.maxUploadSize&&(i="The file is larger than "+t.maxUploadSize+" bytes."),a({variant:c.AlertVariant.danger,title:"There was an problem uploading the file.",description:i})}},11956:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(28416),r=a(9317),o=a(55026),l=i(a(11269)),d=a(36962),c=a(83634),u=i(a(56654)),p=a(88767),h=a(85802),m=i(a(19203)),f=a(42060),g=a(44439),x=a(89926),_=i(a(24619)),j=a(34046),v=i(a(16286)),y=(0,f.createUseStyles)({chipsContainer:{backgroundColor:c.global_BackgroundColor_100.value,paddingTop:"16px"},clearFilters:{marginLeft:"16px"},repositoryActions:{display:"flex",flexDirection:"row"}}),b=["Invalid","Pending","Unavailable","Valid"];t.default=({isLoading:e,setFilterData:t,filterData:a,atLeastOneRepoChecked:i,numberOfReposChecked:c,deleteCheckedRepos:f})=>{const I=y(),{rbac:S}=(0,x.useAppContext)(),C=(0,p.useQueryClient)(),T=(0,j.useNavigate)(),[P,k]=(0,n.useState)("Name/URL"),[E,D]=(0,n.useState)({}),[A,O]=(0,n.useState)({}),[w,R]=(0,n.useState)(""),[F,N]=(0,n.useState)([]),[L,M]=(0,n.useState)([]),[U,K]=(0,n.useState)([]),{distribution_arches:V=[],distribution_versions:B=[]}=C.getQueryData(h.REPOSITORY_PARAMS_KEY)||{},G=()=>{R(""),N([]),M([]),K([]),t({searchQuery:"",versions:[],arches:[],statuses:[]})};(0,n.useEffect)((()=>{0!==a.arches.length||0!==a.versions.length||0!==a.statuses.length||""!==a.searchQuery||""===w&&0===L.length&&0===F.length&&0===U.length||G()}),[a]);const{searchQuery:Q,selectedVersions:Y,selectedArches:q,selectedStatuses:$}=(0,m.default)({searchQuery:w,selectedVersions:F,selectedArches:L,selectedStatuses:U}),z=(e,t)=>{const a="arch"===e?V:B,i=[];return t.forEach((e=>{const t=a.find((t=>t.name===e));t&&i.push(t.label)})),i};(0,n.useEffect)((()=>{t({searchQuery:Q,versions:z("version",Y),arches:z("arch",q),statuses:$})}),[Q,Y,q,$]);const H=(e,t,a)=>{a([...t].filter((t=>t!==e)))};(0,n.useEffect)((()=>{if((0,g.isEmpty)(E)&&(0,g.isEmpty)(A)&&0!==V.length&&0!==B.length){const e={},t={};V.forEach((t=>e[t.name]=t.label)),B.forEach((e=>t[e.name]=e.label)),D(t),O(e)}}),[V,B]);const W=(0,n.useMemo)((()=>{switch(P){case"Name/URL":return(0,s.jsxs)(r.InputGroupItem,{isFill:!0,children:[(0,s.jsx)(r.TextInput,{isDisabled:e,id:"search",ouiaId:"filter_search",placeholder:"Filter by name/url",value:w,onChange:(e,t)=>R(t)}),(0,s.jsx)(r.InputGroupText,{isDisabled:e,id:"search-icon",children:(0,s.jsx)(d.SearchIcon,{})})]});case"Version":return(0,s.jsx)(l.default,{toggleAriaLabel:"filter version",toggleId:"versionSelect",ouiaId:"filter_version",isDisabled:e,options:Object.keys(E),variant:o.SelectVariant.checkbox,selectedProp:F,setSelected:N,placeholderText:"Filter by version"});case"Architecture":return(0,s.jsx)(l.default,{toggleAriaLabel:"filter architecture",toggleId:"archSelect",ouiaId:"filter_arch",isDisabled:e,options:Object.keys(A),variant:o.SelectVariant.checkbox,selectedProp:L,setSelected:M,placeholderText:"Filter by architecture"});case"Status":return(0,s.jsx)(l.default,{toggleAriaLabel:"filter status",toggleId:"statusSelect",ouiaId:"filter_status",isDisabled:e,options:b,variant:o.SelectVariant.checkbox,selectedProp:U,setSelected:K,placeholderText:"Filter by status"});default:return(0,s.jsx)(s.Fragment,{})}}),[P,e,w,E,F,A,L,U]);return(0,s.jsxs)(r.Flex,{children:[(0,s.jsx)(r.FlexItem,{children:(0,s.jsxs)(r.InputGroup,{children:[(0,s.jsx)(r.InputGroupItem,{children:(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(l.default,{toggleId:"filterSelectionDropdown",ouiaId:"filter_type",isDisabled:e,options:["Name/URL","Version","Architecture","Status"],variant:o.SelectVariant.single,selectedProp:P,setSelected:k,placeholderText:"filter",toggleIcon:(0,s.jsx)(d.FilterIcon,{})})})}),(0,s.jsx)(r.InputGroupItem,{children:(0,s.jsx)(r.FlexItem,{children:W})})]})}),(0,s.jsxs)(r.FlexItem,{className:I.repositoryActions,children:[(0,s.jsx)(_.default,{content:"You do not have the required permissions to perform this action.",show:!S?.write,setDisabled:!0,children:(0,s.jsx)(r.Button,{id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:e,onClick:()=>T("add-repository"),children:"Add repositories"})}),(0,s.jsx)(_.default,{content:"You do not have the required permissions to perform this action.",show:!S?.write,setDisabled:!0,children:(0,s.jsx)(v.default,{atLeastOneRepoChecked:i,numberOfReposChecked:c,deleteCheckedRepos:f,toggleOuiaId:"custom_repositories_kebab_toggle"})})]}),(0,s.jsx)(u.default,{hide:!(F.length||L.length||U.length||""!=w),children:(0,s.jsxs)(r.FlexItem,{fullWidth:{default:"fullWidth"},className:I.chipsContainer,children:[(0,s.jsx)(r.ChipGroup,{categoryName:"Version",children:F.map((e=>(0,s.jsx)(r.Chip,{onClick:()=>H(e,F,N),children:e},e)))}),(0,s.jsx)(r.ChipGroup,{categoryName:"Architecture",children:L.map((e=>(0,s.jsx)(r.Chip,{onClick:()=>H(e,L,M),children:e},e)))}),(0,s.jsx)(r.ChipGroup,{categoryName:"Status",children:U.map((e=>(0,s.jsx)(r.Chip,{onClick:()=>H(e,U,K),children:e},e)))}),""!==w&&(0,s.jsx)(r.ChipGroup,{categoryName:"Name/URL",children:(0,s.jsx)(r.Chip,{onClick:()=>R(""),children:w},"search_chip")}),(""!==Q&&""!==w||!!F?.length||!!L?.length||!!U?.length)&&(0,s.jsx)(r.Button,{className:I.clearFilters,onClick:G,variant:"link",isInline:!0,children:"Clear filters"})]})})]})}},46502:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=a(55026),o=a(36962),l=a(87696),d=a(83634),c=a(76582),u=a(28416),p=a(42060),h=i(a(56654)),m=i(a(19203)),f=a(85802),g=i(a(11269)),x=a(88767),_=a(85386),j=i(a(40277)),v=a(65038),y=a(44439),b=i(a(24619)),I=i(a(64006)),S=i(a(33614)),C=a(89926),T=i(a(19548)),P=d.global_success_color_100.value,k=(0,p.createUseStyles)({description:{paddingTop:"12px",color:d.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:d.global_link_Color.value+"!important",padding:"12px 0!important"},"& svg":{fill:d.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"12px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},saveButton:{marginRight:"36px",transition:"unset!important"},singleContentCol:{padding:"8px 0px 0px !important"},gpgKeyInput:{"& .pf-v5-svg":{marginRight:"10px"}},gpgKeyFormGroup:{paddingBottom:"20px","& .pf-v5-c-radio":{width:"auto"}}});t.default=({setIsValid:e,values:t,setIsLoading:a,setUpdatedValues:i})=>{const p=(0,v.mapToDefaultFormikValues)(t),[E,D]=(0,u.useState)(!1),[A,O]=(0,u.useState)(p.map((({gpgKey:e})=>e))),w=k(),R=(0,x.useQueryClient)(),{features:F}=(0,C.useAppContext)(),N=(0,u.useMemo)((()=>!!F?.snapshots?.enabled&&!!F?.snapshots?.accessible),[!!F?.snapshots?.enabled]),L=(0,c.useFormik)({initialValues:p,validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,_.makeValidationSchema)(),initialTouched:t.map((()=>({name:!0,url:!0}))),onSubmit:()=>{}}),M=(e,t)=>{D(!1);const a=[...A];a[e]=t,O(a)},{fetchGpgKey:U,isLoading:K}=(0,f.useFetchGpgKey)(),V=(0,m.default)(A,300),{distribution_arches:B=[],distribution_versions:G=[]}=R.getQueryData(f.REPOSITORY_PARAMS_KEY)||{};(0,u.useEffect)((()=>{(async e=>{const t=await Promise.all([...L.values].map((async(t,a)=>{const i=e[a];if((0,_.isValidURL)(i)){const e=await U(i);if(e!==i)return M(a,e),{...t,gpgKey:e,...""===t.gpgKey&&i?{metadataVerification:!!X?.[a]?.url?.metadata_signature_present}:{}}}return{...t,gpgKey:i,...""===t.gpgKey&&i?{metadataVerification:!!X?.[a]?.url?.metadata_signature_present}:{}}})));L.setValues(t)})(V)}),[V]);const{distributionArches:Q,distributionVersions:Y}=(0,u.useMemo)((()=>{const e={},t={};return B.forEach((({name:t,label:a})=>e[t]=a)),G.forEach((({name:e,label:a})=>t[e]=a)),{distributionArches:e,distributionVersions:t}}),[B,G]),q=1===L.values.length,$=!L.values.some((({expanded:e})=>!e)),z=(e,t)=>{D(!1);const a=[...L.values];a[e]={...a[e],...t},L.setValues(a)},H=(e,t)=>{let a=(0,y.isEqual)(p[e]?.[t],L.values[e]?.[t]);switch("metadataVerification"===t&&(p[e].gpgKey||(a=!1)),!0){case!!L.errors[e]?.[t]:return"error";case a||!(0,y.isEmpty)(L.errors[e])||!E:return"default";case!a:return"success";default:return"default"}},W=(0,m.default)(L.values),{mutateAsync:Z,data:X,isLoading:J}=(0,f.useValidateContentList)();(0,S.default)((()=>{Z(W.map((({name:e,url:t,gpgKey:a,metadataVerification:i,uuid:s})=>({name:e,url:t,gpg_key:a,metadata_verification:i,uuid:s})))).then((async e=>{const t=await L.validateForm(W),a=(0,_.mapValidationData)(e,t);L.setErrors(a),D(!0)}))}),[W,t,open]);const ee=e=>{L.values[e]?.expanded?z(e,{...L.values[e],expanded:!1}):z(e,{...L.values[e],expanded:!0})},{notify:te}=(0,I.default)(),ae=K||J||!E;return(0,u.useEffect)((()=>{a(ae),e(L.isValid)}),[ae,L.isValid]),(0,u.useEffect)((()=>{i((0,v.mapFormikToEditAPIValues)(L.values))}),[L.values]),(0,s.jsxs)(l.Table,{"aria-label":"Table for edit modal",ouiaId:"edit_modal_table",children:[(0,s.jsx)(h.default,{hide:q,children:(0,s.jsx)(l.Tbody,{isExpanded:$,children:(0,s.jsxs)(l.Tr,{onClick:()=>{L.setValues([...L.values.map((e=>({...e,expanded:!$})))])},className:w.toggleAllRow,children:[(0,s.jsx)(l.Td,{className:w.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:$}}),(0,s.jsx)(l.Td,{dataLabel:"expand-collapse",children:$?"Collapse all":"Expand all"})]})})}),L.values.map((({expanded:e,name:t,url:a,arch:i,gpgKey:c,versions:u,gpgLoading:p,metadataVerification:m,snapshot:f},x)=>(0,s.jsxs)(l.Tbody,{isExpanded:q?void 0:e,children:[(0,s.jsx)(h.default,{hide:q,children:(0,s.jsxs)(l.Tr,{className:w.colHeader,children:[(0,s.jsx)(l.Td,{onClick:()=>ee(x),className:w.toggleAction,isActionCell:!0,expand:{rowIndex:x,isExpanded:e}}),(0,s.jsx)(l.Td,{width:35,onClick:()=>ee(x),dataLabel:t,children:t||"New content"}),(0,s.jsx)(l.Td,{onClick:()=>ee(x),dataLabel:"validity",children:(0,s.jsx)(j.default,{touched:L.touched[x],errors:L.errors[x]})})]})}),(0,s.jsx)(l.Tr,{isExpanded:q?void 0:e,children:(0,s.jsx)(l.Td,{colSpan:4,className:q?w.singleContentCol:w.mainContentCol,children:(0,s.jsxs)(n.Form,{children:[(0,s.jsx)(h.default,{hide:!N,children:(0,s.jsxs)(n.FormGroup,{fieldId:"snapshot",children:[(0,s.jsx)(n.Switch,{id:"snapshot-switch",hasCheckIcon:!0,label:"Snapshot creation enabled",labelOff:"Snapshot creation disabled",isChecked:f,onChange:()=>{z(x,{snapshot:!f})}}),(0,s.jsx)(n.Tooltip,{content:"Automatically create daily snapshots of this repository.",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),(0,s.jsx)(h.default,{hide:f,children:(0,s.jsx)(n.Alert,{variant:"warning",style:{paddingTop:"10px"},title:"Disabling snapshots may result in a higher risk of losing content or unintentionally modifying it irreversibly.",isInline:!0,isPlain:!0})})]})}),(0,s.jsxs)(n.FormGroup,{label:"Name",isRequired:!0,fieldId:"namegroup",children:[(0,s.jsx)(n.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",ouiaId:"input_name",type:"text",validated:H(x,"name"),onChange:(e,t)=>{z(x,{name:t})},value:t||"",placeholder:"Enter name"}),(0,s.jsx)(T.default,{hide:"default"===H(x,"name"),textValue:L.errors[x]?.name})]}),(0,s.jsxs)(n.FormGroup,{label:"URL",isRequired:!0,fieldId:"url",children:[(0,s.jsx)(n.TextInput,{isRequired:!0,type:"url",validated:H(x,"url"),onBlur:()=>(e=>{(e=>{const t=L.values[e]?.url;if((0,_.isValidURL)(t)&&("any"===L.values[e]?.arch||"any"===L.values[e].versions[0])){const a="any"!==L.values[e]?.arch&&L.values[e]?.arch||B.find((({name:e,label:a})=>t.includes(e)||t.includes(a)))?.label||"any";let i=[];if(L.values[e]?.versions?.length&&"any"!==L.values[e].versions[0])i=L.values[e]?.versions;else{const e=G.find((({name:e,label:a})=>t.includes(e)||t.includes("/"+a)))?.label;e&&(i=[e]),(0,y.isEmpty)(i)&&(i=["any"])}if(L.values[e]?.arch!==a&&!(0,y.isEqual)(i,L.values[e]?.arch)){const t=[...L.values];t[e]={...t[e],arch:a,versions:i},L.setValues(t)}}})(e)})(x),onChange:(e,t)=>{a!==t&&z(x,{url:t})},value:a||"",placeholder:"https://",id:"url",name:"url",label:"Url",ouiaId:"input_url"}),(0,s.jsx)(T.default,{hide:"default"===H(x,"url"),textValue:L.errors[x]?.url})]}),(0,s.jsx)(n.FormGroup,{label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,s.jsx)(n.Tooltip,{content:"Optional: Select value to restrict package architecture",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),fieldId:"arch",children:(0,s.jsx)(g.default,{ouiaId:"restrict_to_architecture",validated:H(x,"arch"),menuAppendTo:document.body,toggleId:"archSelection"+x,options:Object.keys(Q),variant:r.SelectVariant.single,selectedProp:Object.keys(Q).find((e=>i===Q[e])),setSelected:e=>z(x,{arch:Q[e]})})}),(0,s.jsx)(n.FormGroup,{label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,s.jsx)(n.Tooltip,{content:"Optional: Select value to restrict package OS version",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),fieldId:"version",children:(0,s.jsx)(g.default,{ouiaId:"restrict_to_os_version",validated:H(x,"versions"),menuAppendTo:document.body,toggleId:"versionSelection"+x,options:Object.keys(Y),variant:r.SelectVariant.typeaheadMulti,selectedProp:Object.keys(Y).filter((e=>u?.includes(Y[e]))),placeholderText:u?.length?"":"Any version",setSelected:e=>((e,t)=>{let a=e.map((e=>Y[e]));0!==e.length&&"any"!==a[e.length-1]||(a=["any"]),a.length>1&&a.includes("any")&&(a=a.filter((e=>"any"!==e))),z(t,{versions:a})})(e,x)})}),(0,s.jsxs)(n.FormGroup,{label:"GPG key",labelIcon:(0,s.jsx)(n.Tooltip,{content:"Optional: Add GPG Key file or URL",children:(0,s.jsx)(o.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:d.global_Color_200.value})}),fieldId:"gpgKey",children:[(0,s.jsx)(n.FileUpload,{className:w.gpgKeyInput,validated:H(x,"gpgKey"),id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:A[x],isLoading:p,spellCheck:!1,onDataChange:(e,t)=>M(x,t),onTextChange:(e,t)=>M(x,t),onClearClick:()=>M(x,""),dropzoneProps:{maxSize:_.maxUploadSize,onDropRejected:e=>(0,_.failedFileUpload)(e,te)},allowEditingUploadedText:!0,browseButtonText:"Upload"}),(0,s.jsx)(T.default,{hide:"default"===H(x,"gpgKey"),textValue:L.errors[x]?.gpgKey})]}),(0,s.jsx)(h.default,{hide:!c,children:(0,s.jsxs)(n.FormGroup,{fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0,className:w.gpgKeyFormGroup,children:[(0,s.jsx)(n.Radio,{id:"package verification only",name:"package-verification-only",label:"Package verification only",isChecked:!m,onChange:()=>z(x,{metadataVerification:!1})}),(0,s.jsx)(b.default,{show:!1===X?.[x]?.url?.metadata_signature_present,content:"This repository's metadata is not signed, metadata verification is not possible.",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Radio,{id:"Package and metadata verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:m,onChange:()=>z(x,{metadataVerification:!0})}),(0,s.jsx)(h.default,{hide:"success"!==H(x,"metadataVerification"),children:(0,s.jsx)(o.CheckCircleIcon,{style:{marginLeft:"10px"},color:P})})]})})]})})]})})})]},x)))]})}},14580:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=a(36962),o=a(83634),l=a(28416),d=a(42060),c=i(a(56654)),u=a(85802),p=a(88767),h=a(34046),m=i(a(46502)),f=a(44439),g=a(65038),x=a(33e3),_=i(a(7714)),j=(0,d.createUseStyles)({description:{paddingTop:"12px",color:o.global_Color_200.value},saveButton:{marginRight:"36px",transition:"unset!important"}});t.default=()=>{const e=j(),t=(0,h.useNavigate)(),a=(0,_.default)(),i=(0,p.useQueryClient)(),{search:o}=(0,h.useLocation)(),[d,v]=(0,l.useState)(!0),[y,b]=(0,l.useState)([]),[I,S]=(0,l.useState)(!1),[C,T]=(0,l.useState)(!1),{clearCheckedRepositories:P}=(0,x.useContentListOutletContext)(),k=new URLSearchParams(o).get("repoUUIDS")?.split(",")||[],{mutateAsync:E,isLoading:D}=(0,u.useEditContentQuery)(i,y),A=()=>t(a),{data:O,isError:w}=(0,u.useFetchContent)(k),R=O?[O]:[];(0,l.useEffect)((()=>{O&&b(R),w&&A()}),[w,!!O]),(0,l.useEffect)((()=>{R.length&&v(!1)}),[R]);const F=!(0,f.isEqual)((0,g.mapToContentItemsToEditContentRequest)(R),y),N=D||I||d;return(0,s.jsxs)(n.Modal,{position:"top",variant:n.ModalVariant.medium,title:"Edit custom repository",ouiaId:"edit_custom_repository",ouiaSafe:!N,help:(0,s.jsx)(n.Popover,{headerContent:(0,s.jsx)("div",{children:"Edit custom repository"}),bodyContent:(0,s.jsx)("div",{children:"Use this form to edit the values of an existing repository."}),children:(0,s.jsx)(n.Button,{variant:"plain","aria-label":"Help",children:(0,s.jsx)(r.OutlinedQuestionCircleIcon,{})})}),description:(0,s.jsx)("p",{className:e.description,children:"Edit by completing the form. Default values may be provided automatically."}),isOpen:!0,onClose:A,footer:(0,s.jsx)(n.Stack,{children:(0,s.jsxs)(n.StackItem,{children:[(0,s.jsx)(n.Button,{className:e.saveButton,ouiaId:"edit_modal_save",variant:"primary",isLoading:N,isDisabled:N||!F||!C,onClick:async()=>E().then((()=>{A(),P(),i.invalidateQueries(u.CONTENT_ITEM_KEY)})),children:F?"Save changes":"No changes"},"confirm"),(0,s.jsx)(n.Button,{variant:"link",onClick:A,ouiaId:"edit_modal_cancel",children:"Cancel"},"cancel")]})}),children:[(0,s.jsx)(c.default,{hide:!d,children:(0,s.jsx)(n.Bullseye,{children:(0,s.jsx)(n.Spinner,{})})}),(0,s.jsx)(c.default,{hide:d,children:(0,s.jsx)(m.default,{setIsValid:T,values:R,setIsLoading:S,setUpdatedValues:b})})]})}},65038:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapToContentItemsToEditContentRequest=t.mapToDefaultFormikValues=t.mapFormikToEditAPIValues=void 0,t.mapFormikToEditAPIValues=e=>e.map((({name:e,url:t,arch:a,versions:i,gpgKey:s,metadataVerification:n,uuid:r,snapshot:o})=>({uuid:r,name:e,url:t,distribution_arch:a,distribution_versions:i,gpg_key:s,metadata_verification:n,snapshot:o}))),t.mapToDefaultFormikValues=e=>e.map((({name:t,url:a,distribution_arch:i,distribution_versions:s,uuid:n,gpg_key:r,metadata_verification:o,snapshot:l},d)=>({name:t,url:a,arch:i,versions:s,gpgKey:r,gpgLoading:!1,metadataVerification:o,expanded:d+1===e.length,uuid:n,snapshot:l}))),t.mapToContentItemsToEditContentRequest=e=>(0,t.mapFormikToEditAPIValues)((0,t.mapToDefaultFormikValues)(e))},29678:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(42060),r=a(83634),o=a(34046),l=(0,n.createUseStyles)({text:{color:r.global_disabled_color_100.value,width:"fit-content"},link:{padding:0}});t.default=({rowData:e})=>{const t=l(),a=(0,o.useNavigate)();return e.package_count||"Pending"!==e.status?"Invalid"===e.status?(0,i.jsx)(s.Tooltip,{isContentLeftAligned:!0,content:"Repository is invalid.",children:(0,i.jsx)(s.Text,{className:t.text,children:"N/A"})}):(0,i.jsx)(s.Button,{ouiaId:"package_count_button",variant:"link",className:t.link,onClick:()=>a(`${e.uuid}/packages`),children:e.package_count}):(0,i.jsx)(s.Tooltip,{isContentLeftAligned:!0,content:"Introspection is in progress",children:(0,i.jsx)(s.Text,{className:t.text,children:"N/A"})})}},8300:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=a(87696),o=a(83634),l=a(28416),d=a(42060),c=a(49923),u=i(a(56654)),p=a(85802),h=a(36962),m=i(a(19203)),f=i(a(80076)),g=a(34046),x=i(a(7714)),_=(0,d.createUseStyles)({description:{paddingTop:"12px",paddingBottom:"8px",color:o.global_Color_200.value},mainContainer:{backgroundColor:o.global_BackgroundColor_100.value,display:"flex",flexDirection:"column",height:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"}}),j="packagePerPage";t.default=function(){const e=_(),{repoUUID:t}=(0,g.useParams)(),a=(0,x.default)(),i=(0,g.useNavigate)(),o=Number(localStorage.getItem(j))||20,[d,v]=(0,l.useState)(1),[y,b]=(0,l.useState)(o),[I,S]=(0,l.useState)(""),[C,T]=(0,l.useState)(0),[P,k]=(0,l.useState)("asc"),E=["Name","Version","Release","Arch"],D=["name","version","release","arch"],A=(0,l.useMemo)((()=>D[C]+":"+P),[C,P]),O=(0,m.default)(I);(0,l.useEffect)((()=>{v(1)}),[O,A]);const{isLoading:w,isFetching:R,isError:F,data:N={data:[],meta:{count:0,limit:20,offset:0}}}=(0,p.useGetPackagesQuery)(t,d,y,O,A);(0,l.useEffect)((()=>{F&&K()}),[F]);const L=(e,t)=>v(t),M=(e,t,a)=>{b(t),v(a),localStorage.setItem(j,t.toString())},U=(e,t)=>{if(!t)return{sortBy:{index:C,direction:P,defaultDirection:"asc"},onSort:(e,t,a)=>{T(t),k(a)},columnIndex:e}},K=()=>i(a),{data:V=[],meta:{count:B=0}}=N,G=R||w,Q=G||!B;return(0,s.jsx)(n.Modal,{position:"top",hasNoBodyWrapper:!0,"aria-label":"RPM package modal",ouiaId:"rpm_package_modal",ouiaSafe:G,variant:n.ModalVariant.medium,title:"Packages",description:(0,s.jsx)("p",{className:e.description,children:"View list of packages"}),isOpen:!0,onClose:K,footer:(0,s.jsx)(n.Button,{variant:"secondary",onClick:K,children:"Close"},"close"),children:(0,s.jsx)(r.InnerScrollContainer,{children:(0,s.jsxs)(n.Grid,{className:e.mainContainer,children:[(0,s.jsxs)(n.InputGroup,{className:e.topContainer,children:[(0,s.jsxs)(n.InputGroupItem,{children:[(0,s.jsx)(n.TextInput,{id:"search",ouiaId:"name_search",placeholder:"Filter by name",value:I,onChange:(e,t)=>S(t)}),(0,s.jsx)(n.InputGroupText,{id:"search-icon",children:(0,s.jsx)(h.SearchIcon,{})})]}),(0,s.jsx)(u.default,{hide:Q,children:(0,s.jsx)(n.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",itemCount:B,perPage:y,page:d,onSetPage:L,isCompact:!0,onPerPageSelect:M})})]}),(0,s.jsx)(u.default,{hide:!G,children:(0,s.jsx)(n.Grid,{className:e.mainContainer,children:(0,s.jsx)(c.SkeletonTable,{rows:y,numberOfColumns:E.length,variant:r.TableVariant.compact})})}),(0,s.jsx)(u.default,{hide:G,children:(0,s.jsxs)(r.Table,{"aria-label":"Custom repositories table",ouiaId:"packages_table",variant:"compact",children:[(0,s.jsx)(u.default,{hide:Q,children:(0,s.jsx)(r.Thead,{children:(0,s.jsx)(r.Tr,{children:E.map(((e,t)=>(0,s.jsx)(r.Th,{sort:U(t,Q),children:e},e+"_column")))})})}),(0,s.jsxs)(r.Tbody,{children:[V.map((({name:e,version:t,release:a,arch:i},n)=>(0,s.jsxs)(r.Tr,{children:[(0,s.jsx)(r.Td,{children:e}),(0,s.jsx)(r.Td,{children:t}),(0,s.jsx)(r.Td,{children:a}),(0,s.jsx)(r.Td,{children:i})]},e+n))),(0,s.jsx)(u.default,{hide:!Q,children:(0,s.jsx)(f.default,{clearSearch:()=>S("")})})]})]})}),(0,s.jsxs)(n.Flex,{className:e.bottomContainer,children:[(0,s.jsx)(n.FlexItem,{}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(u.default,{hide:Q,children:(0,s.jsx)(n.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",itemCount:B,perPage:y,page:d,onSetPage:L,variant:n.PaginationVariant.bottom,onPerPageSelect:M})})})]})]})})},t)}},80076:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(45718),r=a(87696),o=(0,a(42060).createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1,margin:"auto"}});t.default=function({clearSearch:e}){const t=o();return(0,i.jsx)(r.Tr,{children:(0,i.jsx)(r.Td,{colSpan:4,children:(0,i.jsx)(s.Bullseye,{children:(0,i.jsxs)(s.EmptyState,{variant:s.EmptyStateVariant.full,className:t.emptyStateContainer,children:[(0,i.jsx)(s.EmptyStateHeader,{titleText:"No packages match the search criteria",icon:(0,i.jsx)(s.EmptyStateIcon,{icon:n.SearchIcon}),headingLevel:"h2"}),(0,i.jsx)(s.EmptyStateBody,{children:"Clear your current search to show more results"}),(0,i.jsx)(s.EmptyStateFooter,{children:(0,i.jsx)(s.Button,{ouiaId:"clear_filters",variant:"link",onClick:e,children:"Clear search"})})]})})})})}},13371:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=a(87696),o=a(83634),l=a(28416),d=a(42060),c=a(49923),u=i(a(56654)),p=a(85802),h=i(a(19203)),m=a(34046),f=i(a(7714)),g=i(a(80076)),x=i(a(27428)),_=a(36962),j=(0,d.createUseStyles)({description:{paddingTop:"12px",paddingBottom:"8px",color:o.global_Color_200.value},mainContainer:{backgroundColor:o.global_BackgroundColor_100.value,display:"flex",flexDirection:"column",height:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"}}),v="snapshotPerPage";t.default=function(){const e=j(),t=(0,f.default)(),{repoUUID:a=""}=(0,m.useParams)(),i=(0,m.useNavigate)(),o=Number(localStorage.getItem(v))||20,[d,y]=(0,l.useState)(1),[b,I]=(0,l.useState)(o),[S,C]=(0,l.useState)(""),[T,P]=(0,l.useState)(0),[k,E]=(0,l.useState)("asc"),D=["Snapshots","Change","Packages","Errata"],A=["created_at"],O=(0,l.useMemo)((()=>A[T]+":"+k),[T,k]),w=(0,h.default)(S);(0,l.useEffect)((()=>{y(1)}),[w,O]);const{isLoading:R,isFetching:F,isError:N,data:L={data:[],meta:{count:0,limit:20,offset:0}}}=(0,p.useGetSnapshotList)(a,d,b,w,O),{data:M}=(0,p.useFetchContent)([a]);(0,l.useEffect)((()=>{N&&B()}),[N]);const U=(e,t)=>y(t),K=(e,t,a)=>{I(t),y(a),localStorage.setItem(v,t.toString())},V=(e,t)=>{if(!t&&A[e])return{sortBy:{index:T,direction:k,defaultDirection:"asc"},onSort:(e,t,a)=>{P(t),E(a)},columnIndex:e}},B=()=>i(t),{data:G=[],meta:{count:Q=0}}=L,Y=F||R,q=Y||!Q;return(0,s.jsx)(n.Modal,{position:"top",hasNoBodyWrapper:!0,"aria-label":"Snapshot list modal",ouiaId:"snapshot_list_modal",ouiaSafe:Y,variant:n.ModalVariant.medium,title:"Snapshots",description:(0,s.jsxs)("p",{className:e.description,children:["View list of snapshots for"," ",M?.name?(0,s.jsx)("b",{children:M?.name}):"a repository","."]}),isOpen:!0,onClose:B,footer:(0,s.jsx)(n.Button,{variant:"secondary",onClick:B,children:"Close"},"close"),children:(0,s.jsx)(r.InnerScrollContainer,{children:(0,s.jsxs)(n.Grid,{className:e.mainContainer,children:[(0,s.jsxs)(n.InputGroup,{className:e.topContainer,children:[(0,s.jsxs)(n.InputGroupItem,{children:[(0,s.jsx)(n.TextInput,{id:"search",type:"text",ouiaId:"name_search",placeholder:"Search snapshot",value:S,onChange:(e,t)=>C(t)}),(0,s.jsx)(n.InputGroupText,{id:"search-icon",children:(0,s.jsx)(_.SearchIcon,{})})]}),(0,s.jsx)(u.default,{hide:q,children:(0,s.jsx)(n.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",itemCount:Q,perPage:b,page:d,onSetPage:U,isCompact:!0,onPerPageSelect:K})})]}),(0,s.jsx)(u.default,{hide:!Y,children:(0,s.jsx)(n.Grid,{className:e.mainContainer,children:(0,s.jsx)(c.SkeletonTable,{rows:b,numberOfColumns:D.length,variant:r.TableVariant.compact})})}),(0,s.jsx)(u.default,{hide:Y,children:(0,s.jsxs)(r.Table,{"aria-label":"snapshot list table",ouiaId:"snapshot_list_table",variant:"compact",children:[(0,s.jsx)(u.default,{hide:q,children:(0,s.jsx)(r.Thead,{children:(0,s.jsx)(r.Tr,{children:D.map(((e,t)=>(0,s.jsx)(r.Th,{sort:V(t,q),children:e},e+"_column")))})})}),(0,s.jsxs)(r.Tbody,{children:[G.map((({created_at:e,content_counts:t,added_counts:a,removed_counts:i},n)=>(0,s.jsxs)(r.Tr,{children:[(0,s.jsx)(r.Td,{children:new Date(e).toUTCString()}),(0,s.jsx)(r.Td,{children:(0,s.jsx)(x.default,{addedCount:(a?.["rpm.advisory"]||0)+(a?.["rpm.package"]||0),removedCount:(i?.["rpm.advisory"]||0)+(i?.["rpm.package"]||0)})}),(0,s.jsx)(r.Td,{children:t?.["rpm.package"]||0}),(0,s.jsx)(r.Td,{children:t?.["rpm.advisory"]||0})]},e+n))),(0,s.jsx)(u.default,{hide:!q,children:(0,s.jsx)(g.default,{clearSearch:()=>C("")})})]})]})}),(0,s.jsxs)(n.Flex,{className:e.bottomContainer,children:[(0,s.jsx)(n.FlexItem,{}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(u.default,{hide:q,children:(0,s.jsx)(n.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",itemCount:Q,perPage:b,page:d,onSetPage:U,variant:n.PaginationVariant.bottom,onPerPageSelect:K})})})]})]})})},a)}},27428:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(36962),n=a(9317),r=a(83634),o=a(42060),l=r.global_danger_color_100.value,d=r.global_success_color_100.value,c=(0,o.createUseStyles)({base:{fontWeight:"bold",alignItems:"center",display:"flex","& svg":{marginRight:"5px"}},red:{extend:"base",color:l},green:{extend:"base",color:d}});t.default=({addedCount:e,removedCount:t})=>{const a=c();return(0,i.jsxs)(n.Flex,{children:[(0,i.jsxs)(n.FlexItem,{className:a.green,children:[(0,i.jsx)(s.LongArrowAltUpIcon,{}),e]}),(0,i.jsxs)(n.FlexItem,{className:a.red,children:[(0,i.jsx)(s.LongArrowAltDownIcon,{}),t]})]})}},87739:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(36962),r=a(9317),o=i(a(27002)),l=a(83634),d=a(42060),c=i(a(27484)),u=i(a(84110)),p=i(a(24619)),h=a(89926);c.default.extend(u.default);const m=l.global_danger_color_100.value,f=l.global_success_color_100.value,g=l.global_warning_color_100.value,x=(0,d.createUseStyles)({spinner:{animationDuration:"6s !important",margin:"-3px 0"}}),_=({error:e,count:t,time:a})=>{const i=""===a||void 0===a?"Never":(0,c.default)(a).fromNow();return(0,s.jsxs)("div",{children:[e,(0,s.jsxs)(r.Flex,{children:[(0,s.jsxs)(r.Stack,{className:"pf-u-mt-sm",children:[(0,s.jsx)(r.StackItem,{className:"pf-u-font-weight-bold",children:"Last introspection"}),(0,s.jsxs)(r.StackItem,{children:[" ",i," "]})]}),(0,s.jsxs)(r.Stack,{className:"pf-u-mt-sm",children:[(0,s.jsx)(r.StackItem,{className:"pf-u-font-weight-bold",children:"Failed attempts"}),(0,s.jsxs)(r.StackItem,{children:[" ",t," "]})]})]})]})},j=({retryHandler:e,uuid:t})=>{const{rbac:a}=(0,h.useAppContext)();return(0,s.jsx)(r.Flex,{children:(0,s.jsx)(p.default,{content:"You do not have the required permissions to perform this action.",show:!a?.write,setDisabled:!0,children:(0,s.jsx)(r.Button,{variant:"link",isInline:!0,onClick:()=>e?e(t):null,children:"Retry"})})})};t.default=({rowData:{uuid:e,status:t,failed_introspections_count:a,last_introspection_time:i,last_introspection_error:l},retryHandler:d})=>{const c=x();switch(t){case"Valid":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(n.CheckCircleIcon,{color:f})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(o.default,{color:"green",children:"Valid"})})]});case"Invalid":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(n.ExclamationCircleIcon,{color:m})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(r.Popover,{"aria-label":"invalid popover",alertSeverityVariant:"danger",headerContent:"Invalid",headerIcon:(0,s.jsx)(n.ExclamationCircleIcon,{}),bodyContent:(0,s.jsx)(_,{error:l,count:a,time:i}),position:"left",footerContent:(0,s.jsx)(j,{retryHandler:d,uuid:e}),children:(0,s.jsx)(r.Button,{variant:"link",isInline:!0,children:(0,s.jsx)(o.default,{color:"red",isLink:!0,children:"Invalid"})})})})]});case"Unavailable":return(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(n.ExclamationTriangleIcon,{color:g})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(r.Popover,{"aria-label":"unavailable popover",alertSeverityVariant:"warning",headerContent:"Unavailable",headerIcon:(0,s.jsx)(n.ExclamationTriangleIcon,{}),bodyContent:(0,s.jsx)(_,{error:l,count:a,time:i}),position:"left",footerContent:(0,s.jsx)(j,{retryHandler:d,uuid:e}),children:(0,s.jsx)(o.default,{color:"gold",isLink:!0,children:"Unavailable"})})})]});case"Pending":return(0,s.jsx)(r.Tooltip,{position:"top-start",content:"Repository is being introspected",children:(0,s.jsxs)(r.Flex,{alignContent:{default:"alignContentCenter"},direction:{default:"row"},children:[(0,s.jsx)(r.FlexItem,{spacer:{default:"spacerSm"},children:(0,s.jsx)(r.Spinner,{size:"md",className:c.spinner})}),(0,s.jsx)(r.FlexItem,{children:(0,s.jsx)(o.default,{color:"blue",children:"In progress"})})]})});default:return(0,s.jsx)(s.Fragment,{})}}},25888:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=a(87696),o=a(83634),l=a(28416),d=a(42060),c=a(49923),u=a(85802),p=i(a(56654)),h=a(88767),m=a(89926),f=i(a(24619)),g=i(a(55673)),x=a(36962),_=i(a(19203)),j=i(a(71874)),v=i(a(16286)),y=a(11500),b=a(8566),I=a(55026),S=(0,d.createUseStyles)({mainContainer:{backgroundColor:o.global_BackgroundColor_100.value,display:"flex",flexDirection:"column","& .pf-v5-c-dropdown__menu":{marginLeft:"-138px","& li":{listStyle:"none"}}},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0},addRepositoriesButton:{marginLeft:"16px"},checkboxMinWidth:{minWidth:"45px!important"},disabled:{color:o.global_disabled_color_100.value},repositoryActions:{display:"flex",flexDirection:"row"},disabledDropdownButton:{color:o.global_disabled_color_100.value+" !important",backgroundColor:o.global_disabled_color_200.value+" !important"}}),C="popularRepositoriesperPage";t.default=()=>{const e=S(),t=(0,h.useQueryClient)(),{rbac:a,features:i}=(0,m.useAppContext)(),[o,d]=(0,l.useState)(new Map),[T,P]=(0,l.useState)(new Set),[k,E]=(0,l.useState)([]),[D,A]=(0,l.useState)(""),O=Number(localStorage.getItem(C))||20,[w,R]=(0,l.useState)(1),[F,N]=(0,l.useState)(""),L=(0,_.default)(F),[M,U]=(0,l.useState)(O),[K,V]=(0,l.useState)(!1),B=(e,t)=>{V(t)},G=()=>{V(!1),(()=>{const e=document.getElementById("toggle-add-selected");e?.focus()})()},{isLoading:Q,error:Y,isError:q,isFetching:$,data:z={data:[],meta:{count:0,limit:20,offset:0}}}=(0,u.usePopularRepositoriesQuery)(w,M,{searchQuery:F?L:F}),{isLoading:H,error:W,isError:Z,data:{distribution_versions:X,distribution_arches:J}={distribution_versions:[],distribution_arches:[]}}=(0,u.useRepositoryParams)(),{mutateAsync:ee,isLoading:te}=(0,u.useAddPopularRepositoryQuery)(t,k,w,M,{searchQuery:L}),ae=()=>{d(new Map),P(new Set)},ie=(0,l.useMemo)((()=>T.size>=1),[T]),se=(0,l.useMemo)((()=>o.size>=1),[o]),ne=(0,l.useMemo)((()=>z.data.every((e=>e.uuid?T.has(e.uuid):o.has(e.url)))),[z,o,T]);(0,l.useEffect)((()=>{$||(E([]),A(""))}),[$]),(0,l.useEffect)((()=>{0!=k.length&&ee().then((()=>{E([]),ae()}),(()=>E([])))}),[k]),(0,l.useEffect)((()=>{D&&re(D).then(ae,(()=>A("")))}),[D]);const{mutateAsync:re,isLoading:oe}=(0,u.useDeletePopularRepositoryMutate)(t,w,M,{searchQuery:L}),{mutateAsync:le,isLoading:de}=(0,u.useBulkDeleteContentItemMutate)(t,T,w,M,{searchQuery:L},void 0),ce=oe||$||H||te||de,ue=(e,t)=>R(t),pe=(e,t,a)=>{localStorage.setItem(C,t.toString()),U(t),R(a)},he=e=>{const t=[];o.forEach((a=>{t.push({...a,snapshot:e})})),E(t)},me=["Name","Architecture","Versions"];if(q)throw Y;if(Z)throw W;const{data:fe=[],meta:{count:ge=0}}=z,xe=!z?.data?.length;return(0,s.jsxs)(n.Grid,{"data-ouia-safe":!ce,"data-ouia-component-id":"popular_repositories_page",className:e.mainContainer,children:[(0,s.jsxs)(n.Flex,{className:e.topContainer,children:[(0,s.jsx)(n.FlexItem,{children:(0,s.jsxs)(n.InputGroup,{children:[(0,s.jsxs)(n.InputGroupItem,{isFill:!0,children:[(0,s.jsx)(n.TextInput,{isDisabled:Q,type:"text",id:"search",ouiaId:"popular_filter_search",placeholder:"Filter by name/url",value:F,onChange:(e,t)=>N(t)}),(0,s.jsx)(n.InputGroupText,{isDisabled:Q,id:"search-icon",children:(0,s.jsx)(x.SearchIcon,{})})]}),(0,s.jsx)(n.InputGroupItem,{children:(0,s.jsxs)(n.FlexItem,{className:e.repositoryActions,children:[(0,s.jsx)(f.default,{content:a?.write?"Make a selection below to add multiple repositories":"You do not have the required permissions to perform this action.",show:!a?.write||!se,setDisabled:!0,children:(()=>{const t=se?`Add ${o.size} repositories`:"Add selected repositories",r=t+" without snapshotting",l=!a?.write||!se;if(i?.snapshots?.enabled&&i.snapshots.accessible){const a=l?e.disabledDropdownButton:void 0;return(0,s.jsx)(I.Dropdown,{onSelect:G,className:e.addRepositoriesButton,ouiaId:"add-selected-toggle-dropdown",toggle:(0,s.jsx)(I.DropdownToggle,{ouiaId:"add-selected-dropdown-toggle-no-snap",className:a,splitButtonItems:[(0,s.jsx)(I.DropdownToggleAction,{"data-ouia-component-id":"add_checked_repos-with-snap",onClick:()=>he(!0),className:a,children:t},"action")],toggleVariant:"primary",splitButtonVariant:"action",onToggle:B,isDisabled:l}),isOpen:K,children:(0,s.jsx)(I.DropdownItem,{component:"button",onClick:()=>he(!1),ouiaId:"add-selected-repos-no-snap",children:r},"action")})}return(0,s.jsx)(n.Button,{onClick:()=>he(!1),className:e.addRepositoriesButton,isDisabled:l,ouiaId:"add_checked_repos",children:t})})()}),(0,s.jsx)(f.default,{content:"You do not have the required permissions to perform this action.",show:!a?.write,setDisabled:!0,children:(0,s.jsx)(v.default,{atLeastOneRepoChecked:ie,numberOfReposChecked:T.size,deleteCheckedRepos:async()=>{le(T).then((()=>{const e=Math.ceil((ge-T.size)/M);w>1&&e<w&&R(e),ae()}))},toggleOuiaId:"popular_repositories_kebab_toggle"})})]})})]})}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(p.default,{hide:Q||xe,children:(0,s.jsx)(n.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",isDisabled:Q,itemCount:ge,perPage:M,page:w,onSetPage:ue,isCompact:!0,onPerPageSelect:pe})})})]}),(0,s.jsx)(p.default,{hide:!Q,children:(0,s.jsx)(n.Grid,{className:e.mainContainer,children:(0,s.jsx)(c.SkeletonTable,{rows:M,numberOfColumns:me.length,variant:r.TableVariant.compact})})}),(0,s.jsx)(p.default,{hide:Q||xe,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.Table,{"aria-label":"Popular repositories table",ouiaId:"popular_repos_table",variant:"compact",children:[(0,s.jsx)(r.Thead,{children:(0,s.jsxs)(r.Tr,{children:[(0,s.jsx)(p.default,{hide:!a?.write,children:(0,s.jsx)(r.Th,{className:e.checkboxMinWidth,select:{onSelect:(e,t)=>{const a=new Set(T),i=new Map(o);t?fe.forEach((e=>{e.uuid?a.add(e.uuid):i.set(e.url,(0,y.repoToRequestItem)(e))})):fe.forEach((e=>{e.uuid?a.delete(e.uuid):i.delete(e.url)})),P(a),d(i)},isSelected:ne}})}),me.map((e=>(0,s.jsx)(r.Th,{children:e},e+"column"))),(0,s.jsx)(r.Th,{children:(0,s.jsx)(n.Spinner,{size:"md",className:ce?"":e.invisible})})]})}),(0,s.jsx)(r.Tbody,{children:fe.map(((t,i)=>{const{uuid:l,existing_name:c,suggested_name:u,url:h,distribution_arch:m,distribution_versions:x}=t;return(0,s.jsxs)(r.Tr,{children:[(0,s.jsx)(p.default,{hide:!a?.write,children:(0,s.jsx)(r.Td,{select:{rowIndex:i,onSelect:(e,a)=>((e,t)=>{if(e.uuid){const a=new Set(T);t?a.add(e.uuid):a.delete(e.uuid),P(a)}else{const a=new Map(o);t?a.set(e.url,(0,y.repoToRequestItem)(e)):a.delete(e.url),d(a)}})(t,a),isSelected:l?T.has(l):o.has(h)}})}),(0,s.jsx)(r.Td,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.Flex,{direction:{default:"row"},children:[(0,s.jsx)(n.FlexItem,{children:u}),c&&u!==c&&(0,s.jsxs)(n.FlexItem,{className:e.disabled,children:["Current name: ",c]})]}),(0,s.jsx)(g.default,{href:h})]})}),(0,s.jsx)(r.Td,{children:(j=m,J.find((({label:e})=>j===e))?.name)}),(0,s.jsx)(r.Td,{children:(_=x,X.filter((({label:e})=>_?.includes(e))).map((({name:e})=>e)).join(", "))}),(0,s.jsx)(r.Td,{width:10,children:(0,s.jsx)(f.default,{content:"You do not have the required permissions to perform this action.",show:!a?.write,setDisabled:!0,children:l?(0,s.jsx)(n.Button,{isDisabled:l===D||te,onClick:()=>A(l),variant:"danger",ouiaId:"remove_popular_repo",children:"Remove"}):(0,s.jsx)(b.AddRepo,{isDisabled:k[i]?.url===h||$||oe||de,addRepo:e=>((e,t,a)=>{const i=[];i[e]=(0,y.repoToRequestItem)(t,a),E(i)})(i,t,e)})})})]},u+l);var _,j}))})]}),(0,s.jsx)(p.default,{hide:Q||xe,children:(0,s.jsxs)(n.Flex,{className:e.bottomContainer,children:[(0,s.jsx)(n.FlexItem,{}),(0,s.jsx)(n.FlexItem,{children:(0,s.jsx)(n.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",itemCount:ge,perPage:M,page:w,onSetPage:ue,variant:n.PaginationVariant.bottom,onPerPageSelect:pe})})]})})]})}),(0,s.jsx)(p.default,{hide:!xe,children:(0,s.jsx)(j.default,{clearFilters:()=>N(""),notFiltered:!L,itemName:"popular repositories"})})]})}},8566:function(e,t,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a);var s=Object.getOwnPropertyDescriptor(t,a);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,i,s)}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&i(t,e,a);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AddRepo=void 0;const r=a(85893),o=n(a(28416)),l=a(9317),d=a(89926),c=a(83634),u=a(42060),p=a(55026),h=(0,u.createUseStyles)({disabledButton:{color:c.global_disabled_color_100.value+" !important",backgroundColor:c.global_disabled_color_200.value+" !important"}});t.AddRepo=({isDisabled:e,addRepo:t})=>{const{features:a}=(0,d.useAppContext)(),i=h(),[s,n]=(0,o.useState)(!1),c=(e,t)=>{n(t)},u=()=>{n(!1),(()=>{const e=document.getElementById("toggle-add");e?.focus()})()},m=[(0,r.jsx)(p.DropdownItem,{"data-ouia-component-id":"add-popular_repo_without-snapshotting",component:"button",onClick:()=>t(!1),children:"Add without snapshotting"},"action")];if(a?.snapshots?.enabled&&a.snapshots.accessible){const a=e?i.disabledButton:void 0;return(0,r.jsx)(p.Dropdown,{onSelect:u,toggle:(0,r.jsx)(p.DropdownToggle,{id:"toggle-add",className:a,ouiaId:"add_popular_repo_toggle",splitButtonItems:[(0,r.jsx)(p.DropdownToggleAction,{"data-ouia-component-id":"add_popular_repo",onClick:()=>t(!0),className:a,children:"Add"},"action")],toggleVariant:"primary",splitButtonVariant:"action",onToggle:c,isDisabled:e}),isOpen:s,children:m})}return(0,r.jsx)(l.Button,{variant:"secondary",isDisabled:e,onClick:()=>t(!1),ouiaId:"add_popular_repo",children:"Add"})}},11500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.repoToRequestItem=void 0,t.repoToRequestItem=(e,t=!1)=>{const{suggested_name:a,url:i,distribution_versions:s,distribution_arch:n,gpg_key:r,metadata_verification:o}=e;return{name:a,url:i,distribution_versions:s,distribution_arch:n,gpg_key:r,metadata_verification:o,snapshot:t}}},57895:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(28416),r=a(9317),o=a(34046),l=a(83634),d=a(42060),c=a(44439),u=i(a(50624)),p=i(a(8465)),h=(0,d.createUseStyles)({tabs:{backgroundColor:l.global_BackgroundColor_100.value},tab:{"& button":{padding:0}},link:{color:"inherit",textDecoration:"none",padding:"8px 16px","&:focus-visible":{outlineOffset:"-6px"}}});t.default=function({tabs:e}){const{pathname:t}=(0,o.useLocation)(),a=h(),i=(0,n.useMemo)((()=>(0,c.last)(t.split("/"))),[t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.default,{}),(0,s.jsx)(r.Tabs,{className:a.tabs,ouiaId:"routed-tabs",activeKey:i,children:e.map((({title:e,route:t})=>(0,s.jsx)(r.Tab,{className:a.tab,keyParams:t,tabIndex:-1,eventKey:t||"content","aria-label":e,ouiaId:e,title:(0,s.jsx)(o.Link,{className:a.link,accessKey:t,to:t,children:(0,s.jsx)(r.TabTitleText,{children:e})},t)},t)))}),(0,s.jsx)(p.default,{}),(0,s.jsx)(o.Outlet,{})]})}},28:function(e,t,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a);var s=Object.getOwnPropertyDescriptor(t,a);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,i,s)}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&i(t,e,a);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=a(85893),l=a(9317),d=a(34046),c=a(42060),u=a(7274),p=r(a(57895)),h=a(28416),m=n(a(69997)),f=(0,c.createUseStyles)({containerMargin:{margin:"24px"}});t.default=function(){const e=f(),t=(0,h.useMemo)((()=>Math.random()),[]),a=(0,m.default)();return(0,o.jsx)(d.Routes,{children:(0,o.jsxs)(d.Route,{element:(0,o.jsx)(p.default,{tabs:a}),children:[a.map((({route:t,Element:a,ChildRoutes:i},s)=>(0,o.jsx)(d.Route,{path:t,element:(0,o.jsx)(u.ErrorPage,{children:(0,o.jsx)(l.Grid,{className:e.containerMargin,children:(0,o.jsx)(a,{})})}),children:i?.map((({path:e,Element:t},a)=>(0,o.jsx)(d.Route,{path:e,element:(0,o.jsx)(t,{})},a)))},s.toString()))),(0,o.jsx)(d.Route,{path:"*",element:(0,o.jsx)(d.Navigate,{to:m.DEFAULT_ROUTE,replace:!0})})]})},t)}},69997:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ADMIN_TASKS_ROUTE=t.POPULAR_REPOSITORIES_ROUTE=t.DEFAULT_ROUTE=void 0;const s=a(28416),n=i(a(54619)),r=i(a(96555)),o=i(a(33e3)),l=i(a(7933)),d=i(a(14580)),c=i(a(8300)),u=i(a(25888)),p=a(89926),h=i(a(13371));t.DEFAULT_ROUTE="",t.POPULAR_REPOSITORIES_ROUTE="popular-repositories",t.ADMIN_TASKS_ROUTE="admin-tasks",t.default=function(){const{features:e,rbac:a}=(0,p.useAppContext)(),i=a?.write;return(0,s.useMemo)((()=>[{title:"Your repositories",route:t.DEFAULT_ROUTE,Element:o.default,ChildRoutes:[...i?[{path:"edit-repository",Element:d.default},{path:"add-repository",Element:l.default}]:[],...e?.admintasks?.enabled&&e.snapshots?.accessible?[{path:":repoUUID/snapshots",Element:h.default}]:[],{path:":repoUUID/packages",Element:c.default}]},{title:"Popular repositories",route:t.POPULAR_REPOSITORIES_ROUTE,Element:u.default},...e?.admintasks?.enabled&&e.admintasks?.accessible?[{title:"Admin tasks",route:t.ADMIN_TASKS_ROUTE,Element:n.default,ChildRoutes:[{path:":taskUUID",Element:r.default}]}]:[]]),[i,e])}},24619:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(28416);t.default=({show:e,children:t,setDisabled:a,...r})=>e?(0,i.jsx)(s.Tooltip,{...r,children:(0,i.jsx)("div",{children:t&&(0,n.cloneElement)(t,a?{isDisabled:a}:void 0)})}):(0,i.jsx)("div",{children:t})},19548:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(9317),r=i(a(43047));t.default=({hide:e=!1,variant:t="error",textValue:a="",defaultText:i=""})=>!a&&!i||e?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(n.FormHelperText,{children:(0,s.jsx)(n.HelperText,{children:(0,s.jsx)(n.HelperTextItem,{icon:(0,s.jsx)(r.default,{}),variant:t,children:a||i})})})},16286:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(85893),n=a(55026),r=a(28416),o=a(89926),l=i(a(24619));t.default=({atLeastOneRepoChecked:e,numberOfReposChecked:t,deleteCheckedRepos:a,toggleOuiaId:i})=>{const{rbac:d}=(0,o.useAppContext)(),[c,u]=(0,r.useState)(!1),p=[(0,s.jsx)(l.default,{content:"Make a selection below to delete multiple repositories",show:!e,setDisabled:!0,children:(0,s.jsx)(n.DropdownItem,{onClick:a,children:e?`Remove ${t} repositories`:"Remove selected repositories"})},"delete")];return(0,s.jsx)(n.Dropdown,{onSelect:()=>{u(!1),document.getElementById("delete-kebab").focus()},toggle:(0,s.jsx)(n.KebabToggle,{id:"delete-kebab","data-ouia-component-id":i,onToggle:(e,t)=>(e=>{u(e)})(t),isDisabled:!d?.write}),isOpen:c,isPlain:!0,dropdownItems:p,direction:"down"})}},11269:function(e,t,a){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,a,i){void 0===i&&(i=a);var s=Object.getOwnPropertyDescriptor(t,a);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,i,s)}:function(e,t,a,i){void 0===i&&(i=a),e[i]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&i(t,e,a);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(85893),o=a(55026),l=n(a(28416));t.default=({options:e,variant:t,selectedProp:a,setSelected:i,toggleIcon:s,placeholderText:n,isDisabled:d,...c})=>{const u=Array.isArray(a)?a:[a],[p,h]=(0,l.useState)(!1),m=e.map(((e,t)=>(0,r.jsx)(o.SelectOption,{id:e,value:e},e+t)));return(0,r.jsx)(o.Select,{isDisabled:d,variant:t,onSelect:(e,s)=>{switch(t){case o.SelectVariant.single:i(s),h(!1);break;case o.SelectVariant.typeaheadMulti:case o.SelectVariant.checkbox:if(Array.isArray(a)){if(u.includes(s)){const e=u.filter((e=>e!==s));i(e);break}i([...u,s]);break}}},selections:u,isOpen:p,onToggle:(e,t)=>h(t),placeholderText:n,isCheckboxSelectionBadgeHidden:!0,toggleIcon:s,...c,children:m})}},71874:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(45718),r=(0,a(42060).createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1},emptyStateBody:{marginBottom:"16px"}});t.default=({notFiltered:e,clearFilters:t,itemName:a,notFilteredBody:o,notFilteredButton:l})=>{const d=r();return(0,i.jsxs)(s.EmptyState,{variant:s.EmptyStateVariant.full,className:d.emptyStateContainer,children:[(0,i.jsx)(s.EmptyStateHeader,{titleText:(0,i.jsx)(i.Fragment,{children:e?`No ${a}`:`No ${a} match the filter criteria`}),icon:(0,i.jsx)(s.EmptyStateIcon,{icon:e?n.PlusCircleIcon:n.SearchIcon}),headingLevel:"h2"}),(0,i.jsx)(s.EmptyStateBody,{className:d.emptyStateBody,children:e?o:"Clear all filters to show more results"}),(0,i.jsx)(s.EmptyStateFooter,{children:e?l:(0,i.jsx)(s.Button,{ouiaId:"clear_filters",variant:"link",onClick:t,children:"Clear all filters"})})]})}},7274:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPage=void 0;const i=a(85893),s=a(49923).ErrorBoundary;t.ErrorPage=({children:e})=>(0,i.jsx)(s,{headerTitle:"",errorTitle:"Unhandled error",errorDescription:"There was a problem trying to process your request",children:e})},50624:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(49923),r=a(83634),o=a(42060),l=n.PageHeader,d=(0,o.createUseStyles)({subtext:{color:r.global_Color_100.value,paddingTop:"8px"}});t.default=function(){const e=d();return(0,i.jsxs)(l,{children:[(0,i.jsx)(n.PageHeaderTitle,{title:"Custom repositories"}),(0,i.jsx)(s.Text,{className:e.subtext,ouiaId:"custom_repositories_description",children:"View all custom repositories within your organization."})]})}},56654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893);t.default=({hide:e,children:t})=>e?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(i.Fragment,{children:t})},54662:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsPage=void 0;const i=a(85893),s=a(9317),n=a(36962),r=a(49923),o=r.PageHeader;t.NoPermissionsPage=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{children:(0,i.jsx)(r.PageHeaderTitle,{title:"Repositories"})}),(0,i.jsx)(s.Grid,{style:{margin:"24px"},children:(0,i.jsxs)(s.EmptyState,{variant:s.EmptyStateVariant.full,children:[(0,i.jsx)(s.EmptyStateHeader,{titleText:"You do not have access to repositories",icon:(0,i.jsx)(s.EmptyStateIcon,{icon:n.LockIcon}),headingLevel:"h5"}),(0,i.jsx)(s.EmptyStateBody,{children:"Contact your organization administrator(s) for more information."})]})})]})},8465:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(9317),n=a(83634),r=a(28416),o=a(42060),l=a(95699),d=a(36962),c=(0,o.createUseStyles)({quickstartContainer:{margin:"24px 24px 0",backgroundColor:n.global_BackgroundColor_100.value},quickstartSpinner:{margin:"0 0 -4px 5px"},buildCustomButton:{marginTop:"20px",padding:0,fontWeight:600}}),u="QUICKSTART_EXPANDED";t.default=function(){const{isBeta:e,quickStarts:t}=(0,l.useChrome)(),a=(0,r.useMemo)(e,[]),n=(0,r.useMemo)((()=>localStorage.getItem(u)||"true"),[]),[o,p]=(0,r.useState)("true"===n),[h,m]=(0,r.useState)(!1),f=c();if(!a)return(0,i.jsx)(i.Fragment,{});const g=()=>p((e=>(localStorage.setItem(u,`${!e}`),!e)));return(0,i.jsx)(s.Grid,{className:f.quickstartContainer,children:(0,i.jsxs)(s.ExpandableSection,{toggleText:"Need help getting started with Preview features?",onToggle:g,isExpanded:o,displaySize:"lg","aria-label":"quickStart-expansion","data-ouia-component-id":"quickstart_expand",children:[(0,i.jsx)(s.Text,{children:"For help getting started, access the quick start below:"}),(0,i.jsx)(s.Button,{className:f.buildCustomButton,iconPosition:"right",icon:h?(0,i.jsx)(s.Spinner,{size:"md",className:f.quickstartSpinner}):(0,i.jsx)(d.ArrowRightIcon,{}),variant:"link",ouiaId:"quickstart_link",onClick:async()=>{m(!0);try{await(t?.activateQuickstart("insights-custom-repos")),g()}catch(e){console.warn(e)}m(!1)},isDisabled:h,children:"Build an Image with Custom Content"})]})})}},27002:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(42060),n=a(83634),r=n.global_danger_color_200.value,o=n.global_success_color_200.value,l=n.global_warning_color_200.value,d=n.global_info_color_200.value;t.default=e=>{const t=(({isLink:e})=>(0,s.createUseStyles)({fontStyle:{fontWeight:"bold",fontSize:"14px",...e?{textDecoration:"grey dotted underline",cursor:"pointer"}:{}},red:{extend:"fontStyle",color:r},green:{extend:"fontStyle",color:o},gold:{extend:"fontStyle",color:l},blue:{extend:"fontStyle",color:d}}))(e)(),{color:a,children:n}=e;return(0,i.jsx)("span",{className:t[a],children:n})}},55673:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(85893),s=a(36962),n=(0,a(42060).createUseStyles)({link:{alignItems:"center",display:"flex",width:"fit-content"},icon:{marginLeft:"5px"}});t.default=({href:e})=>{const t=n();return(0,i.jsxs)("a",{href:e,className:t.link,rel:"noreferrer",target:"_blank",children:[e," ",(0,i.jsx)(s.ExternalLinkAltIcon,{className:t.icon})]})}},89926:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useAppContext=t.ContextProvider=t.AppContext=void 0;const s=a(85893),n=a(28416),r=a(83215),o=a(22782),l=i(a(4147)),d=i(a(95699)),c=a(89252),u=a(84699),p=o.getRegistry,{appname:h}=l.default.insights;t.AppContext=(0,n.createContext)({}),t.ContextProvider=({children:e})=>{const[a,i]=(0,n.useState)(void 0),[o,l]=(0,n.useState)(null),m=(0,d.default)(),{fetchFeatures:f,isLoading:g}=(0,c.useFetchFeaturesQuery)();return(0,n.useEffect)((()=>{p().register({notifications:r.notificationsReducer}),m&&!a&&m.auth.getUser().then((async()=>(0,u.fetchRBAC)(h).then(i))),(async()=>{const e=await f();l(e)})()}),[!!m]),(0,s.jsx)(t.AppContext.Provider,{value:{rbac:a?{read:a?.hasPermission("content-sources","repositories","read"),write:a?.hasPermission("content-sources","repositories","write")}:void 0,features:o,isFetchingFeatures:g},children:e})},t.useAppContext=()=>(0,n.useContext)(t.AppContext)},84699:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Rbac=t.fetchRBAC=t.RbacPermissionsBuilder=void 0;const s=a(72548),n=i(a(53092));class r{accessPagination;constructor(e){this.accessPagination=e}build(){if(!this.accessPagination?.data||0===this.accessPagination.data.length)return{};const e={};for(const t of this.accessPagination.data){const[a,i,s]=t.permission.split(":");e[a]||(e[a]={}),e[a][i]||(e[a][i]=[]),e[a][i].push(s)}return e}}t.RbacPermissionsBuilder=r,t.fetchRBAC=e=>{const t=n.default.create();return new s.AccessApi(void 0,"/api/rbac/v1",t).getPrincipalAccess(e).then((e=>new r(e.data))).then((e=>new o(e.build())))};class o{permissions={};constructor(e){this.permissions=e}hasPermission(e,t,a){const i=this.permissions[e];return!!i&&this.hasAppPermission(i,t,a)}hasWhatPermission(e,t){return e.includes(t)||e.includes("*")}hasAppPermission(e,t,a){const i=e[t];return(i?this.hasWhatPermission(i,a):void 0)||"*"!==t&&this.hasAppPermission(e,"*",a)}}t.Rbac=o},6141:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAdminTask=t.getAdminTasks=void 0;const s=i(a(53092));t.getAdminTasks=async(e,t,a,i)=>{const n=a.accountId,r=a.orgId,o=a?.statuses?.join(",").toLowerCase(),{data:l}=await s.default.get(`/api/content-sources/v1/admin/tasks/?offset=${(e-1)*t}&limit=${t}&account_id=${n}&org_id=${r}&status=${o}&sort_by=${i}`);return l},t.getAdminTask=async e=>{const{data:t}=await s.default.get(`/api/content-sources/v1/admin/tasks/${e}`);return t}},77747:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useFetchAdminTaskQuery=t.useAdminTaskListQuery=t.ADMIN_TASK_KEY=t.ADMIN_TASK_LIST_KEY=void 0;const s=a(28416),n=a(88767),r=a(6141),o=i(a(2430));t.ADMIN_TASK_LIST_KEY="ADMIN_TASK_LIST_KEY",t.ADMIN_TASK_KEY="ADMIN_TASK_KEY",t.useAdminTaskListQuery=(e,a,i,l)=>{const[d,c]=(0,s.useState)(!1),[u,p]=(0,s.useState)(0),h=(0,o.default)(),m=Object.values(i).flat(1);return(0,n.useQuery)([t.ADMIN_TASK_LIST_KEY,e,a,l,...m],(()=>(0,r.getAdminTasks)(e,a,i,l)),{onSuccess:e=>{const t=e?.data?.some((({status:e})=>"running"===e));return d&&t&&p(u+1),d&&!t&&p(0),c(!(u>40)&&t)},onError:e=>{c(!1),p(0),h("Unable to get admin task list","An error occurred",e)},refetchInterval:d?15e3:void 0,refetchIntervalInBackground:!1,refetchOnWindowFocus:d,keepPreviousData:!0,staleTime:2e4})},t.useFetchAdminTaskQuery=e=>{const a=(0,o.default)();return(0,n.useQuery)([t.ADMIN_TASK_KEY,e],(()=>(0,r.getAdminTask)(e)),{onError:e=>{a("Unable to find an Admin task with the given UUID.","An error occurred",e)},keepPreviousData:!0,staleTime:2e4})}},54389:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.introspectRepository=t.getSnapshotList=t.getPackages=t.getGpgKey=t.validateContentListItems=t.getRepositoryParams=t.EditContentListItem=t.AddContentListItems=t.deleteContentListItems=t.deleteContentListItem=t.fetchContentItem=t.getContentList=t.getPopularRepositories=void 0;const s=i(a(53092));t.getPopularRepositories=async(e,t,a,i)=>{const n=a?.searchQuery,r=a?.versions?.join(","),o=a?.arches?.join(","),{data:l}=await s.default.get(`/api/content-sources/v1/popular_repositories/?offset=${(e-1)*t}&limit=${t}&search=${n}&version=${r}&arch=${o}&sort_by=${i}`);return l},t.getContentList=async(e,t,a,i)=>{const n=a.searchQuery,r=a.versions.join(","),o=a.arches.join(","),l=a?.statuses?.join(","),{data:d}=await s.default.get(`/api/content-sources/v1/repositories/?offset=${(e-1)*t}&limit=${t}&search=${n}&version=${r}&status=${l}&arch=${o}&sort_by=${i}`);return d},t.fetchContentItem=async e=>{const{data:t}=await s.default.get(`/api/content-sources/v1/repositories/${e}`);return t},t.deleteContentListItem=async e=>{const{data:t}=await s.default.delete(`/api/content-sources/v1/repositories/${e}`);return t},t.deleteContentListItems=async e=>{const{data:t}=await s.default.post("/api/content-sources/v1/repositories/bulk_delete/",{uuids:e});return t},t.AddContentListItems=async e=>{const{data:t}=await s.default.post("/api/content-sources/v1.0/repositories/bulk_create/",e);return t},t.EditContentListItem=async e=>{const{data:t}=await s.default.patch(`/api/content-sources/v1.0/repositories/${e.uuid}`,e);return t},t.getRepositoryParams=async()=>{const{data:e}=await s.default.get("/api/content-sources/v1/repository_parameters/");return e},t.validateContentListItems=async e=>{const{data:t}=await s.default.post("/api/content-sources/v1.0/repository_parameters/validate/",e);return t},t.getGpgKey=async e=>{const{data:t}=await s.default.post("/api/content-sources/v1/repository_parameters/external_gpg_key/",{url:e});return t},t.getPackages=async(e,t,a,i,n)=>{const{data:r}=await s.default.get(`/api/content-sources/v1.0/repositories/${e}/rpms?offset=${(t-1)*a}&limit=${a}&search=${i}&sort_by=${n}`);return r},t.getSnapshotList=async(e,t,a,i,n)=>{const{data:r}=await s.default.get(`/api/content-sources/v1.0/repositories/${e}/snapshots/?offset=${(t-1)*a}&limit=${a}&search=${i}&sort_by=${n}`);return r},t.introspectRepository=async e=>{const{data:t}=await s.default.post(`/api/content-sources/v1/repositories/${e.uuid}/introspect/`,{reset_count:e.reset_count});return t}},85802:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useIntrospectRepositoryMutate=t.useGetPackagesQuery=t.useGetSnapshotList=t.useFetchGpgKey=t.useRepositoryParams=t.useBulkDeleteContentItemMutate=t.useDeleteContentItemMutate=t.useDeletePopularRepositoryMutate=t.useValidateContentList=t.useEditContentQuery=t.useAddPopularRepositoryQuery=t.useAddContentQuery=t.useContentListQuery=t.usePopularRepositoriesQuery=t.useFetchContent=t.CONTENT_ITEM_KEY=t.LIST_SNAPSHOTS_KEY=t.PACKAGES_KEY=t.CREATE_PARAMS_KEY=t.REPOSITORY_PARAMS_KEY=t.POPULAR_REPOSITORIES_LIST_KEY=t.CONTENT_LIST_KEY=void 0;const s=a(9317),n=a(28416),r=a(88767),o=a(44439),l=a(54389),d=a(77747),c=i(a(2430)),u=i(a(64006));t.CONTENT_LIST_KEY="CONTENT_LIST_KEY",t.POPULAR_REPOSITORIES_LIST_KEY="POPULAR_REPOSITORIES_LIST_KEY",t.REPOSITORY_PARAMS_KEY="REPOSITORY_PARAMS_KEY",t.CREATE_PARAMS_KEY="CREATE_PARAMS_KEY",t.PACKAGES_KEY="PACKAGES_KEY",t.LIST_SNAPSHOTS_KEY="PACKAGES_KEY",t.CONTENT_ITEM_KEY="CONTENT_ITEM_KEY",t.useFetchContent=e=>{const a=(0,c.default)();return(0,r.useQuery)([t.CONTENT_ITEM_KEY,...e],(()=>(0,l.fetchContentItem)(e[0])),{onError:e=>a("Unable to find associated repository.","An error occurred",e),keepPreviousData:!0,staleTime:2e4})},t.usePopularRepositoriesQuery=(e,a,i,s)=>{const n=(0,c.default)();return(0,r.useQuery)([t.POPULAR_REPOSITORIES_LIST_KEY,e,a,s,...Object.values(i||{})],(()=>(0,l.getPopularRepositories)(e,a,i,s)),{keepPreviousData:!0,staleTime:2e4,onError:e=>n("Unable to get popular repositories list","An error occurred",e)})},t.useContentListQuery=(e,a,i,s)=>{const[o,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(0),h=(0,c.default)();return(0,r.useQuery)([t.CONTENT_LIST_KEY,e,a,s,...Object.values(i)],(()=>(0,l.getContentList)(e,a,i,s)),{onSuccess:e=>{const t=e?.data?.some((({status:e})=>"Pending"===e||""===e));return o&&t&&p(u+1),o&&!t&&p(0),d(!(u>40)&&t)},onError:e=>{d(!1),p(0),h("Unable to get repositories list","An error occurred",e)},refetchInterval:o?15e3:void 0,refetchIntervalInBackground:!1,refetchOnWindowFocus:o,keepPreviousData:!0,staleTime:2e4})},t.useAddContentQuery=(e,a)=>{const i=(0,c.default)(),{notify:n}=(0,u.default)();return(0,r.useMutation)((()=>(0,l.AddContentListItems)(a.filter((e=>!!e)))),{onSuccess:i=>{const r=i.some((({status:e})=>"Pending"===e));n({variant:s.AlertVariant.success,title:a?.length>1?`${a?.length} custom repositories added`:`Custom repository "${a?.[0]?.name}" added`,description:r?"Repository introspection in progress":"Repository introspection data already available"}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(d.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:e=>{i("Error adding items to content list","An error occurred",e)}})},t.useAddPopularRepositoryQuery=(e,a,i,n,o)=>{const p=(0,c.default)(),{notify:h}=(0,u.default)(),m=[t.POPULAR_REPOSITORIES_LIST_KEY,i,n,void 0,...Object.values(o||{})],f=a.filter((e=>!!e));return(0,r.useMutation)((()=>(0,l.AddContentListItems)(f)),{onMutate:async()=>{const{name:t}=f[0];await e.cancelQueries(m);const a=e.getQueryData(m)||{};return e.setQueryData(m,(()=>({...a,data:a.data?.map((e=>t!==e.suggested_name||e.uuid?e:{...e,uuid:"temp",existing_name:t}))}))),{previousData:a}},onSuccess:a=>{const i=a.some((({status:e})=>"Pending"===e));h({variant:s.AlertVariant.success,title:`Custom repository "${a?.[0]?.name}" added`,description:i?"Repository introspection in progress":"Repository introspection data already available"}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(d.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:(t,a,i)=>{if(i){const{previousData:t}=i;e.setQueryData(m,t)}p("Error adding item from popularRepo","An error occurred",t)}})},t.useEditContentQuery=(e,a)=>{const i=(0,c.default)(),{notify:n}=(0,u.default)();return(0,r.useMutation)((()=>(0,l.EditContentListItem)(a[0])),{onSuccess:()=>{n({variant:s.AlertVariant.success,title:`Successfully edited ${a.length} ${a.length>1?"items":"item"}`}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(d.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:e=>{i("Error editing items on content list","An error occurred",e)}})},t.useValidateContentList=()=>{const e=(0,c.default)();return(0,r.useMutation)((e=>(0,l.validateContentListItems)(e)),{onError:t=>{e("Error validating form fields","An error occurred",t)}})},t.useDeletePopularRepositoryMutate=(e,a,i,s)=>{const n=[t.POPULAR_REPOSITORIES_LIST_KEY,a,i,void 0,...Object.values(s||{})],o=(0,c.default)();return(0,r.useMutation)(l.deleteContentListItem,{onMutate:async t=>{await e.cancelQueries(n);const a=e.getQueryData(n)||{};return e.setQueryData(n,(()=>({...a,data:a.data?.map((e=>e.uuid===t?{...e,uuid:void 0}:e))}))),{previousData:a,queryClient:e}},onSuccess:()=>{e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(d.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:(t,a,i)=>{if(i){const{previousData:t}=i;e.setQueryData(n,t)}o("Unable to delete the given repository.","An error occurred",t)}})},t.useDeleteContentItemMutate=(e,a,i,s,n)=>{const o=[t.CONTENT_LIST_KEY,a,i,n,...Object.values(s||{})],u=(0,c.default)();return(0,r.useMutation)(l.deleteContentListItem,{onMutate:async t=>{await e.cancelQueries(o);const a=e.getQueryData(o)||{};return e.setQueryData(o,(()=>({...a,data:a.data?.filter((e=>t!==e.uuid)),meta:a.meta?{...a.meta,count:a.meta.count?a.meta.count-1:1}:void 0}))),{previousData:a,queryClient:e}},onSuccess:(a,i,s)=>{const{previousData:n}=s;e.setQueriesData(t.CONTENT_LIST_KEY,((e={})=>(e?.meta?.count&&(e.meta.count=n?.meta?.count-1),e))),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(d.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:(t,a,i)=>{if(i){const{previousData:t}=i;e.setQueryData(o,t)}u("Unable to delete the given repository.","An error occurred",t)}})},t.useBulkDeleteContentItemMutate=(e,a,i,s,n,o)=>{const u=Array.from(a),p=[t.CONTENT_LIST_KEY,i,s,o,...Object.values(n||{})],h=(0,c.default)();return(0,r.useMutation)((()=>(0,l.deleteContentListItems)(u)),{onMutate:async t=>{await e.cancelQueries(p);const a=e.getQueryData(p)||{},i=a.meta?{...a.meta,count:a.meta.count?a.meta.count-t.size:1}:void 0;return e.setQueryData(p,(()=>({...a,data:a.data?.filter((e=>!t.has(e.uuid))),meta:i}))),{previousData:a,newMeta:i,queryClient:e}},onSuccess:(a,i,s)=>{const{newMeta:n}=s;e.setQueriesData(t.CONTENT_LIST_KEY,((e={})=>(e?.meta?.count&&(e.meta.count=n?.count),e))),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(d.ADMIN_TASK_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:(t,a,i)=>{if(i){const{previousData:t}=i;e.setQueryData(p,t)}h("Error deleting items from content list","An error occurred",t)}})},t.useRepositoryParams=()=>(0,r.useQuery)(t.REPOSITORY_PARAMS_KEY,l.getRepositoryParams,{keepPreviousData:!0,staleTime:1/0}),t.useFetchGpgKey=()=>{const e=(0,c.default)(),[t,a]=(0,n.useState)(!1);return{fetchGpgKey:async t=>{a(!0);let i=t;try{i=(await(0,l.getGpgKey)(t)).gpg_key}catch(t){e("Error fetching GPG key from provided URL","An error occurred",t)}return a(!1),i},isLoading:t}},t.useGetSnapshotList=(e,a,i,s,n)=>{const o=(0,c.default)();return(0,r.useQuery)([t.LIST_SNAPSHOTS_KEY,e,a,i,s,n],(()=>(0,l.getSnapshotList)(e,a,i,s,n)),{keepPreviousData:!0,optimisticResults:!0,staleTime:6e4,onError:e=>{o("Unable to find snapshots with the given UUID.","An error occurred",e)}})},t.useGetPackagesQuery=(e,a,i,s,n)=>{const o=(0,c.default)();return(0,r.useQuery)([t.PACKAGES_KEY,e,a,i,s,n],(()=>(0,l.getPackages)(e,a,i,s,n)),{keepPreviousData:!0,optimisticResults:!0,staleTime:6e4,onError:e=>{o("Unable to find packages with the given UUID.","An error occurred",e)}})},t.useIntrospectRepositoryMutate=(e,a,i,n,p)=>{const h=[t.CONTENT_LIST_KEY,a,i,p,...Object.values(n||{})],m=(0,c.default)(),{notify:f}=(0,u.default)();return(0,r.useMutation)(l.introspectRepository,{onMutate:async t=>{await e.cancelQueries(h);const a=e.getQueryData(h)||{},i=a.data?.find((e=>t.uuid==e.uuid))?.status,s=(0,o.cloneDeep)(a);return i&&(s.data.filter((e=>t.uuid==e.uuid)).at(0).status="Pending"),e.setQueryData(h,(()=>({...s}))),{previousData:a,queryClient:e}},onSuccess:()=>{f({variant:s.AlertVariant.success,title:"Repository introspection in progress"}),e.invalidateQueries(d.ADMIN_TASK_LIST_KEY)},onError:(t,a,i)=>{if(i){const{previousData:t}=i;e.setQueryData(h,t)}m("Error introspecting repository","An error occurred",t)}})}},37197:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFeatures=void 0;const s=i(a(53092));t.getFeatures=async()=>{const{data:e}=await s.default.get("/api/content-sources/v1/features/");return e}},89252:function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useFetchFeaturesQuery=void 0;const s=a(28416),n=a(37197),r=i(a(2430));t.useFetchFeaturesQuery=()=>{const[e,t]=(0,s.useState)(!1),a=(0,r.default)();return{fetchFeatures:async()=>{t(!0);let e=null;try{e=await(0,n.getFeatures)()}catch(e){a("Error fetching features","An error occurred",e)}return t(!1),e},isLoading:e}}},34581:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=t.initStore=t.restoreStore=void 0;const i=a(5358),s=a(71355);let n;t.restoreStore=()=>{n=void 0},t.initStore=(e,t,...a)=>{if(n)throw new Error("store already initialized");if(n=new i.ReducerRegistry(e??{},[...a]),t&&Object.keys(t).includes("notifications"))throw new Error("Invalid reducer with `notifications` key. This key is reserved for frontend-components-notifications");return n.register({notifications:s.notifications,...t??{}}),n},t.createStore=(...e)=>(0,t.initStore)({},{},...e)},45467:()=>{},36150:()=>{},63498:()=>{},36213:()=>{},81235:()=>{},81754:()=>{},96649:()=>{},16506:()=>{},43109:()=>{},70347:()=>{},12796:()=>{},11452:()=>{},95594:()=>{},15622:()=>{},58392:()=>{},34946:()=>{},10497:()=>{},80598:()=>{},32857:()=>{},1580:()=>{},94498:()=>{},37625:()=>{},71644:()=>{},10108:()=>{},27875:()=>{},23055:()=>{},54476:()=>{},27567:()=>{},28992:()=>{},90146:()=>{},80897:()=>{},30187:()=>{},40837:()=>{},81320:()=>{},88361:()=>{},50311:()=>{},90479:()=>{},78752:()=>{},71338:()=>{},11080:()=>{},44839:()=>{},21626:()=>{},74282:()=>{},67274:()=>{},24620:()=>{},82014:()=>{},90776:()=>{},88277:()=>{},97939:()=>{},8572:()=>{},98379:()=>{},25238:()=>{},61612:()=>{},33858:()=>{},66213:()=>{},77350:()=>{},69076:()=>{},93398:()=>{},70150:()=>{},92084:()=>{},46928:()=>{},1508:()=>{},91993:()=>{},84958:()=>{},37739:()=>{},99624:()=>{},36974:()=>{},43919:()=>{},91027:()=>{},53336:()=>{},16061:()=>{},27479:()=>{},66822:()=>{},93661:()=>{},56024:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},67761:()=>{},43390:()=>{},22143:()=>{},48223:()=>{},7064:()=>{},314:()=>{},97853:()=>{},97236:()=>{},49854:()=>{},38024:()=>{},11489:()=>{},40209:()=>{},87234:()=>{},38299:()=>{},51934:()=>{},72816:()=>{},74181:()=>{},16166:()=>{},53519:()=>{},11177:()=>{},24654:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"content-sources-frontend","version":"0.0.2","private":false,"engines":{"node":"=18.12.1","npm":">=8.0.0"},"scripts":{"build":"fec build","deploy":"npm-run-all build lint test","lint":"eslint \'src/**/*.{js,jsx,ts,tsx}\' --no-error-on-unmatched-pattern","lint:fix":"eslint --fix \'src/**/*.{js,jsx,ts,tsx}\' --no-error-on-unmatched-pattern","format":"prettier --write \'src/**/*.{js,jsx,ts,tsx,css,md}\' --config ./.prettierrc","patch:hosts":"fec patch-etc-hosts","start":"fec dev","test":"TZ=UTC jest --verbose --no-cache","verify":"npm-run-all build lint test","postinstall":"ts-patch install"},"dependencies":{"@patternfly/react-core":"^5.0.0","@patternfly/react-icons":"^5.0.0","@patternfly/react-table":"^5.0.0","@redhat-cloud-services/frontend-components":"^4.0.0","@redhat-cloud-services/frontend-components-notifications":"^4.0.0","@redhat-cloud-services/frontend-components-utilities":"^4.0.0","@redhat-cloud-services/rbac-client":"^1.2.8","@unleash/proxy-client-react":"^3.6.0","axios":"^1.6.0","classnames":"^2.3.2","dayjs":"^1.11.7","formik":"^2.4.5","lodash":"^4.17.21","react":"^18.2.0","react-dom":"^18.2.0","react-jss":"^10.10.0","react-query":"^3.39.3","react-redux":"^8.0.5","react-router-dom":"^6.8.2","react18-json-view":"^0.2.5","redux":"^4.2.1","yup":"^0.32.11"},"devDependencies":{"@babel/core":"^7.23.0","@babel/plugin-transform-object-rest-spread":"^7.22.15","@babel/plugin-transform-runtime":"^7.22.15","@babel/preset-env":"^7.22.20","@babel/preset-typescript":"^7.23.0","@redhat-cloud-services/eslint-config-redhat-cloud-services":"^1.2.6","@redhat-cloud-services/frontend-components-config":"^6.0.5","@redhat-cloud-services/tsc-transform-imports":"^1.0.4","@redhat-cloud-services/types":"^1.0.2","@testing-library/jest-dom":"^5.16.5","@testing-library/react":"^14.0.0","@testing-library/user-event":"^14.4.3","@types/jest":"^29.5.5","@types/lodash":"^4.14.191","@types/node":"^20.6.3","@types/react":"^18.2.22","@types/react-dom":"^18.2.5","@types/react-router-dom":"^5.3.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","babel-jest":"^29.7.0","babel-plugin-transform-imports":"^2.0.0","eslint":"^8.50.0","eslint-config-prettier":"^9.0.0","eslint-plugin-prettier":"^5.0.0","eslint-plugin-react":"^7.33.2","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-unused-imports":"^3.0.0","identity-obj-proxy":"^3.0.0","jest":"^29.7.0","jest-environment-jsdom":"^29.7.0","npm-run-all":"^4.1.5","prettier":"^3.0.3","prop-types":"15.8.0","ts-jest":"^29.1.1","ts-patch":"^3.0.2","typescript":"^5.2.2","webpack-bundle-analyzer":"^4.9.1"},"insights":{"appname":"content-sources","buildrepo":"git@github.com:RedHatInsights/content-sources-frontend-build.git"}}')},62307:e=>{"use strict";e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Time-out","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","511":"Network Authentication Required"}')}}]);
//# sourceMappingURL=../../sourcemaps/exposed-./RootApp.1e2c4919be44065dee8967f7fb61692a.js.map