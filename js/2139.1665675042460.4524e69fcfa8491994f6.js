"use strict";(self.webpackChunkcontent_sources_frontend=self.webpackChunkcontent_sources_frontend||[]).push([[2139],{38957:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893);n(94789);var o=n(95699),a=r(n(96533)),l=n(83215),s=n(22782),u=n(92950),c=n(86235),d=r(n(4147)),p=n(61888),f=s.getRegistry;t.default=function(){var e=(0,c.useHistory)(),t=(0,o.useChrome)();return(0,u.useEffect)((function(){var n;if(t){f().register({notifications:l.notificationsReducer});var r=t.init(),i=r.updateDocumentTitle,o=r.on;i(d.default.insights.appname),n=o("APP_NAVIGATION",(function(t){return e.push("/".concat(t.navId))}))}return function(){n()}}),[t,e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.default,{}),(0,i.jsx)(p.Routes,{})]})}},69325:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),u=n(55128),c=a(n(92950)),d=n(88767),p=n(86706),f=n(86235),h=l(n(38957)),v=n(8263),m=new d.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});t.default=function(e){var t=e.logger,n=c.default.useMemo((function(){return(0,v.resetStore)(),t?(0,v.createStore)(t).store:(0,v.createStore)().store}),[t]);return(0,c.useEffect)((function(){var e,t;null===(t=null===(e=null===insights||void 0===insights?void 0:insights.chrome)||void 0===e?void 0:e.appAction)||void 0===t||t.call(e,"view-list-page")}),[]),(0,s.jsx)(p.Provider,r({store:n},{children:(0,s.jsx)(d.QueryClientProvider,r({client:m},{children:(0,s.jsx)(f.BrowserRouter,r({basename:(0,u.getBaseName)(window.location.pathname)},{children:(0,s.jsx)(h.default,{})}))}))}))}},61888:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=t.pathRoutes=void 0;var o=n(85893),a=n(89624),l=n(92950),s=n(86235),u=n(3810),c=i(n(13299));t.pathRoutes=[{path:"/content",component:c.default}],t.Routes=function(){return(0,o.jsx)(l.Suspense,r({fallback:(0,o.jsx)(a.Bullseye,{children:(0,o.jsx)(a.Spinner,{})})},{children:(0,o.jsxs)(s.Switch,{children:[t.pathRoutes.map((function(e){var t=e.path,n=e.component;return(0,o.jsx)(s.Route,{path:t,component:function(){return(0,o.jsx)(u.ErrorPage,{children:(0,o.jsx)(n,{})})}},t)})),(0,o.jsx)(s.Route,{children:(0,o.jsx)(s.Redirect,{exact:!0,to:"/content"})})]})}))}},95690:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),u=n(89624),c=n(51225),d=n(14040),p=n(71520),f=n(1995),h=n(92950),v=n(42060),m=l(n(4964)),g=n(96796),y=l(n(61379)),x=l(n(59514)),b=n(28144),_=l(n(11969)),j=n(88767),C=l(n(77966)),S=(0,v.createUseStyles)({description:{color:p.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:p.global_link_Color.value+"!important",padding:"8px 0!important"},"& svg":{fill:p.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"8px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},addRepositoryButton:{marginBottom:"24px"},saveButton:{marginRight:"36px",transition:"unset!important"},removeButton:{display:"flex!important",justifyContent:"flex-end"}}),O={name:"",url:"",gpgKey:"",arch:"any",versions:["any"],gpgLoading:!1,expanded:!0,metadataVerification:!1};t.default=function(e){var t,n=e.isLoading,l=(0,h.useState)(!1),v=l[0],P=l[1],w=S(),I=(0,j.useQueryClient)(),T=(0,f.useFormik)({initialValues:[O],validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,g.makeValidationSchema)(),initialTouched:[{name:!1,url:!1}],onSubmit:function(){}}),k=I.getQueryData(b.REPOSITORY_PARAMS_KEY)||{},E=k.distribution_arches,A=void 0===E?[]:E,R=k.distribution_versions,F=void 0===R?[]:R,N=(0,b.useFetchGpgKey)().fetchGpgKey,L=(0,h.useMemo)((function(){var e={},t={};return A.forEach((function(t){var n=t.name,r=t.label;return e[n]=r})),F.forEach((function(e){var n=e.name,r=e.label;return t[n]=r})),{distributionArches:e,distributionVersions:t}}),[A,F]),V=L.distributionArches,M=L.distributionVersions,D=function(){P(!1),T.resetForm()},K=(0,b.useAddContentQuery)(I,(0,g.mapFormikToAPIValues)(T.values)),U=K.mutateAsync,B=K.isLoading,G=1===T.values.length,Q=!T.values.some((function(e){return!e.expanded})),q=function(e,t){var n=a([],T.values,!0);n[e]=r(r({},n[e]),t),T.setValues(n)},Y=function(e,t){var n,i;if(!(null===(i=T.touched[e])||void 0===i?void 0:i[t])){var o=a([],T.touched,!0);o[e]=r(r({},o[e]),((n={})[t]=!0,n)),T.setTouched(o)}},z=function(e,t){var n,r,i,o=!!(null===(n=T.values[e])||void 0===n?void 0:n[t]),a=!!(null===(r=T.errors[e])||void 0===r?void 0:r[t]),l=null===(i=T.touched[e])||void 0===i?void 0:i[t];switch(!0){case a&&l:return"error";case o&&l:return"success";default:return"default"}},H=function(){var e,t=(null===(e=T.touched)||void 0===e?void 0:e.length)-1||0,n=T.touched[t]||{},i=n.name,o=n.url;if(!i&&!o){var l=a([],T.touched,!0);l[t]=r(r({},l[t]),{name:!0,url:!0}),T.setTouched(l)}},W=(0,y.default)(T.values)||[],$=(0,b.useValidateContentList)(),Z=$.mutateAsync,X=$.data;(0,h.useEffect)((function(){v&&(W.length!==T.values.length&&(W=T.values),Z(W.map((function(e){return{name:e.name,url:e.url,gpg_key:e.gpgKey,metadata_verification:e.metadataVerification}}))).then((function(e){return i(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return[4,T.validateForm(W)];case 1:return t=r.sent(),n=(0,g.mapValidationData)(e,t),T.setErrors(n),[2]}}))}))})))}),[W,W.length,T.touched,v]);var J=function(e){var t;(null===(t=T.values[e])||void 0===t?void 0:t.expanded)?(q(e,r(r({},T.values[e]),{expanded:!1})),H()):q(e,r(r({},T.values[e]),{expanded:!0}))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Button,r({id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:n,onClick:function(){return P(!v)}},{children:"Add repositories"})),v?(0,s.jsx)(u.Modal,r({variant:u.ModalVariant.medium,title:"Add custom repositories",ouiaId:"add_custom_repository",help:(0,s.jsx)(u.Popover,r({headerContent:(0,s.jsx)("div",{children:"Add a custom repository"}),bodyContent:(0,s.jsx)("div",{children:"Use this form to enter the values for a new repository."})},{children:(0,s.jsx)(u.Button,r({variant:"plain","aria-label":"Help"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{})}))})),description:(0,s.jsx)("p",r({className:w.description},{children:"Add by completing the form. Default values may be provided automatically."})),isOpen:!0,onClose:D,footer:(0,s.jsxs)(u.Stack,{children:[(0,s.jsx)(u.StackItem,{children:(0,s.jsx)(u.Button,r({isDisabled:!T.isValid||T.values.length>19,className:w.addRepositoryButton,variant:"link",onClick:function(){T.setTouched(a(a([],T.touched,!0),[{name:!1,url:!1}],!1)),T.setValues(a(a([],T.values.map((function(e){return r(r({},e),{expanded:!1})})),!0),[O],!1))},icon:(0,s.jsx)(c.PlusCircleIcon,{}),ouiaId:"add_row"},{children:"Add another repository"}))}),(0,s.jsxs)(u.StackItem,{children:[(0,s.jsx)(u.Button,r({className:w.saveButton,ouiaId:"modal_save",variant:"primary",isLoading:B,isDisabled:!T.isValid||B||(null===(t=T.values)||void 0===t?void 0:t.length)!==(null==W?void 0:W.length),onClick:function(){return U().then(D)}},{children:"Save"}),"confirm"),(0,s.jsx)(u.Button,r({variant:"link",onClick:D,ouiaId:"modal_cancel"},{children:"Cancel"}),"cancel"),(0,s.jsx)(u.Button,r({variant:"link",isDisabled:T.values.length>19,color:"green",onClick:function(){var e=Array.from(Array(20).keys());T.setTouched(e.map((function(){return{name:!0,url:!0}})));var t=e.map((function(e){return{name:(Math.random()+1).toString(36).substring(7),url:g.magicURLList[e],gpgKey:"",arch:e%3?"any":"x86_64",versions:e%2?["any"]:["7"],gpgLoading:!1,expanded:!1,metadataVerification:!1}}));T.setValues(t)}},{children:"Add 20"}),"magic")]})]})},{children:(0,s.jsxs)(d.TableComposable,r({ouiaId:"modal_table_expandable","aria-label":"Expandable table"},{children:[(0,s.jsx)(m.default,r({hide:G},{children:(0,s.jsx)(d.Tbody,r({isExpanded:Q},{children:(0,s.jsxs)(d.Tr,r({onClick:function(){T.setValues(a([],T.values.map((function(e){return r(r({},e),{expanded:!Q})})),!0)),H()},className:w.toggleAllRow},{children:[(0,s.jsx)(d.Td,{className:w.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:Q}}),(0,s.jsx)(d.Td,r({dataLabel:"expand-collapse"},{children:Q?"Collapse all":"Expand all"}))]}))}))})),T.values.map((function(e,t){var n,a,l,f,h,v,y,b,j,S=e.expanded,O=e.name,P=e.url,I=e.arch,k=e.gpgKey,E=e.versions,R=e.gpgLoading,L=e.metadataVerification;return(0,s.jsxs)(d.Tbody,r({isExpanded:G?void 0:S},{children:[(0,s.jsx)(m.default,r({hide:G},{children:(0,s.jsxs)(d.Tr,r({className:w.colHeader},{children:[(0,s.jsx)(d.Td,{onClick:function(){return J(t)},className:w.toggleAction,isActionCell:!0,expand:{rowIndex:t,isExpanded:S}}),(0,s.jsx)(d.Td,r({width:35,onClick:function(){return J(t)},dataLabel:O},{children:O||"New content"})),(0,s.jsx)(d.Td,r({onClick:function(){return J(t)},dataLabel:"validity"},{children:(0,s.jsx)(x.default,{touched:T.touched[t],errors:T.errors[t]})})),(0,s.jsx)(d.Td,r({dataLabel:"removeButton",className:w.removeButton},{children:(0,s.jsx)(m.default,r({hide:1===T.values.length},{children:(0,s.jsx)(u.Button,r({onClick:function(){return function(e){var t=T.values;t.splice(e,1);var n=T.touched;n.splice(e,1);var r=T.errors;r.splice(e,1),T.setTouched(n),T.setErrors(r),T.setValues(t)}(t)},variant:"link",icon:(0,s.jsx)(c.MinusCircleIcon,{})},{children:"Remove"}))}))}))]}))})),(0,s.jsx)(d.Tr,r({isExpanded:G?void 0:S},{children:(0,s.jsx)(d.Td,r({colSpan:4,className:G?"":w.mainContentCol},{children:(0,s.jsxs)(u.Form,{children:[(0,s.jsx)(u.FormGroup,r({label:"Name",isRequired:!0,fieldId:"namegroup",validated:z(t,"name"),helperTextInvalid:null===(n=T.errors[t])||void 0===n?void 0:n.name},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",type:"text",validated:z(t,"name"),onBlur:function(){return Y(t,"name")},onChange:function(e){q(t,{name:e})},value:O||"",placeholder:"Enter name"})})),(0,s.jsx)(u.FormGroup,r({label:"URL",isRequired:!0,fieldId:"url",validated:z(t,"url"),helperTextInvalid:null===(a=T.errors[t])||void 0===a?void 0:a.url},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,type:"url",validated:z(t,"url"),onBlur:function(){return function(e){Y(e,"url"),function(e){var t,n,r,i,o,a,l,s,u,c=null===(t=T.values[e])||void 0===t?void 0:t.url;if((0,g.isValidURL)(c)&&("any"===(null===(n=T.values[e])||void 0===n?void 0:n.arch)||"any"===T.values[e].versions[0])){var d="any"!==(null===(r=T.values[e])||void 0===r?void 0:r.arch)&&(null===(i=T.values[e])||void 0===i?void 0:i.arch)||(null===(o=A.find((function(e){var t=e.name,n=e.label;return c.includes(t)||c.includes(n)})))||void 0===o?void 0:o.label)||"",p=[];if((null===(l=null===(a=T.values[e])||void 0===a?void 0:a.versions)||void 0===l?void 0:l.length)&&"any"!==T.values[e].versions[0])p=null===(s=T.values[e])||void 0===s?void 0:s.versions;else{var f=null===(u=F.find((function(e){var t=e.name,n=e.label;return c.includes(t)||c.includes(n)})))||void 0===u?void 0:u.label;f&&(p=[f])}q(e,{arch:d,versions:p})}}(e)}(t)},onChange:function(e){P!==e&&q(t,{url:e})},value:P||"",placeholder:"https://",id:"url",name:"url",label:"Url"})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package architecture"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"arch"},{children:(0,s.jsx)(_.default,{menuAppendTo:document.body,toggleId:"archSelection"+t,options:Object.keys(V),variant:u.SelectVariant.single,selectedProp:Object.keys(V).find((function(e){return I===V[e]})),setSelected:function(e){return q(t,{arch:V[e]})}})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package OS version"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"version"},{children:(0,s.jsx)(_.default,{menuAppendTo:document.body,toggleId:"versionSelection"+t,options:Object.keys(M),variant:u.SelectVariant.typeaheadMulti,selectedProp:Object.keys(M).filter((function(e){return null==E?void 0:E.includes(M[e])})),placeholderText:(null==E?void 0:E.length)?"":"Any version",setSelected:function(e){return function(e,t){var n=e.map((function(e){return M[e]}));0!==e.length&&"any"!==n[e.length-1]||(n=["any"]),n.length>1&&n.includes("any")&&(n=n.filter((function(e){return"any"!==e}))),q(t,{versions:n})}(e,t)}})})),(0,s.jsx)(u.FormGroup,r({label:"GPG key",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Add GPG Key file or URL"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"gpgKey",validated:z(t,"gpgKey"),helperTextInvalid:null===(l=T.errors[t])||void 0===l?void 0:l.gpgKey},{children:(0,s.jsx)(u.FileUpload,{onBlur:function(){return Y(t,"gpgKey")},validated:z(t,"gpgKey"),id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:k,isLoading:R,spellCheck:!1,onDataChange:function(e){return q(t,{gpgKey:e})},onPaste:function(e){var n=e.clipboardData;return i(void 0,void 0,void 0,(function(){var e,r;return o(this,(function(i){switch(i.label){case 0:return e=n.getData("text"),(0,g.isValidURL)(e)?(q(t,{gpgLoading:!0}),[4,N(e)]):[3,2];case 1:r=i.sent(),q(t,{gpgKey:r,gpgLoading:!1}),i.label=2;case 2:return[2]}}))}))},onTextChange:function(e){var n,i;return q(t,r({gpgKey:e},""===k&&e?{metadataVerification:!!(null===(i=null===(n=null==X?void 0:X[t])||void 0===n?void 0:n.url)||void 0===i?void 0:i.metadata_signature_present)}:{}))},onClearClick:function(){return q(t,{gpgKey:""})},dropzoneProps:{accept:".txt",maxSize:4096,onDropRejected:function(e){return console.log("onDropRejected",e)}},allowEditingUploadedText:!0,browseButtonText:"Upload"})})),(0,s.jsx)(m.default,r({hide:!k},{children:(0,s.jsxs)(u.FormGroup,r({fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0},{children:[(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(h=null===(f=null==X?void 0:X[t])||void 0===f?void 0:f.url)||void 0===h?void 0:h.metadata_signature_present),id:"package-verification-only",name:"package-verification-only",label:"Package verification only",isChecked:!L,onChange:function(){return q(t,{metadataVerification:!1})}}),(0,s.jsx)(C.default,r({show:!0!==(null===(y=null===(v=null==X?void 0:X[t])||void 0===v?void 0:v.url)||void 0===y?void 0:y.metadata_signature_present),content:"This repository's metadata is not signed, metadata verification is not possible."},{children:(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(j=null===(b=null==X?void 0:X[t])||void 0===b?void 0:b.url)||void 0===j?void 0:j.metadata_signature_present),id:"package-and-repository-verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:L,onChange:function(){return q(t,{metadataVerification:!0})}})}))]}))}))]})}))}))]}),t)}))]}))})):""]})}},59514:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),o=n(89624),a=n(71520),l=n(51225),s=n(42060),u=a.global_danger_color_100.value,c=a.global_success_color_100.value,d=(0,s.createUseStyles)({red:{color:u,fontWeight:"bold",fontSize:"14px"},green:{color:c,fontWeight:"bold",fontSize:"14px"}});t.default=function(e){var t=e.touched,n=e.errors,a=e.loading,s=d(),p=["name","url"].every((function(e){return null==t?void 0:t[e]})),f=Object.values(n||{}).every((function(e){return!e})),h=Object.keys(t||{}).filter((function(e){return!!(null==t?void 0:t[e])})).some((function(e){return null==n?void 0:n[e]}));switch(!0){case a:return(0,i.jsx)(o.Spinner,{size:"md"});case p&&f:return(0,i.jsxs)(o.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,i.jsx)(o.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,i.jsx)(l.CheckCircleIcon,{color:c})})),(0,i.jsx)(o.FlexItem,{children:(0,i.jsx)("span",r({className:s.green},{children:"Valid"}))})]}));case h:return(0,i.jsxs)(o.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,i.jsx)(o.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,i.jsx)(l.ExclamationCircleIcon,{color:u})})),(0,i.jsx)(o.FlexItem,{children:(0,i.jsx)("span",r({className:s.red},{children:"Invalid"}))})]}));default:return(0,i.jsx)(i.Fragment,{})}}},96796:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.magicURLList=t.makeValidationSchema=t.mapValidationData=t.mapFormikToAPIValues=t.isValidURL=t.REGEX_URL=void 0;var u=n(44439),c=a(n(87561)),d=s(n(4365));t.REGEX_URL=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,t.isValidURL=function(e){var n=new RegExp(t.REGEX_URL);return e.match(n)},t.mapFormikToAPIValues=function(e){return e.map((function(e){return{name:e.name,url:e.url,distribution_arch:e.arch,distribution_versions:e.versions,gpg_key:e.gpgKey,metadata_verification:e.metadataVerification}}))},t.mapValidationData=function(e,t){var n=function(e){return e.map((function(e){var t=e.url,n=l(e,["url"]);return r(r({},n),{url:r(r({},t),{error:(null==t?void 0:t.error)||(null==t?void 0:t.metadata_present)?null==t?void 0:t.error:"Unable to retrieve YUM Metadata, Recieved HTTP ".concat(null==t?void 0:t.http_code,": ").concat(t?d.default[t.http_code]:"")})})}))}(e),i=n.map((function(e,n){var i=e.name,o=e.url,a=e.gpg_key;return r(r(r(r({},(null==i?void 0:i.error)?{name:null==i?void 0:i.error}:{}),(null==o?void 0:o.error)?{url:null==o?void 0:o.error}:{}),(null==a?void 0:a.error)?{gpgKey:null==a?void 0:a.error}:{}),t[n])}));return i.every((function(e){return(0,u.isEmpty)(e)}))?[]:i},t.makeValidationSchema=function(){return c.addMethod(c.object,"uniqueProperty",(function(e,t){return this.test("unique",t,(function(t){if(!t||!t[e])return!0;if(this.parent.filter((function(e){return e!==t})).some((function(n){return n[e]===t[e]})))throw this.createError({path:"".concat(this.path,".").concat(e)});return!0}))})),c.array(c.object().shape({name:c.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),url:c.string().url("Invalid URL").required("Required")}).uniqueProperty("name","Names must be unique").uniqueProperty("url","Url's must be unique"))},t.magicURLList=["http://mirror.stream.centos.org/9-stream/BaseOS/x86_64/os/","http://mirror.stream.centos.org/SIGs/9/kmods/x86_64/packages-main/","http://mirror.stream.centos.org/9-stream/AppStream/x86_64/os/","https://mirror.linux.duke.edu/pub/centos/8-stream/BaseOS/x86_64/os/","https://download-i2.fedoraproject.org/pub/epel/7/x86_64/","https://download-i2.fedoraproject.org/pub/epel/8/Everything/x86_64/","https://download-i2.fedoraproject.org/pub/epel/9/Everything/x86_64/","http://yum.theforeman.org/pulpcore/3.18/el7/x86_64/","http://yum.theforeman.org/pulpcore/3.18/el8/x86_64/","http://yum.theforeman.org/pulpcore/3.18/el9/x86_64/","http://yum.theforeman.org/katello/4.6/katello/el8/x86_64/","http://yum.theforeman.org/client/3.4/el7/x86_64/","http://yum.theforeman.org/client/3.4/el8/x86_64/","http://yum.theforeman.org/client/3.4/el9/x86_64/","http://yum.theforeman.org/releases/3.4/el8/x86_64/","https://dl.google.com/linux/chrome/rpm/stable/x86_64/","http://yum.theforeman.org/client/3.3/el7/x86_64/","http://yum.theforeman.org/client/3.3/el8/x86_64/","http://yum.theforeman.org/client/3.3/el9/x86_64/","http://yum.theforeman.org/client/3.2/el7/x86_64/","http://yum.theforeman.org/client/3.2/el8/x86_64/","https://developer.download.nvidia.com/compute/cuda/repos/rhel7/x86_64/","https://developer.download.nvidia.com/compute/cuda/repos/rhel8/x86_64/","https://developer.download.nvidia.com/compute/cuda/repos/rhel9/x86_64/","http://download1.rpmfusion.org/nonfree/el/updates/7/x86_64/","http://download1.rpmfusion.org/nonfree/el/updates/8/x86_64/","http://download1.rpmfusion.org/nonfree/el/updates/9/x86_64/","http://download1.rpmfusion.org/free/el/updates/7/x86_64/","http://download1.rpmfusion.org/free/el/updates/8/x86_64/","http://download1.rpmfusion.org/free/el/updates/9/x86_64/","https://rpms.remirepo.net/enterprise/7/safe/x86_64/","https://rpms.remirepo.net/enterprise/8/safe/x86_64/","https://rpms.remirepo.net/enterprise/9/safe/x86_64/","https://rpms.remirepo.net/enterprise/7/remi/x86_64/","https://rpms.remirepo.net/enterprise/8/remi/x86_64/","http://yum.theforeman.org/pulpcore/3.9/el7/x86_64/","http://yum.theforeman.org/katello/nightly/katello/el8/x86_64/"]},46444:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),l=n(92950),s=n(89624),u=o(n(11969)),c=n(51225),d=n(71520),p=o(n(4964)),f=n(88767),h=n(28144),v=o(n(61379)),m=o(n(95690)),g=n(42060),y=n(44439),x=(0,g.createUseStyles)({chipsContainer:{backgroundColor:d.global_BackgroundColor_100.value,paddingTop:"16px"},clearFilters:{marginLeft:"16px"},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:d.global_secondary_color_100.value,position:"relative",top:"3px",left:"-5px",pointerEvents:"none"}});t.default=function(e){var t=e.isLoading,n=e.setFilterData,o=e.filterData,d=x(),g=(0,f.useQueryClient)(),b=(0,l.useState)("Name/URL"),_=b[0],j=b[1],C=(0,l.useState)({}),S=C[0],O=C[1],P=(0,l.useState)({}),w=P[0],I=P[1],T=(0,l.useState)(""),k=T[0],E=T[1],A=(0,l.useState)([]),R=A[0],F=A[1],N=(0,l.useState)([]),L=N[0],V=N[1],M=g.getQueryData(h.REPOSITORY_PARAMS_KEY)||{},D=M.distribution_arches,K=void 0===D?[]:D,U=M.distribution_versions,B=void 0===U?[]:U,G=function(){E(""),F([]),V([]),n({searchQuery:"",versions:[],arches:[]})};(0,l.useEffect)((function(){0!==o.arches.length||0!==o.versions.length||""!==o.searchQuery||""===k&&0===L.length&&0===R.length||G()}),[o]);var Q=(0,v.default)({searchQuery:k,selectedVersions:R,selectedArches:L}),q=Q.searchQuery,Y=Q.selectedVersions,z=Q.selectedArches,H=function(e,t){var n="arch"===e?K:B,r=[];return t.forEach((function(e){var t=n.find((function(t){return t.name===e}));t&&r.push(t.label)})),r};(0,l.useEffect)((function(){n({searchQuery:q,versions:H("version",Y),arches:H("arch",z)})}),[q,Y,z]);var W=function(e,t,n){n(i([],t,!0).filter((function(t){return t!==e})))};return(0,l.useEffect)((function(){if((0,y.isEmpty)(S)&&(0,y.isEmpty)(w)&&0!==K.length&&0!==B.length){var e={},t={};K.forEach((function(t){return e[t.name]=t.label})),B.forEach((function(e){return t[e.name]=e.label})),O(t),I(e)}}),[K,B]),(0,a.jsxs)(s.Flex,{children:[(0,a.jsx)(s.FlexItem,{children:(0,a.jsxs)(s.InputGroup,{children:[(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(u.default,{toggleId:"filterSelectionDropdown",ouiaId:"filter_type",isDisabled:t,options:["Name/URL","Version","Architecture"],variant:s.SelectVariant.single,selectedProp:_,setSelected:j,placeholderText:"filter",toggleIcon:(0,a.jsx)(c.FilterIcon,{})})}),(0,a.jsx)(s.FlexItem,{children:function(){switch(_){case"Name/URL":return(0,a.jsxs)(s.Flex,{children:[(0,a.jsx)(s.TextInput,{isDisabled:t,id:"search",ouiaId:"filter_search",placeholder:"Filter by name/url",value:k,onChange:function(e){return E(e)},className:d.searchInput}),(0,a.jsx)(c.SearchIcon,{size:"sm",className:d.searchIcon})]});case"Version":return(0,a.jsx)(u.default,{toggleId:"versionSelect",ouiaId:"filter_version",isDisabled:t,options:Object.keys(S),variant:s.SelectVariant.checkbox,selectedProp:R,setSelected:F,placeholderText:"Filter by version"});case"Architecture":return(0,a.jsx)(u.default,{toggleId:"archSelect",ouiaId:"filter_arch",isDisabled:t,options:Object.keys(w),variant:s.SelectVariant.checkbox,selectedProp:L,setSelected:V,placeholderText:"Filter by architecture"});default:return(0,a.jsx)(a.Fragment,{})}}()})]})}),(0,a.jsx)(s.FlexItem,{children:(0,a.jsx)(m.default,{isLoading:t})}),(0,a.jsx)(p.default,r({hide:!(R.length||L.length||""!=k)},{children:(0,a.jsxs)(s.FlexItem,r({fullWidth:{default:"fullWidth"},className:d.chipsContainer},{children:[(0,a.jsx)(s.ChipGroup,r({categoryName:"Version"},{children:R.map((function(e){return(0,a.jsx)(s.Chip,r({onClick:function(){return W(e,R,F)}},{children:e}),e)}))})),(0,a.jsx)(s.ChipGroup,r({categoryName:"Architecture"},{children:L.map((function(e){return(0,a.jsx)(s.Chip,r({onClick:function(){return W(e,L,V)}},{children:e}),e)}))})),""!==k&&(0,a.jsx)(s.ChipGroup,r({categoryName:"Name/URL"},{children:(0,a.jsx)(s.Chip,r({onClick:function(){return E("")}},{children:k}),"search_chip")})),(""!==q&&""!==k||!!(null==R?void 0:R.length)||!!(null==L?void 0:L.length))&&(0,a.jsx)(s.Button,r({className:d.clearFilters,onClick:G,variant:"link",isInline:!0},{children:"Clear filters"}))]}))}))]})}},75563:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),a=n(89624),l=n(14040),s=n(71520),u=n(92950),c=n(42060),d=n(66865),p=n(28144),f=i(n(46444)),h=i(n(4964)),v=i(n(67973)),m=n(88767),g=i(n(28226)),y=i(n(3947)),x=i(n(78466)),b=i(n(84348)),_=(0,c.createUseStyles)({mainContainer:{backgroundColor:s.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},mainContainer100Height:{composes:["$mainContainer"],minHeight:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0}});t.default=function(){var e,t,n=_(),i=(0,m.useQueryClient)(),s=Number(localStorage.getItem("perPage"))||20,c=(0,u.useState)(1),j=c[0],C=c[1],S=(0,u.useState)(s),O=S[0],P=S[1],w=(0,u.useState)(!1),I=w[0],T=w[1],k=(0,u.useState)([]),E=k[0],A=k[1],R=(0,u.useState)(0),F=R[0],N=R[1],L=(0,u.useState)("asc"),V=L[0],M=L[1],D=(0,u.useState)({searchQuery:"",versions:[],arches:[]}),K=D[0],U=D[1],B=function(){return U({searchQuery:"",versions:[],arches:[]})},G=!(null===(e=K.arches)||void 0===e?void 0:e.length)&&""===K.searchQuery&&!(null===(t=K.versions)||void 0===t?void 0:t.length),Q=(0,p.useRepositoryParams)(),q=Q.isLoading,Y=Q.error,z=Q.isError,H=Q.data,W=void 0===H?{distribution_versions:[],distribution_arches:[]}:H,$=W.distribution_versions,Z=W.distribution_arches,X=["name","distribution_arch","distribution_versions","status","package_count"],J=function(){return X[F]+":"+V},ee=(0,p.useContentListQuery)(j,O,K,J()),te=ee.isLoading,ne=ee.error,re=ee.isError,ie=ee.isFetching,oe=ee.data,ae=void 0===oe?{data:[],meta:{count:0,limit:20,offset:0}}:oe,le=(0,p.useDeleteContentItemMutate)(i,j,O,K,J()),se=le.mutateAsync,ue=le.isLoading||ie||q,ce=function(e,t){return C(t)},de=function(e,t,n){localStorage.setItem("perPage",t.toString()),P(t),C(n)},pe=["Name","Architecture","Versions","Packages","Status"],fe=function(e){var t;return null===(t=Z.find((function(t){var n=t.label;return e===n})))||void 0===t?void 0:t.name};if(re)throw ne;if(z)throw Y;var he=ae.data,ve=void 0===he?[]:he,me=ae.meta.count,ge=void 0===me?0:me,ye=(0,u.useCallback)((function(e){return[{isDisabled:ue||!(null==e?void 0:e.uuid),title:"Delete",onClick:function(){return se(null==e?void 0:e.uuid).then((function(){j>1&&ge/O+1>=j&&(ge-1)%O==0&&C(j-1)}))}},{isDisabled:ue,title:"Edit",onClick:function(){A([e]),T(!0)}}]}),[ue]),xe=0===ge;return xe&&G&&!te?(0,o.jsx)(a.Bullseye,{children:(0,o.jsx)(v.default,{notFiltered:G,clearFilters:B})}):(0,o.jsxs)(a.Grid,r({className:xe?n.mainContainer100Height:n.mainContainer},{children:[(0,o.jsx)(g.default,{values:E,open:I,setClosed:function(){T(!1),A([])}}),(0,o.jsxs)(a.Flex,r({className:n.topContainer},{children:[(0,o.jsx)(f.default,{isLoading:te,setFilterData:function(e){U(e),C(1)},filterData:K}),(0,o.jsx)(a.FlexItem,{children:(0,o.jsx)(h.default,r({hide:xe},{children:(0,o.jsx)(a.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",isDisabled:te,itemCount:ge,perPage:O,page:j,onSetPage:ce,isCompact:!0,onPerPageSelect:de})}))})]})),(0,o.jsx)(h.default,r({hide:!te},{children:(0,o.jsx)(a.Grid,r({className:n.mainContainer100Height},{children:(0,o.jsx)(d.SkeletonTable,{rowSize:O,colSize:pe.length,variant:l.TableVariant.compact})}))})),(0,o.jsx)(h.default,r({hide:xe||te},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.TableComposable,r({"aria-label":"Custom repositories table",ouiaId:"content_sources_table",variant:"compact"},{children:[(0,o.jsx)(l.Thead,{children:(0,o.jsxs)(l.Tr,{children:[pe.map((function(e,t){return(0,o.jsx)(l.Th,r({sort:(n=t,{sortBy:{index:F,direction:V,defaultDirection:"asc"},onSort:function(e,t,n){N(t),M(n)},columnIndex:n})},{children:e}),e+"column");var n})),(0,o.jsx)(l.Th,{children:(0,o.jsx)(a.Spinner,{size:"md",className:ue?"":n.invisible})})]})}),(0,o.jsx)(l.Tbody,{children:ve.map((function(e){var t,n=e.uuid,i=e.name,a=e.url,s=e.distribution_arch,u=e.package_count,c=e.distribution_versions,d=e.status,p=e.last_introspection_error;return(0,o.jsxs)(l.Tr,{children:[(0,o.jsxs)(l.Td,{children:[i,(0,o.jsx)("br",{}),(0,o.jsx)(x.default,{href:a})]}),(0,o.jsx)(l.Td,{children:fe(s)}),(0,o.jsx)(l.Td,{children:(t=c,$.filter((function(e){var n=e.label;return null==t?void 0:t.includes(n)})).map((function(e){return e.name})).join(", "))}),(0,o.jsx)(l.Td,{children:(0,o.jsx)(b.default,{count:u,status:d})}),(0,o.jsx)(l.Td,{children:(0,o.jsx)(y.default,{status:d,error:p})}),(0,o.jsx)(l.Td,r({isActionCell:!0},{children:(0,o.jsx)(l.ActionsColumn,{items:ye(e)})}))]},n)}))})]})),(0,o.jsxs)(a.Flex,r({className:n.bottomContainer},{children:[(0,o.jsx)(a.FlexItem,{}),(0,o.jsx)(a.FlexItem,{children:(0,o.jsx)(a.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:ge,perPage:O,page:j,onSetPage:ce,variant:a.PaginationVariant.bottom,onPerPageSelect:de})})]}))]})})),(0,o.jsx)(h.default,r({hide:!xe||te},{children:(0,o.jsx)(v.default,{notFiltered:G,clearFilters:B})}))]}))}},67973:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),a=n(89624),l=n(45718),s=n(42060),u=i(n(95690)),c=(0,s.createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1}});t.default=function(e){var t=e.notFiltered,n=e.clearFilters,i=c();return(0,o.jsxs)(a.EmptyState,r({variant:a.EmptyStateVariant.full,className:i.emptyStateContainer},{children:[(0,o.jsx)(a.EmptyStateIcon,{icon:t?l.PlusCircleIcon:l.SearchIcon}),(0,o.jsx)(a.Title,r({headingLevel:"h2",size:"lg"},{children:t?"No custom repositories":"No custom repositories match the filter criteria"})),(0,o.jsx)(a.EmptyStateBody,{children:t?"To get started, create a custom repository":"Clear all filters to show more results"}),t?(0,o.jsx)(u.default,{}):(0,o.jsx)(a.Button,r({ouiaId:"clear_filters",variant:"link",onClick:n},{children:"Clear all filters"}))]}))}},84348:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),o=n(89624),a=n(42060),l=n(71520),s=(0,a.createUseStyles)({text:{color:l.global_disabled_color_100.value,width:"fit-content"}});t.default=function(e){var t=e.count,n=e.status,a=s();return t||"Pending"!==n?(0,i.jsx)(i.Fragment,{children:t}):(0,i.jsx)(o.Tooltip,r({isContentLeftAligned:!0,content:"Repository has not been introspected yet"},{children:(0,i.jsx)(o.Text,r({className:a.text},{children:"N/A"}))}))}},3947:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),a=n(51225),l=n(89624),s=i(n(23138)),u=n(71520),c=u.global_danger_color_100.value,d=u.global_success_color_100.value,p=u.global_warning_color_100.value,f=u.global_info_color_100.value;t.default=function(e){var t=e.status,n=e.error;switch(t){case"Valid":return(0,o.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,o.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,o.jsx)(a.CheckCircleIcon,{color:d})})),(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(s.default,r({color:"green"},{children:"Valid"}))})]}));case"Invalid":return(0,o.jsx)(l.Tooltip,r({position:"top-start",content:n},{children:(0,o.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,o.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,o.jsx)(a.ExclamationCircleIcon,{color:c})})),(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(s.default,r({color:"red"},{children:"Invalid"}))})]}))}));case"Unavailable":return(0,o.jsx)(l.Tooltip,r({position:"top-start",content:n},{children:(0,o.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,o.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,o.jsx)(a.ExclamationTriangleIcon,{color:p})})),(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(s.default,r({color:"gold"},{children:"Unavailable"}))})]}))}));case"Pending":return(0,o.jsx)(l.Tooltip,r({position:"top-start",content:"Repository has not been introspected yet"},{children:(0,o.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,o.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,o.jsx)(a.InfoCircleIcon,{color:f})})),(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(s.default,r({color:"blue"},{children:"Pending"}))})]}))}));default:return(0,o.jsx)(o.Fragment,{})}}},23138:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),o=n(42060),a=n(71520),l=a.global_danger_color_200.value,s=a.global_success_color_200.value,u=a.global_warning_color_200.value,c=a.global_info_color_200.value,d=(0,o.createUseStyles)({red:{color:l,fontWeight:"bold",fontSize:"14px"},green:{color:s,fontWeight:"bold",fontSize:"14px"},gold:{color:u,fontWeight:"bold",fontSize:"14px"},blue:{color:c,fontWeight:"bold",fontSize:"14px"}});t.default=function(e){var t=e.color,n=e.children,o=d();return(0,i.jsx)("span",r({className:o[t]},{children:n}))}},11969:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),l=n(89624),s=n(92950);t.default=function(e){var t=e.options,n=e.variant,u=e.selectedProp,c=e.setSelected,d=e.toggleIcon,p=e.placeholderText,f=e.isDisabled,h=i(e,["options","variant","selectedProp","setSelected","toggleIcon","placeholderText","isDisabled"]),v=Array.isArray(u)?u:[u],m=(0,s.useState)(!1),g=m[0],y=m[1],x=t.map((function(e,t){return(0,a.jsx)(l.SelectOption,{value:e},e+t)}));return(0,a.jsx)(l.Select,r({isDisabled:f,variant:n,onSelect:function(e,t){switch(n){case l.SelectVariant.single:c(t),y(!1);break;case l.SelectVariant.typeaheadMulti:case l.SelectVariant.checkbox:if(Array.isArray(u)){if(v.includes(t)){var r=v.filter((function(e){return e!==t}));c(r);break}c(o(o([],v,!0),[t],!1));break}}},selections:v,isOpen:g,onToggle:function(e){return y(e)},placeholderText:p,isCheckboxSelectionBadgeHidden:!0,toggleIcon:d},h,{children:x}))}},28226:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),u=n(89624),c=n(51225),d=n(14040),p=n(71520),f=n(1995),h=n(92950),v=n(42060),m=l(n(4964)),g=l(n(61379)),y=n(28144),x=l(n(11969)),b=n(88767),_=n(96796),j=l(n(59514)),C=n(17407),S=n(44439),O=l(n(77966)),P=p.global_success_color_100.value,w=(0,v.createUseStyles)({description:{color:p.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:p.global_link_Color.value+"!important",padding:"12px 0!important"},"& svg":{fill:p.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"12px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},saveButton:{marginRight:"36px",transition:"unset!important"}});t.default=function(e){var t=e.values,n=e.open,l=e.setClosed;if(!n)return(0,s.jsx)(s.Fragment,{});var v=(0,C.mapToDefaultFormikValues)(t),I=w(),T=(0,b.useQueryClient)(),k=(0,f.useFormik)({initialValues:v,validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,_.makeValidationSchema)(),initialTouched:t.map((function(){return{name:!0,url:!0}})),onSubmit:function(){}}),E=(0,h.useMemo)((function(){return!(0,S.isEqual)(v,k.values)}),[v,k.values]),A=T.getQueryData(y.REPOSITORY_PARAMS_KEY)||{},R=A.distribution_arches,F=void 0===R?[]:R,N=A.distribution_versions,L=void 0===N?[]:N,V=(0,h.useMemo)((function(){var e={},t={};return F.forEach((function(t){var n=t.name,r=t.label;return e[n]=r})),L.forEach((function(e){var n=e.name,r=e.label;return t[n]=r})),{distributionArches:e,distributionVersions:t}}),[F,L]),M=V.distributionArches,D=V.distributionVersions,K=function(){l(),k.resetForm()},U=(0,y.useEditContentQuery)(T,(0,C.mapFormikToEditAPIValues)(k.values)),B=U.mutateAsync,G=U.isLoading,Q=(0,y.useFetchGpgKey)().fetchGpgKey,q=1===k.values.length,Y=!k.values.some((function(e){return!e.expanded})),z=function(e,t){var n=a([],k.values,!0);n[e]=r(r({},n[e]),t),k.setValues(n)},H=function(e,t){var n,r,i,o=(0,S.isEqual)(null===(n=v[e])||void 0===n?void 0:n[t],null===(r=k.values[e])||void 0===r?void 0:r[t]);switch(!0){case!!(null===(i=k.errors[e])||void 0===i?void 0:i[t]):return"error";case o:return"default";case!o:return"success";default:return"default"}},W=(0,g.default)(k.values),$=(0,y.useValidateContentList)(),Z=$.mutateAsync,X=$.data;(0,h.useEffect)((function(){n&&Z(W.map((function(e){return{name:e.name,url:e.url,gpg_key:e.gpgKey,metadata_verification:e.metadataVerification,uuid:e.uuid}}))).then((function(e){return i(void 0,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return[4,k.validateForm(W)];case 1:return t=r.sent(),n=(0,_.mapValidationData)(e,t),k.setErrors(n),[2]}}))}))}))}),[W,t,n]);var J=function(e){var t;(null===(t=k.values[e])||void 0===t?void 0:t.expanded)?z(e,r(r({},k.values[e]),{expanded:!1})):z(e,r(r({},k.values[e]),{expanded:!0}))};return(0,s.jsx)(u.Modal,r({variant:u.ModalVariant.medium,title:"Edit custom repository",ouiaId:"edit_custom_repository",help:(0,s.jsx)(u.Popover,r({headerContent:(0,s.jsx)("div",{children:"Edit custom repository"}),bodyContent:(0,s.jsx)("div",{children:"Use this form to edit the values of an existing repository."})},{children:(0,s.jsx)(u.Button,r({variant:"plain","aria-label":"Help"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{})}))})),description:(0,s.jsx)("p",r({className:I.description},{children:"Edit by completing the form. Default values may be provided automatically."})),isOpen:n,onClose:K,footer:(0,s.jsx)(u.Stack,{children:(0,s.jsxs)(u.StackItem,{children:[(0,s.jsx)(u.Button,r({className:I.saveButton,variant:"primary",isLoading:G,isDisabled:!k.isValid||G||!E||!(0,S.isEqual)(k.values,W),onClick:function(){B().then(K)}},{children:E?"Save changes":"No changes"}),"confirm"),(0,s.jsx)(u.Button,r({variant:"link",onClick:K},{children:"Cancel"}),"cancel")]})})},{children:(0,s.jsxs)(d.TableComposable,r({"aria-label":"Expandable table"},{children:[(0,s.jsx)(m.default,r({hide:q},{children:(0,s.jsx)(d.Tbody,r({isExpanded:Y},{children:(0,s.jsxs)(d.Tr,r({onClick:function(){k.setValues(a([],k.values.map((function(e){return r(r({},e),{expanded:!Y})})),!0))},className:I.toggleAllRow},{children:[(0,s.jsx)(d.Td,{className:I.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:Y}}),(0,s.jsx)(d.Td,r({dataLabel:"expand-collapse"},{children:Y?"Collapse all":"Expand all"}))]}))}))})),k.values.map((function(e,t){var n,a,l,f,h,v,g,y,b,C=e.expanded,S=e.name,w=e.url,T=e.arch,E=e.gpgKey,A=e.versions,R=e.gpgLoading,N=e.metadataVerification;return(0,s.jsxs)(d.Tbody,r({isExpanded:q?void 0:C},{children:[(0,s.jsx)(m.default,r({hide:q},{children:(0,s.jsxs)(d.Tr,r({className:I.colHeader},{children:[(0,s.jsx)(d.Td,{onClick:function(){return J(t)},className:I.toggleAction,isActionCell:!0,expand:{rowIndex:t,isExpanded:C}}),(0,s.jsx)(d.Td,r({width:35,onClick:function(){return J(t)},dataLabel:S},{children:S||"New content"})),(0,s.jsx)(d.Td,r({onClick:function(){return J(t)},dataLabel:"validity"},{children:(0,s.jsx)(j.default,{touched:k.touched[t],errors:k.errors[t]})}))]}))})),(0,s.jsx)(d.Tr,r({isExpanded:q?void 0:C},{children:(0,s.jsx)(d.Td,r({colSpan:4,className:q?"":I.mainContentCol},{children:(0,s.jsxs)(u.Form,{children:[(0,s.jsx)(u.FormGroup,r({label:"Name",isRequired:!0,fieldId:"namegroup",validated:H(t,"name"),helperTextInvalid:null===(n=k.errors[t])||void 0===n?void 0:n.name},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",type:"text",validated:H(t,"name"),onChange:function(e){z(t,{name:e})},value:S||"",placeholder:"Enter name"})})),(0,s.jsx)(u.FormGroup,r({label:"URL",isRequired:!0,fieldId:"url",validated:H(t,"url"),helperTextInvalid:null===(a=k.errors[t])||void 0===a?void 0:a.url},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,type:"url",validated:H(t,"url"),onBlur:function(){return function(e){!function(e){var t,n,r,i,o,a,l,s,u,c=null===(t=k.values[e])||void 0===t?void 0:t.url;if((0,_.isValidURL)(c)&&("any"===(null===(n=k.values[e])||void 0===n?void 0:n.arch)||"any"===k.values[e].versions[0])){var d="any"!==(null===(r=k.values[e])||void 0===r?void 0:r.arch)&&(null===(i=k.values[e])||void 0===i?void 0:i.arch)||(null===(o=F.find((function(e){var t=e.name,n=e.label;return c.includes(t)||c.includes(n)})))||void 0===o?void 0:o.label)||"",p=[];if((null===(l=null===(a=k.values[e])||void 0===a?void 0:a.versions)||void 0===l?void 0:l.length)&&"any"!==k.values[e].versions[0])p=null===(s=k.values[e])||void 0===s?void 0:s.versions;else{var f=null===(u=L.find((function(e){var t=e.name,n=e.label;return c.includes(t)||c.includes(n)})))||void 0===u?void 0:u.label;f&&(p=[f])}z(e,{arch:d,versions:p})}}(e)}(t)},onChange:function(e){w!==e&&z(t,{url:e})},value:w||"",placeholder:"https://",id:"url",name:"url",label:"Url"})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package architecture"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"arch"},{children:(0,s.jsx)(x.default,{validated:H(t,"arch"),menuAppendTo:document.body,toggleId:"archSelection"+t,options:Object.keys(M),variant:u.SelectVariant.single,selectedProp:Object.keys(M).find((function(e){return T===M[e]})),setSelected:function(e){return z(t,{arch:M[e]})}})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package OS version"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"version"},{children:(0,s.jsx)(x.default,{validated:H(t,"versions"),menuAppendTo:document.body,toggleId:"versionSelection"+t,options:Object.keys(D),variant:u.SelectVariant.typeaheadMulti,selectedProp:Object.keys(D).filter((function(e){return null==A?void 0:A.includes(D[e])})),placeholderText:(null==A?void 0:A.length)?"":"Any version",setSelected:function(e){return function(e,t){var n=e.map((function(e){return D[e]}));0!==e.length&&"any"!==n[e.length-1]||(n=["any"]),n.length>1&&n.includes("any")&&(n=n.filter((function(e){return"any"!==e}))),z(t,{versions:n})}(e,t)}})})),(0,s.jsx)(u.FormGroup,r({label:"GPG key",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Add GPG Key file or URL"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"gpgKey",validated:H(t,"gpgKey"),helperTextInvalid:null===(l=k.errors[t])||void 0===l?void 0:l.gpgKey},{children:(0,s.jsx)(u.FileUpload,{id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:E,isLoading:R,validated:H(t,"gpgKey"),spellCheck:!1,onDataChange:function(e){return z(t,{gpgKey:e})},onPaste:function(e){var n=e.clipboardData;return i(void 0,void 0,void 0,(function(){var e,r;return o(this,(function(i){switch(i.label){case 0:return e=n.getData("text"),(0,_.isValidURL)(e)?(z(t,{gpgLoading:!0}),[4,Q(e)]):[3,2];case 1:r=i.sent(),z(t,{gpgKey:r,gpgLoading:!1}),i.label=2;case 2:return[2]}}))}))},onTextChange:function(e){var n,i;return z(t,r({gpgKey:e},""===E&&e?{metadataVerification:!!(null===(i=null===(n=null==X?void 0:X[t])||void 0===n?void 0:n.url)||void 0===i?void 0:i.metadata_signature_present)}:{}))},onClearClick:function(){return z(t,{gpgKey:""})},dropzoneProps:{accept:".txt",maxSize:4096,onDropRejected:function(e){return console.log("onDropRejected",e)}},allowEditingUploadedText:!0,browseButtonText:"Upload"})})),(0,s.jsx)(m.default,r({hide:!E},{children:(0,s.jsxs)(u.FormGroup,r({fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0},{children:[(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(h=null===(f=null==X?void 0:X[t])||void 0===f?void 0:f.url)||void 0===h?void 0:h.metadata_signature_present),id:"package verification only",name:"package-verification-only",label:"Package verification only",isChecked:!N,onChange:function(){return z(t,{metadataVerification:!1})}}),(0,s.jsx)(O.default,r({show:!0!==(null===(g=null===(v=null==X?void 0:X[t])||void 0===v?void 0:v.url)||void 0===g?void 0:g.metadata_signature_present),content:"This repository's metadata is not signed, metadata verification is not possible."},{children:(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(b=null===(y=null==X?void 0:X[t])||void 0===y?void 0:y.url)||void 0===b?void 0:b.metadata_signature_present),id:"Package and metadata verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:N,onChange:function(){return z(t,{metadataVerification:!0})}})})),(0,s.jsx)(m.default,r({hide:"success"!==H(t,"metadataVerification")},{children:(0,s.jsx)(c.CheckCircleIcon,{noVerticalAlign:!0,color:P})}))]}))}))]})}))}))]}),t)}))]}))}))}},17407:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToDefaultFormikValues=t.mapFormikToEditAPIValues=void 0,t.mapFormikToEditAPIValues=function(e){return e.map((function(e){var t=e.name,n=e.url,r=e.arch,i=e.versions,o=e.gpgKey,a=e.metadataVerification;return{uuid:e.uuid,name:t,url:n,distribution_arch:r,distribution_versions:i,gpg_key:o,metadata_verification:a}}))},t.mapToDefaultFormikValues=function(e){return e.map((function(t,n){var r=t.name,i=t.url,o=t.distribution_arch,a=t.distribution_versions,l=t.uuid;return{name:r,url:i,arch:o,versions:a,gpgKey:t.gpg_key,gpgLoading:!1,metadataVerification:t.metadata_verification,expanded:n+1===e.length,uuid:l}}))}},3810:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPage=void 0;var i=n(85893),o=n(66865).ErrorBoundary;t.ErrorPage=function(e){var t=e.children;return(0,i.jsx)(o,r({headerTitle:"Content Sources",errorTitle:"Unhandled error",errorDescription:"There was a problem trying to process your request"},{children:t}))}},4964:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(85893);t.default=function(e){var t=e.hide,n=e.children;return t?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(r.Fragment,{children:n})}},77966:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),a=n(89624);t.default=function(e){var t=e.show,n=e.children,l=i(e,["show","children"]);return t?(0,o.jsx)(a.Tooltip,r({},l,{children:n})):(0,o.jsx)(o.Fragment,{children:n})}},78466:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),o=n(51225),a=(0,n(42060).createUseStyles)({link:{alignItems:"center",display:"flex"},icon:{marginLeft:"5px"}});t.default=function(e){var t=e.href,n=a();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("a",r({href:t,className:n.link,rel:"noreferrer",target:"_blank"},{children:[t," ",(0,i.jsx)(o.ExternalLinkAltIcon,{className:n.icon})]}))})}},13299:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),a=n(89624),l=n(71520),s=n(66865),u=n(42060),c=i(n(75563)),d=(0,u.createUseStyles)({subtext:{color:l.global_Color_100.value}}),p=s.PageHeader;t.default=function(){var e=d();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.PageHeaderTitle,{title:"Custom Repositories"}),(0,o.jsx)(a.Text,r({className:e.subtext},{children:"View all custom repositories within your organization"}))]})}),(0,o.jsx)(s.Main,{children:(0,o.jsx)(c.default,{})})]})}},50182:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGpgKey=t.validateContentListItems=t.getRepositoryParams=t.EditContentListItem=t.AddContentListItems=t.deleteContentListItem=t.getContentList=void 0;var a=o(n(78991));t.getContentList=function(e,t,n,o){return r(void 0,void 0,void 0,(function(){var r,l,s;return i(this,(function(i){switch(i.label){case 0:return r=n.searchQuery,l=n.versions.join(","),s=n.arches.join(","),[4,a.default.get("/api/content-sources/v1/repositories/?offset=".concat((e-1)*t,"&limit=").concat(t,"&search=").concat(r,"&version=").concat(l,"&arch=").concat(s,"&sort_by=").concat(o))];case 1:return[2,i.sent().data]}}))}))},t.deleteContentListItem=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,a.default.delete("/api/content-sources/v1/repositories/".concat(e))];case 1:return[2,t.sent().data]}}))}))},t.AddContentListItems=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,a.default.post("/api/content-sources/v1.0/repositories/bulk_create/",e)];case 1:return[2,t.sent().data]}}))}))},t.EditContentListItem=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,a.default.patch("/api/content-sources/v1.0/repositories/".concat(e.uuid),e)];case 1:return[2,t.sent().data]}}))}))},t.getRepositoryParams=function(){return r(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,a.default.get("/api/content-sources/v1/repository_parameters/")];case 1:return[2,e.sent().data]}}))}))},t.validateContentListItems=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,a.default.post("/api/content-sources/v1.0/repository_parameters/validate/",e)];case 1:return[2,t.sent().data]}}))}))},t.getGpgKey=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,a.default.post("/api/content-sources/v1/repository_parameters/external_gpg_key/",{url:e})];case 1:return[2,t.sent().data]}}))}))}},28144:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useFetchGpgKey=t.useRepositoryParams=t.useDeleteContentItemMutate=t.useValidateContentList=t.useEditContentQuery=t.useAddContentQuery=t.useContentListQuery=t.CREATE_PARAMS_KEY=t.REPOSITORY_PARAMS_KEY=t.CONTENT_LIST_KEY=void 0;var l=n(89624),s=n(88767),u=n(86243),c=n(50182);t.CONTENT_LIST_KEY="CONTENT_LIST_KEY",t.REPOSITORY_PARAMS_KEY="REPOSITORY_PARAMS_KEY",t.CREATE_PARAMS_KEY="CREATE_PARAMS_KEY",t.useContentListQuery=function(e,n,r,i){return(0,s.useQuery)(a([t.CONTENT_LIST_KEY,e,n,i],Object.values(r),!0),(function(){return(0,c.getContentList)(e,n,r,i)}),{keepPreviousData:!0,staleTime:2e4,optimisticResults:!0})},t.useAddContentQuery=function(e,n){var r=(0,u.useNotification)().notify;return(0,s.useMutation)((function(){return(0,c.AddContentListItems)(n)}),{onSuccess:function(){var i,o=(null==n?void 0:n.length)>1?"".concat(null==n?void 0:n.length," custom repositories added"):'Custom repository "'.concat(null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.name,'" added');r({variant:l.AlertVariant.success,title:o,description:"Repository introspection may take some time"}),e.invalidateQueries(t.CONTENT_LIST_KEY)},onError:function(e){var t,n,i,o,a="An error occurred";switch(typeof(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)){case"string":a=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data;break;case"object":null===(o=null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.data.find((function(e){var t=e.error;if(t)return a=t,!0})))||void 0===o||o.error}r({variant:l.AlertVariant.danger,title:"Error adding items to content list",description:a})}})},t.useEditContentQuery=function(e,n){var r=(0,u.useNotification)().notify;return(0,s.useMutation)((function(){return(0,c.EditContentListItem)(n[0])}),{onSuccess:function(){r({variant:l.AlertVariant.success,title:"Successfully edited ".concat(n.length," ").concat(n.length>1?"items":"item")}),e.invalidateQueries(t.CONTENT_LIST_KEY)},onError:function(e){var t,n,i,o,a="An error occurred";switch(typeof(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)){case"string":a=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data;break;case"object":null===(o=null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.data.find((function(e){var t=e.error;if(t)return a=t,!0})))||void 0===o||o.error}r({variant:l.AlertVariant.danger,title:"Error editing items on content list",description:a})}})},t.useValidateContentList=function(){var e=(0,u.useNotification)().notify;return(0,s.useMutation)((function(e){return(0,c.validateContentListItems)(e)}),{onError:function(t){var n=t;e({variant:l.AlertVariant.danger,title:"Error validating form fields",description:null==n?void 0:n.message})}})},t.useDeleteContentItemMutate=function(e,n,d,p,f){var h=a(a([t.CONTENT_LIST_KEY,n,d],Object.values(p),!0),[f],!1),v=(0,u.useNotification)().notify;return(0,s.useMutation)(c.deleteContentListItem,{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return[4,e.cancelQueries(h)];case 1:return i.sent(),n=e.getQueryData(h)||{},e.setQueryData(h,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.filter((function(e){return t!==e.uuid})),meta:n.meta?r(r({},n.meta),{count:n.meta.count?n.meta.count-1:1}):void 0})})),[2,{previousData:n,queryClient:e}]}}))}))},onSuccess:function(n,r,i){var o=i.previousData;e.setQueriesData(t.CONTENT_LIST_KEY,(function(e){var t,n;return void 0===e&&(e={}),(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.count)&&(e.meta.count=(null===(n=null==o?void 0:o.meta)||void 0===n?void 0:n.count)-1),e})),e.invalidateQueries(t.CONTENT_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(h,i);var o=t;v({variant:l.AlertVariant.danger,title:"Error deleting item from content list",description:null==o?void 0:o.message})}}})},t.useRepositoryParams=function(){return(0,s.useQuery)(t.REPOSITORY_PARAMS_KEY,c.getRepositoryParams,{keepPreviousData:!0,staleTime:1/0})},t.useFetchGpgKey=function(){var e=(0,u.useNotification)().notify;return{fetchGpgKey:function(t){return i(void 0,void 0,void 0,(function(){var n,r,i,a,s;return o(this,(function(o){switch(o.label){case 0:n=t,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,c.getGpgKey)(t)];case 2:return a=o.sent(),n=a.gpg_key,[3,4];case 3:return r=o.sent(),i=r.response,a=(void 0===i?{}:i).data,s="string"==typeof a?a:null==a?void 0:a.message,e({variant:l.AlertVariant.danger,title:"Error fetching gpg key from provided url",description:s}),[3,4];case 4:return[2,n]}}))}))}}}},86243:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useNotification=void 0;var r=n(83215),i=n(86706);t.useNotification=function(){var e=(0,i.useDispatch)();return{notify:function(t){return e((0,r.addNotification)(t))}}}},61379:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(92950);t.default=function(e,t){var n=(0,r.useState)(e),i=n[0],o=n[1];return(0,r.useEffect)((function(){var n=setTimeout((function(){return o(e)}),t||500);return function(){clearTimeout(n)}}),[e,t]),i}},8263:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.resetStore=t.createStore=void 0;var i=n(55128);t.createStore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.initStore.apply(void 0,r([{},{}],e,!1))},t.resetStore=function(){return(0,i.restoreStore)()}},4147:e=>{e.exports=JSON.parse('{"name":"content-sources-frontend","version":"0.0.1","private":false,"engines":{"node":"=16.14.0","npm":">=8.0.0"},"scripts":{"build":"fec build","deploy":"npm-run-all build lint test","lint":"eslint src/**/*.{js,jsx,ts,tsx} --no-error-on-unmatched-pattern","lint:fix":"eslint --fix \'src/**/*.{js,jsx,ts,tsx}\' --no-error-on-unmatched-pattern","format":"prettier --write \'src/**/*.{js,jsx,ts,tsx,css,md}\' --config ./.prettierrc","patch:hosts":"fec patch-etc-hosts","start":"fec dev","test":"TZ=UTC jest --verbose --no-cache","verify":"npm-run-all build lint test"},"dependencies":{"@patternfly/react-core":"^4.206.2","@patternfly/react-icons":"^4.53.16","@patternfly/react-table":"^4.75.2","@redhat-cloud-services/frontend-components":"^3.9.9","@redhat-cloud-services/frontend-components-notifications":"^3.2.9","@redhat-cloud-services/frontend-components-utilities":"^3.2.24","@redhat-cloud-services/insights-common-typescript":"^4.12.3","@testing-library/dom":"^8.13.0","@types/jest":"^27.5.0","@types/node":"^17.0.31","@types/react":"^18.0.8","@types/react-dom":"^18.0.3","@types/react-jss":"^10.0.0","axios":"^0.21.1","classnames":"^2.3.1","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-react-hooks":"^4.6.0","formik":"^2.2.9","lodash":"^4.17.21","prettier":"^2.7.1","react":"^17.0.2","react-dom":"^17.0.2","react-jss":"^10.9.0","react-query":"^3.39.1","react-redux":"^8.0.1","react-router-dom":"^5.3.0","redux":"^4.2.0","redux-logger":"^3.0.6","redux-promise-middleware":"^5.1.1","typescript":"^4.6.4","yup":"^0.32.11"},"devDependencies":{"@babel/core":"^7.17.10","@babel/plugin-proposal-class-properties":"^7.16.7","@babel/plugin-proposal-object-rest-spread":"^7.17.3","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/plugin-transform-runtime":"^7.17.10","@babel/preset-env":"^7.17.10","@babel/preset-react":"^7.16.7","@babel/preset-typescript":"^7.16.7","@redhat-cloud-services/frontend-components-config":"^4.6.18","@testing-library/dom":"^8.13.0","@testing-library/jest-dom":"^5.16.4","@testing-library/react":"^11.2.7","@testing-library/react-hooks":"^7.0.0","@testing-library/user-event":"14.1.1","@types/jest":"^27.5.0","@types/lodash":"^4.14.182","@types/react-router-dom":"^5.3.3","@typescript-eslint/eslint-plugin":"^5.29.0","@typescript-eslint/parser":"^5.29.0","babel-jest":"^28.0.3","babel-plugin-transform-imports":"^2.0.0","eslint":"^7.0.0","eslint-plugin-react":"^7.30.0","identity-obj-proxy":"^3.0.0","insights-common-typescript-dev":"^0.1.21","jest":"^28.0.3","jest-environment-jsdom":"^28.0.2","npm-run-all":"^4.1.5","prop-types":"^15.8.1","stylelint":"^14.8.2","stylelint-config-recommended-scss":"^6.0.0","stylelint-scss":"^4.2.0","ts-jest":"^28.0.1","webpack-bundle-analyzer":"^4.5.0"},"insights":{"appname":"content-sources","buildrepo":"git@github.com:RedHatInsights/content-sources-frontend-build.git"}}')},4365:e=>{e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Time-out","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","511":"Network Authentication Required"}')}}]);
//# sourceMappingURL=../sourcemaps/2139.cba6c8a8cd656c96118b2baa8d13708d.js.map