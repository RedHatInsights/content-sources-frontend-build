"use strict";(self.webpackChunkcontent_sources_frontend=self.webpackChunkcontent_sources_frontend||[]).push([[236],{64828:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893);n(94789);var l=a(n(96533)),s=a(n(62050)),u=n(28803),c=n(72734),d=a(n(95699)),p=n(4147),f=n(22782),v=n(83215),h=n(55128),g=n(92950),m=n(89624),x=f.getRegistry,y=p.insights.appname;t.default=function(){var e=this,t=(0,u.useAppContext)(),n=t.rbac,a=t.setRbac,p=(0,d.default)();switch((0,g.useEffect)((function(){x().register({notifications:v.notificationsReducer}),p&&!n&&p.auth.getUser().then((function(){return r(e,void 0,void 0,(function(){return i(this,(function(e){return[2,(0,h.fetchRBAC)(y).then(a)]}))}))}))}),[!!p]),!0){case!n:return(0,o.jsx)(m.Bullseye,{children:(0,o.jsx)(m.Spinner,{size:"xl"})});case null==n?void 0:n.read:return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.default,{}),(0,o.jsx)(s.default,{})]});default:return(0,o.jsx)(c.NoPermissionsPage,{})}}},55730:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),u=o(n(92950)),c=n(88767),d=n(86706),p=l(n(64828)),f=n(28803),v=n(16239),h=new c.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});t.default=function(e){var t=e.logger,n=u.default.useMemo((function(){return(0,v.resetStore)(),t?(0,v.createStore)(t).store:(0,v.createStore)().store}),[t]);return(0,u.useEffect)((function(){var e,t;null===(t=null===(e=null===insights||void 0===insights?void 0:insights.chrome)||void 0===e?void 0:e.appAction)||void 0===t||t.call(e,"view-list-page")}),[]),(0,s.jsx)(d.Provider,r({store:n},{children:(0,s.jsx)(f.ContextProvider,{children:(0,s.jsx)(c.QueryClientProvider,r({client:h},{children:(0,s.jsx)(p.default,{})}))})}))}},98243:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),l=n(14040),s=n(64470),u=n(92950),c=n(42060),d=n(92418),p=n(31104),f=i(n(38824)),v=i(n(58578)),h=i(n(2744)),g=n(88767),m=i(n(68604)),x=i(n(29906)),y=i(n(87322)),b=i(n(23903)),_=n(28803),j=i(n(55537)),S=i(n(27484)),C=(0,c.createUseStyles)({mainContainer:{backgroundColor:s.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},mainContainer100Height:{composes:["$mainContainer"],minHeight:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0}});t.default=function(){var e,t,n,i=C(),s=(0,g.useQueryClient)(),c=(0,_.useAppContext)().rbac,P=Number(localStorage.getItem("perPage"))||20,I=(0,u.useState)(1),O=I[0],T=I[1],w=(0,u.useState)(P),k=w[0],E=w[1],R=(0,u.useState)(!1),A=R[0],N=R[1],L=(0,u.useState)([]),F=L[0],D=L[1],V=(0,u.useState)(0),M=V[0],U=V[1],K=(0,u.useState)("asc"),B=K[0],Q=K[1],G=(0,u.useState)({searchQuery:"",versions:[],arches:[],statuses:[]}),q=G[0],Y=G[1],z=function(){return Y({searchQuery:"",versions:[],arches:[],statuses:[]})},H=!(null===(e=q.arches)||void 0===e?void 0:e.length)&&""===q.searchQuery&&!(null===(t=q.versions)||void 0===t?void 0:t.length)&&!(null===(n=q.statuses)||void 0===n?void 0:n.length),W=(0,p.useRepositoryParams)(),$=W.isLoading,Z=W.error,X=W.isError,J=W.data,ee=void 0===J?{distribution_versions:[],distribution_arches:[]}:J,te=ee.distribution_versions,ne=ee.distribution_arches,re=["name","distribution_arch","distribution_versions","package_count","last_introspection_time","status"],ie=function(){return re[M]+":"+B},ae=(0,p.useContentListQuery)(O,k,q,ie()),oe=ae.isLoading,le=ae.error,se=ae.isError,ue=ae.isFetching,ce=ae.data,de=void 0===ce?{data:[],meta:{count:0,limit:20,offset:0}}:ce,pe=(0,p.useDeleteContentItemMutate)(s,O,k,q,ie()),fe=pe.mutateAsync,ve=pe.isLoading,he=(0,p.useIntrospectRepositoryMutate)(s,O,k,q,ie()),ge=he.mutateAsync,me=he.isLoading,xe=function(e){return ge({uuid:e,reset_count:!0})},ye=ve||ue||$||me,be=function(e,t){return T(t)},_e=function(e,t,n){localStorage.setItem("perPage",t.toString()),E(t),T(n)},je=["Name","Architecture","Versions","Packages","Last Introspection","Status"],Se=function(e){var t;return null===(t=ne.find((function(t){var n=t.label;return e===n})))||void 0===t?void 0:t.name};if(se)throw le;if(X)throw Z;var Ce=de.data,Pe=void 0===Ce?[]:Ce,Ie=de.meta.count,Oe=void 0===Ie?0:Ie,Te=(0,u.useCallback)((function(e){return[{title:"Delete",onClick:function(){return fe(null==e?void 0:e.uuid).then((function(){O>1&&Oe/k+1>=O&&(Oe-1)%k==0&&T(O-1)}))}},{isDisabled:ye,title:"Edit",onClick:function(){D([e]),N(!0)}},{isDisabled:ye||"Retrying"==(null==e?void 0:e.status),title:"Introspect Now",onClick:function(){return xe(null==e?void 0:e.uuid)}}]}),[ye]),we=0===Oe;return we&&H&&!oe?(0,a.jsx)(o.Bullseye,r({"data-ouia-safe":!ye,"data-ouia-component-id":"content_list_page"},{children:(0,a.jsx)(h.default,{notFiltered:H,clearFilters:z})})):(0,a.jsxs)(o.Grid,r({"data-ouia-safe":!ye,"data-ouia-component-id":"content_list_page",className:we?i.mainContainer100Height:i.mainContainer},{children:[(0,a.jsx)(m.default,{values:F,open:A,setClosed:function(){N(!1),D([])}}),(0,a.jsxs)(o.Flex,r({className:i.topContainer},{children:[(0,a.jsx)(f.default,{isLoading:oe,setFilterData:function(e){Y(e),T(1)},filterData:q}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(v.default,r({hide:we},{children:(0,a.jsx)(o.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",isDisabled:oe,itemCount:Oe,perPage:k,page:O,onSetPage:be,isCompact:!0,onPerPageSelect:_e})}))})]})),(0,a.jsx)(v.default,r({hide:!oe},{children:(0,a.jsx)(o.Grid,r({className:i.mainContainer},{children:(0,a.jsx)(d.SkeletonTable,{rowSize:k,colSize:je.length,variant:l.TableVariant.compact})}))})),(0,a.jsx)(v.default,r({hide:we||oe},{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.TableComposable,r({"aria-label":"Custom repositories table",ouiaId:"custom_repositories_table",variant:"compact"},{children:[(0,a.jsx)(l.Thead,{children:(0,a.jsxs)(l.Tr,{children:[je.map((function(e,t){return(0,a.jsx)(l.Th,r({sort:(n=t,{sortBy:{index:M,direction:B,defaultDirection:"asc"},onSort:function(e,t,n){U(t),Q(n)},columnIndex:n})},{children:e}),e+"column");var n})),(0,a.jsx)(l.Th,{children:(0,a.jsx)(o.Spinner,{size:"md",className:ye?"":i.invisible})})]})}),(0,a.jsx)(l.Tbody,{children:Pe.map((function(e){var t,n,i=e.uuid,o=e.name,s=e.url,u=e.distribution_arch,d=e.distribution_versions,p=e.last_introspection_time;return(0,a.jsxs)(l.Tr,{children:[(0,a.jsxs)(l.Td,{children:[o,(0,a.jsx)("br",{}),(0,a.jsx)(y.default,{href:s})]}),(0,a.jsx)(l.Td,{children:Se(u)}),(0,a.jsx)(l.Td,{children:(n=d,te.filter((function(e){var t=e.label;return null==n?void 0:n.includes(t)})).map((function(e){return e.name})).join(", "))}),(0,a.jsx)(l.Td,{children:(0,a.jsx)(b.default,{rowData:e})}),(0,a.jsx)(l.Td,{children:(t=p,""===t||void 0===t?"Never":(0,S.default)(t).fromNow())}),(0,a.jsx)(l.Td,{children:(0,a.jsx)(x.default,{rowData:e,retryHandler:xe})}),(0,a.jsx)(l.Td,r({isActionCell:!0},{children:(0,a.jsx)(j.default,r({content:"Pending"==(null==e?void 0:e.status)?"Introspection is in progress":"You do not have the required permissions to perform this action.",show:!(null==c?void 0:c.write)||"Pending"===(null==e?void 0:e.status),setDisabled:!0},{children:(0,a.jsx)(l.ActionsColumn,{items:Te(e)})}))}))]},i)}))})]})),(0,a.jsxs)(o.Flex,r({className:i.bottomContainer},{children:[(0,a.jsx)(o.FlexItem,{}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(o.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:Oe,perPage:k,page:O,onSetPage:be,variant:o.PaginationVariant.bottom,onPerPageSelect:_e})})]}))]})})),(0,a.jsx)(v.default,r({hide:!we||oe},{children:(0,a.jsx)(h.default,{notFiltered:H,clearFilters:z})}))]}))}},25574:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),u=n(89624),c=n(51225),d=n(14040),p=n(64470),f=n(61558),v=n(92950),h=n(42060),g=l(n(58578)),m=n(97715),x=l(n(91171)),y=n(73773),b=l(n(37303)),_=n(31104),j=l(n(6378)),S=n(88767),C=l(n(55537)),P=n(28803),I=n(44439),O=(0,h.createUseStyles)({description:{paddingTop:"12px",color:p.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:p.global_link_Color.value+"!important",padding:"8px 0!important"},"& svg":{fill:p.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"8px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},addRepositoryButton:{marginBottom:"24px"},saveButton:{marginRight:"36px",transition:"unset!important"},removeButton:{display:"flex!important",justifyContent:"flex-end"},singleContentCol:{padding:"8px 0px 0px !important"}}),T={name:"",url:"",gpgKey:"",arch:"any",versions:["any"],gpgLoading:!1,expanded:!0,metadataVerification:!1},w={name:!1,url:!1,gpgKey:!1};t.default=function(e){var t,n=e.isDisabled,l=(0,P.useAppContext)(),h=l.hidePackageVerification,k=l.rbac,E=(0,v.useState)(!1),R=E[0],A=E[1],N=(0,v.useState)(!1),L=N[0],F=N[1],D=(0,v.useState)([""]),V=D[0],M=D[1],U=O(),K=(0,S.useQueryClient)(),B=(0,f.useFormik)({initialValues:[T],validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,m.makeValidationSchema)(),initialTouched:[w],onSubmit:function(){}}),Q=function(e,t){F(!1);var n=o([],V,!0);n[e]=t,M(n)},G=(0,_.useFetchGpgKey)(),q=G.fetchGpgKey,Y=G.isLoading,z=(0,x.default)(V,300),H=K.getQueryData(_.REPOSITORY_PARAMS_KEY)||{},W=H.distribution_arches,$=void 0===W?[]:W,Z=H.distribution_versions,X=void 0===Z?[]:Z;(0,v.useEffect)((function(){var e;e=z,i(void 0,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,Promise.all(o([],B.values,!0).map((function(t,n){return i(void 0,void 0,void 0,(function(){var i,o,l,s,u,c;return a(this,(function(a){switch(a.label){case 0:return i=e[n],(0,m.isValidURL)(i)?[4,q(i)]:[3,2];case 1:if((o=a.sent())!==i)return Q(n,o),[2,r(r(r({},t),{gpgKey:o}),!h&&""===t.gpgKey&&i?{metadataVerification:!!(null===(s=null===(l=null==ve?void 0:ve[n])||void 0===l?void 0:l.url)||void 0===s?void 0:s.metadata_signature_present)}:{})];a.label=2;case 2:return[2,r(r(r({},t),{gpgKey:i}),!h&&""===t.gpgKey&&i?{metadataVerification:!!(null===(c=null===(u=null==ve?void 0:ve[n])||void 0===u?void 0:u.url)||void 0===c?void 0:c.metadata_signature_present)}:{})]}}))}))})))];case 1:return t=n.sent(),B.setValues(t),[2]}}))}))}),[z]);var J=(0,v.useMemo)((function(){var e={},t={};return $.forEach((function(t){var n=t.name,r=t.label;return e[n]=r})),X.forEach((function(e){var n=e.name,r=e.label;return t[n]=r})),{distributionArches:e,distributionVersions:t}}),[$,X]),ee=J.distributionArches,te=J.distributionVersions,ne=function(){A(!1),B.setTouched([w]),B.resetForm(),M([""])},re=(0,_.useAddContentQuery)(K,(0,m.mapFormikToAPIValues)(B.values)),ie=re.mutateAsync,ae=re.isLoading,oe=1===B.values.length,le=!B.values.some((function(e){return!e.expanded})),se=function(e,t,n){F(!1);var i=o([],B.values,!0);i[e]=r(r({},i[e]),t),B.setValues(i).then(n)},ue=function(e,t){var n,r,i,a=!!(null===(n=B.values[e])||void 0===n?void 0:n[t]),o=!!(null===(r=B.errors[e])||void 0===r?void 0:r[t]),l=null===(i=B.touched[e])||void 0===i?void 0:i[t];switch(!0){case o&&l:return"error";case a&&l:return"success";default:return"default"}},ce=function(){var e,t=(null===(e=B.touched)||void 0===e?void 0:e.length)-1||0,n=B.touched[t]||{},i=n.name,a=n.url;if(!i&&!a){var l=o([],B.touched,!0);l[t]=r(r({},l[t]),{name:!0,url:!0}),B.setTouched(l)}},de=(0,x.default)(B.values)||[],pe=(0,_.useValidateContentList)(),fe=pe.mutateAsync,ve=pe.data,he=pe.isLoading;(0,v.useEffect)((function(){if(R){de.length!==B.values.length&&(de=B.values);var e=o([],B.touched,!0);fe(de.map((function(t,n){var i,a,o,l=t.name,s=t.url,u=t.gpgKey,c=t.metadataVerification;return!(null===(i=e[n])||void 0===i?void 0:i.name)&&l&&(e[n]=r(r({},e[n]),{name:!0})),!(null===(a=e[n])||void 0===a?void 0:a.url)&&s&&(e[n]=r(r({},e[n]),{url:!0})),!(null===(o=e[n])||void 0===o?void 0:o.gpgKey)&&u&&(e[n]=r(r({},e[n]),{gpgKey:!0})),{name:l,url:s,gpg_key:u,metadata_verification:c}}))).then((function(t){return i(void 0,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return[4,B.validateForm(de)];case 1:return n=i.sent(),r=(0,m.mapValidationData)(t,n),B.setErrors(r),F(!0),B.setTouched(e),[2]}}))}))}))}}),[de,de.length,R]);var ge=function(e){var t;(null===(t=B.values[e])||void 0===t?void 0:t.expanded)?(se(e,r(r({},B.values[e]),{expanded:!1})),ce()):se(e,r(r({},B.values[e]),{expanded:!0}))},me=(0,y.useNotification)().notify,xe=Y||ae||he||!L;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==k?void 0:k.write),setDisabled:!0},{children:(0,s.jsx)(u.Button,r({id:"createContentSourceButton",ouiaId:"create_content_source",variant:"primary",isDisabled:n,onClick:function(){return A(!R)}},{children:"Add repositories"}))})),R?(0,s.jsx)(u.Modal,r({position:"top",variant:u.ModalVariant.medium,title:"Add custom repositories",ouiaId:"add_custom_repository",ouiaSafe:!xe,help:(0,s.jsx)(u.Popover,r({headerContent:(0,s.jsx)("div",{children:"Add a custom repository"}),bodyContent:(0,s.jsx)("div",{children:"Use this form to enter the values for a new repository."})},{children:(0,s.jsx)(u.Button,r({variant:"plain","aria-label":"Help"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{})}))})),description:(0,s.jsx)("p",r({className:U.description},{children:"Add by completing the form. Default values may be provided automatically."})),isOpen:!0,onClose:ne,footer:(0,s.jsxs)(u.Stack,{children:[(0,s.jsx)(u.StackItem,{children:(0,s.jsx)(u.Button,r({isDisabled:!B.isValid||B.values.length>19,className:U.addRepositoryButton,variant:"link",onClick:function(){B.setTouched(o(o([],B.touched,!0),[w],!1)),B.setValues(o(o([],B.values.map((function(e){return r(r({},e),{expanded:!1})})),!0),[T],!1)),F(!1)},icon:(0,s.jsx)(c.PlusCircleIcon,{}),ouiaId:"add_row"},{children:"Add another repository"}))}),(0,s.jsxs)(u.StackItem,{children:[(0,s.jsx)(u.Button,r({className:U.saveButton,ouiaId:"modal_save",variant:"primary",isLoading:ae,isDisabled:!L||!B.isValid||ae||(null===(t=B.values)||void 0===t?void 0:t.length)!==(null==de?void 0:de.length),onClick:function(){return ie().then(ne)}},{children:"Save"}),"confirm"),(0,s.jsx)(u.Button,r({variant:"link",onClick:ne,ouiaId:"modal_cancel"},{children:"Cancel"}),"cancel")]})]})},{children:(0,s.jsxs)(d.TableComposable,r({"aria-label":"Table for repo add modal",ouiaId:"add_modal_table"},{children:[(0,s.jsx)(g.default,r({hide:oe},{children:(0,s.jsx)(d.Tbody,r({isExpanded:le},{children:(0,s.jsxs)(d.Tr,r({onClick:function(){B.setValues(o([],B.values.map((function(e){return r(r({},e),{expanded:!le})})),!0)),ce()},className:U.toggleAllRow},{children:[(0,s.jsx)(d.Td,{className:U.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:le}}),(0,s.jsx)(d.Td,r({dataLabel:"expand-collapse"},{children:le?"Collapse all":"Expand all"}))]}))}))})),B.values.map((function(e,t){var n,i,a,l,f,v,x,y,_,S=e.expanded,P=e.name,O=e.url,T=e.arch,w=e.gpgKey,k=e.versions,E=e.gpgLoading,R=e.metadataVerification;return(0,s.jsxs)(d.Tbody,r({isExpanded:oe?void 0:S},{children:[(0,s.jsx)(g.default,r({hide:oe},{children:(0,s.jsxs)(d.Tr,r({className:U.colHeader},{children:[(0,s.jsx)(d.Td,{onClick:function(){return ge(t)},className:U.toggleAction,isActionCell:!0,expand:{rowIndex:t,isExpanded:S}}),(0,s.jsx)(d.Td,r({width:35,onClick:function(){return ge(t)},dataLabel:P},{children:P||"New content"})),(0,s.jsx)(d.Td,r({onClick:function(){return ge(t)},dataLabel:"validity"},{children:(0,s.jsx)(b.default,{touched:B.touched[t],errors:B.errors[t]})})),(0,s.jsx)(d.Td,r({dataLabel:"removeButton",className:U.removeButton},{children:(0,s.jsx)(g.default,r({hide:1===B.values.length},{children:(0,s.jsx)(u.Button,r({onClick:function(){return function(e){var t=B.values;t.splice(e,1);var n=B.touched;n.splice(e,1);var r=B.errors;r.splice(e,1),B.setTouched(n),B.setErrors(r),B.setValues(t)}(t)},variant:"link",icon:(0,s.jsx)(c.MinusCircleIcon,{})},{children:"Remove"}))}))}))]}))})),(0,s.jsx)(d.Tr,r({isExpanded:oe?void 0:S},{children:(0,s.jsx)(d.Td,r({colSpan:4,className:oe?U.singleContentCol:U.mainContentCol},{children:(0,s.jsxs)(u.Form,{children:[(0,s.jsx)(u.FormGroup,r({label:"Name",isRequired:!0,fieldId:"namegroup",validated:ue(t,"name"),helperTextInvalid:null===(n=B.errors[t])||void 0===n?void 0:n.name},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",ouiaId:"input_name",type:"text",validated:ue(t,"name"),onChange:function(e){se(t,{name:e})},value:P||"",placeholder:"Enter name"})})),(0,s.jsx)(u.FormGroup,r({label:"URL",isRequired:!0,fieldId:"url",validated:ue(t,"url"),helperTextInvalid:null===(i=B.errors[t])||void 0===i?void 0:i.url},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,type:"url",validated:ue(t,"url"),onBlur:function(){return function(e){var t,n,i,a,l,s,u,c,d,p,f,v=null===(t=B.values[e])||void 0===t?void 0:t.url;if((0,m.isValidURL)(v)&&("any"===(null===(n=B.values[e])||void 0===n?void 0:n.arch)||"any"===B.values[e].versions[0])){var h="any"!==(null===(i=B.values[e])||void 0===i?void 0:i.arch)&&(null===(a=B.values[e])||void 0===a?void 0:a.arch)||(null===(l=$.find((function(e){var t=e.name,n=e.label;return v.includes(t)||v.includes(n)})))||void 0===l?void 0:l.label)||"any",g=[];if((null===(u=null===(s=B.values[e])||void 0===s?void 0:s.versions)||void 0===u?void 0:u.length)&&"any"!==B.values[e].versions[0])g=null===(c=B.values[e])||void 0===c?void 0:c.versions;else{var x=null===(d=X.find((function(e){var t=e.name,n=e.label;return v.includes(t)||v.includes("/"+n)})))||void 0===d?void 0:d.label;x&&(g=[x]),(0,I.isEmpty)(g)&&(g=["any"])}if((null===(p=B.values[e])||void 0===p?void 0:p.arch)!==h&&!(0,I.isEqual)(g,null===(f=B.values[e])||void 0===f?void 0:f.arch)){var y=o([],B.values,!0);y[e]=r(r({},y[e]),{arch:h,versions:g}),B.setValues(y)}}}(t)},onChange:function(e){O!==e&&se(t,{url:e})},value:O||"",placeholder:"https://",id:"url",name:"url",label:"Url",ouiaId:"input_url"})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package architecture"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"arch"},{children:(0,s.jsx)(j.default,{ouiaId:"restrict_to_architecture",menuAppendTo:document.body,toggleId:"archSelection"+t,options:Object.keys(ee),variant:u.SelectVariant.single,selectedProp:Object.keys(ee).find((function(e){return T===ee[e]})),setSelected:function(e){return se(t,{arch:ee[e]})}})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package OS version"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"version"},{children:(0,s.jsx)(j.default,{ouiaId:"restrict_to_os_version",menuAppendTo:document.body,toggleId:"versionSelection"+t,options:Object.keys(te),variant:u.SelectVariant.typeaheadMulti,selectedProp:Object.keys(te).filter((function(e){return null==k?void 0:k.includes(te[e])})),placeholderText:(null==k?void 0:k.length)?"":"Any version",setSelected:function(e){return function(e,t){var n=e.map((function(e){return te[e]}));0!==e.length&&"any"!==n[e.length-1]||(n=["any"]),n.length>1&&n.includes("any")&&(n=n.filter((function(e){return"any"!==e}))),se(t,{versions:n})}(e,t)}})})),(0,s.jsx)(u.FormGroup,r({label:"GPG key",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Add GPG Key file or URL"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"gpgKey",validated:ue(t,"gpgKey"),helperTextInvalid:null===(a=B.errors[t])||void 0===a?void 0:a.gpgKey},{children:(0,s.jsx)(u.FileUpload,{validated:ue(t,"gpgKey"),id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:V[t],isLoading:E,spellCheck:!1,onDataChange:function(e){return Q(t,e)},onTextChange:function(e){return Q(t,e)},onClearClick:function(){return Q(t,"")},dropzoneProps:{maxSize:m.maxUploadSize,onDropRejected:function(e){return(0,m.failedFileUpload)(e,me)}},allowEditingUploadedText:!0,browseButtonText:"Upload"})})),(0,s.jsx)(g.default,r({hide:h||!w},{children:(0,s.jsxs)(u.FormGroup,r({fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0},{children:[(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(f=null===(l=null==ve?void 0:ve[t])||void 0===l?void 0:l.url)||void 0===f?void 0:f.metadata_signature_present),id:"package-verification-only",name:"package-verification-only",label:"Package verification only",isChecked:!R,onChange:function(){return se(t,{metadataVerification:!1})}}),(0,s.jsx)(C.default,r({show:!0!==(null===(x=null===(v=null==ve?void 0:ve[t])||void 0===v?void 0:v.url)||void 0===x?void 0:x.metadata_signature_present),content:"This repository's metadata is not signed, metadata verification is not possible."},{children:(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(_=null===(y=null==ve?void 0:ve[t])||void 0===y?void 0:y.url)||void 0===_?void 0:_.metadata_signature_present),id:"package-and-repository-verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:R,onChange:function(){return se(t,{metadataVerification:!0})}})}))]}))}))]})}))}))]}),t)}))]}))})):""]})}},37303:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(64470),l=n(51225),s=n(42060),u=o.global_danger_color_100.value,c=o.global_success_color_100.value,d=(0,s.createUseStyles)({red:{color:u,fontWeight:"bold",fontSize:"14px"},green:{color:c,fontWeight:"bold",fontSize:"14px"}});t.default=function(e){var t=e.touched,n=e.errors,o=e.loading,s=d(),p=["name","url"].every((function(e){return null==t?void 0:t[e]})),f=Object.values(n||{}).every((function(e){return!e})),v=Object.keys(t||{}).filter((function(e){return!!(null==t?void 0:t[e])})).some((function(e){return null==n?void 0:n[e]}));switch(!0){case o:return(0,i.jsx)(a.Spinner,{size:"md"});case p&&f:return(0,i.jsxs)(a.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,i.jsx)(a.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,i.jsx)(l.CheckCircleIcon,{color:c})})),(0,i.jsx)(a.FlexItem,{children:(0,i.jsx)("span",r({className:s.green},{children:"Valid"}))})]}));case v:return(0,i.jsxs)(a.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,i.jsx)(a.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,i.jsx)(l.ExclamationCircleIcon,{color:u})})),(0,i.jsx)(a.FlexItem,{children:(0,i.jsx)("span",r({className:s.red},{children:"Invalid"}))})]}));default:return(0,i.jsx)(i.Fragment,{})}}},97715:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.failedFileUpload=t.maxUploadSize=t.makeValidationSchema=t.mapValidationData=t.mapFormikToAPIValues=t.isValidURL=t.REGEX_URL=void 0;var u=n(44439),c=o(n(87561)),d=s(n(62307)),p=n(89624);t.REGEX_URL=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,t.isValidURL=function(e){if(!e)return!1;var n=new RegExp(t.REGEX_URL);return e.match(n)},t.mapFormikToAPIValues=function(e){return e.map((function(e){return{name:e.name,url:e.url,distribution_arch:e.arch,distribution_versions:e.versions,gpg_key:e.gpgKey,metadata_verification:e.metadataVerification}}))},t.mapValidationData=function(e,t){var n=function(e){return e.map((function(e){var t=e.url,n=l(e,["url"]);return r(r({},n),{url:r(r({},t),{error:(null==t?void 0:t.error)||(null==t?void 0:t.metadata_present)?null==t?void 0:t.error:"Unable to retrieve YUM Metadata, Recieved HTTP ".concat(null==t?void 0:t.http_code,": ").concat(t?d.default[t.http_code]:"")})})}))}(e),i=n.map((function(e,n){var i=e.name,a=e.url,o=e.gpg_key;return r(r(r(r({},(null==i?void 0:i.error)?{name:null==i?void 0:i.error}:{}),(null==a?void 0:a.error)?{url:null==a?void 0:a.error}:{}),(null==o?void 0:o.error)?{gpgKey:null==o?void 0:o.error}:{}),t[n])}));return i.every((function(e){return(0,u.isEmpty)(e)}))?[]:i},t.makeValidationSchema=function(){return c.addMethod(c.object,"uniqueProperty",(function(e,t){return this.test("unique",t,(function(t){if(!t||!t[e])return!0;if(this.parent.filter((function(e){return e!==t})).some((function(n){return n[e]===t[e]})))throw this.createError({path:"".concat(this.path,".").concat(e)});return!0}))})),c.array(c.object().shape({name:c.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),url:c.string().url("Invalid URL").required("Required")}).uniqueProperty("name","Names must be unique").uniqueProperty("url","Url's must be unique"))},t.maxUploadSize=32e3,t.failedFileUpload=function(e,n){var r="Check the file and try again.";1!=e.length?r="Only a single file upload is supported.":e[0].size>t.maxUploadSize&&(r="The file is larger than "+t.maxUploadSize+" bytes."),n({variant:p.AlertVariant.danger,title:"There was an problem uploading the file.",description:r})}},38824:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),l=n(92950),s=n(89624),u=a(n(6378)),c=n(51225),d=n(64470),p=a(n(58578)),f=n(88767),v=n(31104),h=a(n(91171)),g=a(n(25574)),m=n(42060),x=n(44439),y=n(28803),b=a(n(55537)),_=(0,m.createUseStyles)({chipsContainer:{backgroundColor:d.global_BackgroundColor_100.value,paddingTop:"16px"},clearFilters:{marginLeft:"16px"},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:d.global_secondary_color_100.value,position:"relative",top:"3px",left:"-5px",pointerEvents:"none"}}),j=["Invalid","Pending","Unavailable","Valid"];t.default=function(e){var t=e.isLoading,n=e.setFilterData,a=e.filterData,d=_(),m=(0,y.useAppContext)().rbac,S=(0,f.useQueryClient)(),C=(0,l.useState)("Name/URL"),P=C[0],I=C[1],O=(0,l.useState)({}),T=O[0],w=O[1],k=(0,l.useState)({}),E=k[0],R=k[1],A=(0,l.useState)(""),N=A[0],L=A[1],F=(0,l.useState)([]),D=F[0],V=F[1],M=(0,l.useState)([]),U=M[0],K=M[1],B=(0,l.useState)([]),Q=B[0],G=B[1],q=S.getQueryData(v.REPOSITORY_PARAMS_KEY)||{},Y=q.distribution_arches,z=void 0===Y?[]:Y,H=q.distribution_versions,W=void 0===H?[]:H,$=function(){L(""),V([]),K([]),G([]),n({searchQuery:"",versions:[],arches:[],statuses:[]})};(0,l.useEffect)((function(){0!==a.arches.length||0!==a.versions.length||0!==a.statuses.length||""!==a.searchQuery||""===N&&0===U.length&&0===D.length&&0===Q.length||$()}),[a]);var Z=(0,h.default)({searchQuery:N,selectedVersions:D,selectedArches:U,selectedStatuses:Q}),X=Z.searchQuery,J=Z.selectedVersions,ee=Z.selectedArches,te=Z.selectedStatuses,ne=function(e,t){var n="arch"===e?z:W,r=[];return t.forEach((function(e){var t=n.find((function(t){return t.name===e}));t&&r.push(t.label)})),r};(0,l.useEffect)((function(){n({searchQuery:X,versions:ne("version",J),arches:ne("arch",ee),statuses:te})}),[X,J,ee,te]);var re=function(e,t,n){n(i([],t,!0).filter((function(t){return t!==e})))};return(0,l.useEffect)((function(){if((0,x.isEmpty)(T)&&(0,x.isEmpty)(E)&&0!==z.length&&0!==W.length){var e={},t={};z.forEach((function(t){return e[t.name]=t.label})),W.forEach((function(e){return t[e.name]=e.label})),w(t),R(e)}}),[z,W]),(0,o.jsxs)(s.Flex,{children:[(0,o.jsx)(s.FlexItem,{children:(0,o.jsxs)(s.InputGroup,{children:[(0,o.jsx)(s.FlexItem,{children:(0,o.jsx)(u.default,{toggleId:"filterSelectionDropdown",ouiaId:"filter_type",isDisabled:t,options:["Name/URL","Version","Architecture","Status"],variant:s.SelectVariant.single,selectedProp:P,setSelected:I,placeholderText:"filter",toggleIcon:(0,o.jsx)(c.FilterIcon,{})})}),(0,o.jsx)(s.FlexItem,{children:function(){switch(P){case"Name/URL":return(0,o.jsxs)(s.Flex,{children:[(0,o.jsx)(s.TextInput,{isDisabled:t,id:"search",ouiaId:"filter_search",placeholder:"Filter by name/url",value:N,onChange:function(e){return L(e)},className:d.searchInput}),(0,o.jsx)(c.SearchIcon,{size:"sm",className:d.searchIcon})]});case"Version":return(0,o.jsx)(u.default,{toggleAriaLabel:"filter version",toggleId:"versionSelect",ouiaId:"filter_version",isDisabled:t,options:Object.keys(T),variant:s.SelectVariant.checkbox,selectedProp:D,setSelected:V,placeholderText:"Filter by version"});case"Architecture":return(0,o.jsx)(u.default,{toggleAriaLabel:"filter architecture",toggleId:"archSelect",ouiaId:"filter_arch",isDisabled:t,options:Object.keys(E),variant:s.SelectVariant.checkbox,selectedProp:U,setSelected:K,placeholderText:"Filter by architecture"});case"Status":return(0,o.jsx)(u.default,{toggleAriaLabel:"filter status",toggleId:"statusSelect",ouiaId:"filter_status",isDisabled:t,options:j,variant:s.SelectVariant.checkbox,selectedProp:Q,setSelected:G,placeholderText:"Filter by status"});default:return(0,o.jsx)(o.Fragment,{})}}()})]})}),(0,o.jsx)(s.FlexItem,{children:(0,o.jsx)(b.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==m?void 0:m.write),setDisabled:!0},{children:(0,o.jsx)(g.default,{isDisabled:t})}))}),(0,o.jsx)(p.default,r({hide:!(D.length||U.length||Q.length||""!=N)},{children:(0,o.jsxs)(s.FlexItem,r({fullWidth:{default:"fullWidth"},className:d.chipsContainer},{children:[(0,o.jsx)(s.ChipGroup,r({categoryName:"Version"},{children:D.map((function(e){return(0,o.jsx)(s.Chip,r({onClick:function(){return re(e,D,V)}},{children:e}),e)}))})),(0,o.jsx)(s.ChipGroup,r({categoryName:"Architecture"},{children:U.map((function(e){return(0,o.jsx)(s.Chip,r({onClick:function(){return re(e,U,K)}},{children:e}),e)}))})),(0,o.jsx)(s.ChipGroup,r({categoryName:"Status"},{children:Q.map((function(e){return(0,o.jsx)(s.Chip,r({onClick:function(){return re(e,Q,G)}},{children:e}),e)}))})),""!==N&&(0,o.jsx)(s.ChipGroup,r({categoryName:"Name/URL"},{children:(0,o.jsx)(s.Chip,r({onClick:function(){return L("")}},{children:N}),"search_chip")})),(""!==X&&""!==N||!!(null==D?void 0:D.length)||!!(null==U?void 0:U.length)||!!(null==Q?void 0:Q.length))&&(0,o.jsx)(s.Button,r({className:d.clearFilters,onClick:$,variant:"link",isInline:!0},{children:"Clear filters"}))]}))}))]})}},68604:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85893),u=n(89624),c=n(51225),d=n(14040),p=n(64470),f=n(61558),v=n(92950),h=n(42060),g=l(n(58578)),m=l(n(91171)),x=n(31104),y=l(n(6378)),b=n(88767),_=n(97715),j=l(n(37303)),S=n(45971),C=n(44439),P=l(n(55537)),I=n(28803),O=n(73773),T=p.global_success_color_100.value,w=(0,h.createUseStyles)({description:{paddingTop:"12px",color:p.global_Color_200.value},removeSideBorder:{"&:after":{borderLeft:"none!important"}},toggleAllRow:{composes:["$removeSideBorder"],cursor:"pointer",borderBottom:"none!important","& td":{color:p.global_link_Color.value+"!important",padding:"12px 0!important"},"& svg":{fill:p.global_link_Color.value+"!important",padding:""}},colHeader:{"& td":{"&:not(:last-child)":{cursor:"pointer"},padding:"12px 0!important"}},mainContentCol:{composes:["$removeSideBorder"],padding:"16px 0px 16px 36px!important"},toggleAction:{composes:["$removeSideBorder"],"& button":{padding:"8px"}},saveButton:{marginRight:"36px",transition:"unset!important"},singleContentCol:{padding:"8px 0px 0px !important"}});t.default=function(e){var t=e.values,n=e.open,l=e.setClosed;if(!n)return(0,s.jsx)(s.Fragment,{});var h=(0,I.useAppContext)().hidePackageVerification,k=(0,S.mapToDefaultFormikValues)(t),E=(0,v.useState)(!1),R=E[0],A=E[1],N=(0,v.useState)(k.map((function(e){return e.gpgKey}))),L=N[0],F=N[1],D=w(),V=(0,b.useQueryClient)(),M=(0,f.useFormik)({initialValues:k,validateOnBlur:!1,validateOnChange:!1,validationSchema:(0,_.makeValidationSchema)(),initialTouched:t.map((function(){return{name:!0,url:!0}})),onSubmit:function(){}}),U=(0,v.useMemo)((function(){return!(0,C.isEqual)(k,M.values)}),[k,M.values]),K=function(e,t){A(!1);var n=o([],L,!0);n[e]=t,F(n)},B=(0,x.useFetchGpgKey)(),Q=B.fetchGpgKey,G=B.isLoading,q=(0,m.default)(L,300),Y=V.getQueryData(x.REPOSITORY_PARAMS_KEY)||{},z=Y.distribution_arches,H=void 0===z?[]:z,W=Y.distribution_versions,$=void 0===W?[]:W;(0,v.useEffect)((function(){var e;e=q,i(void 0,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,Promise.all(o([],M.values,!0).map((function(t,n){return i(void 0,void 0,void 0,(function(){var i,o,l,s,u,c;return a(this,(function(a){switch(a.label){case 0:return i=e[n],(0,_.isValidURL)(i)?[4,Q(i)]:[3,2];case 1:if((o=a.sent())!==i)return K(n,o),[2,r(r(r({},t),{gpgKey:o}),!h&&""===t.gpgKey&&i?{metadataVerification:!!(null===(s=null===(l=null==de?void 0:de[n])||void 0===l?void 0:l.url)||void 0===s?void 0:s.metadata_signature_present)}:{})];a.label=2;case 2:return[2,r(r(r({},t),{gpgKey:i}),!h&&""===t.gpgKey&&i?{metadataVerification:!!(null===(c=null===(u=null==de?void 0:de[n])||void 0===u?void 0:u.url)||void 0===c?void 0:c.metadata_signature_present)}:{})]}}))}))})))];case 1:return t=n.sent(),M.setValues(t),[2]}}))}))}),[q]);var Z=(0,v.useMemo)((function(){var e={},t={};return H.forEach((function(t){var n=t.name,r=t.label;return e[n]=r})),$.forEach((function(e){var n=e.name,r=e.label;return t[n]=r})),{distributionArches:e,distributionVersions:t}}),[H,$]),X=Z.distributionArches,J=Z.distributionVersions,ee=function(){l(),M.resetForm(),F([""])},te=(0,x.useEditContentQuery)(V,(0,S.mapFormikToEditAPIValues)(M.values)),ne=te.mutateAsync,re=te.isLoading,ie=1===M.values.length,ae=!M.values.some((function(e){return!e.expanded})),oe=function(e,t){A(!1);var n=o([],M.values,!0);n[e]=r(r({},n[e]),t),M.setValues(n)},le=function(e,t){var n,r,i,a=(0,C.isEqual)(null===(n=k[e])||void 0===n?void 0:n[t],null===(r=M.values[e])||void 0===r?void 0:r[t]);switch(!0){case!!(null===(i=M.errors[e])||void 0===i?void 0:i[t]):return"error";case a:return"default";case!a:return"success";default:return"default"}},se=(0,m.default)(M.values),ue=(0,x.useValidateContentList)(),ce=ue.mutateAsync,de=ue.data,pe=ue.isLoading;(0,v.useEffect)((function(){n&&ce(se.map((function(e){return{name:e.name,url:e.url,gpg_key:e.gpgKey,metadata_verification:e.metadataVerification,uuid:e.uuid}}))).then((function(e){return i(void 0,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return[4,M.validateForm(se)];case 1:return t=r.sent(),n=(0,_.mapValidationData)(e,t),M.setErrors(n),A(!0),[2]}}))}))}))}),[se,t,n]);var fe=function(e){var t;(null===(t=M.values[e])||void 0===t?void 0:t.expanded)?oe(e,r(r({},M.values[e]),{expanded:!1})):oe(e,r(r({},M.values[e]),{expanded:!0}))},ve=(0,O.useNotification)().notify,he=G||re||pe||!R;return(0,s.jsx)(u.Modal,r({position:"top",variant:u.ModalVariant.medium,title:"Edit custom repository",ouiaId:"edit_custom_repository",ouiaSafe:!he,help:(0,s.jsx)(u.Popover,r({headerContent:(0,s.jsx)("div",{children:"Edit custom repository"}),bodyContent:(0,s.jsx)("div",{children:"Use this form to edit the values of an existing repository."})},{children:(0,s.jsx)(u.Button,r({variant:"plain","aria-label":"Help"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{})}))})),description:(0,s.jsx)("p",r({className:D.description},{children:"Edit by completing the form. Default values may be provided automatically."})),isOpen:n,onClose:ee,footer:(0,s.jsx)(u.Stack,{children:(0,s.jsxs)(u.StackItem,{children:[(0,s.jsx)(u.Button,r({className:D.saveButton,ouiaId:"edit_modal_save",variant:"primary",isLoading:re,isDisabled:!R||!M.isValid||re||!U||!(0,C.isEqual)(M.values,se),onClick:function(){ne().then(ee)}},{children:U?"Save changes":"No changes"}),"confirm"),(0,s.jsx)(u.Button,r({variant:"link",onClick:ee,ouiaId:"edit_modal_cancel"},{children:"Cancel"}),"cancel")]})})},{children:(0,s.jsxs)(d.TableComposable,r({"aria-label":"Table for edit modal",ouiaId:"edit_modal_table"},{children:[(0,s.jsx)(g.default,r({hide:ie},{children:(0,s.jsx)(d.Tbody,r({isExpanded:ae},{children:(0,s.jsxs)(d.Tr,r({onClick:function(){M.setValues(o([],M.values.map((function(e){return r(r({},e),{expanded:!ae})})),!0))},className:D.toggleAllRow},{children:[(0,s.jsx)(d.Td,{className:D.toggleAction,isActionCell:!0,expand:{rowIndex:0,isExpanded:ae}}),(0,s.jsx)(d.Td,r({dataLabel:"expand-collapse"},{children:ae?"Collapse all":"Expand all"}))]}))}))})),M.values.map((function(e,t){var n,i,a,l,f,v,m,x,b,S=e.expanded,I=e.name,O=e.url,w=e.arch,k=e.gpgKey,E=e.versions,R=e.gpgLoading,A=e.metadataVerification;return(0,s.jsxs)(d.Tbody,r({isExpanded:ie?void 0:S},{children:[(0,s.jsx)(g.default,r({hide:ie},{children:(0,s.jsxs)(d.Tr,r({className:D.colHeader},{children:[(0,s.jsx)(d.Td,{onClick:function(){return fe(t)},className:D.toggleAction,isActionCell:!0,expand:{rowIndex:t,isExpanded:S}}),(0,s.jsx)(d.Td,r({width:35,onClick:function(){return fe(t)},dataLabel:I},{children:I||"New content"})),(0,s.jsx)(d.Td,r({onClick:function(){return fe(t)},dataLabel:"validity"},{children:(0,s.jsx)(j.default,{touched:M.touched[t],errors:M.errors[t]})}))]}))})),(0,s.jsx)(d.Tr,r({isExpanded:ie?void 0:S},{children:(0,s.jsx)(d.Td,r({colSpan:4,className:ie?D.singleContentCol:D.mainContentCol},{children:(0,s.jsxs)(u.Form,{children:[(0,s.jsx)(u.FormGroup,r({label:"Name",isRequired:!0,fieldId:"namegroup",validated:le(t,"name"),helperTextInvalid:null===(n=M.errors[t])||void 0===n?void 0:n.name},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,id:"name",name:"name",label:"Name",ouiaId:"input_name",type:"text",validated:le(t,"name"),onChange:function(e){oe(t,{name:e})},value:I||"",placeholder:"Enter name"})})),(0,s.jsx)(u.FormGroup,r({label:"URL",isRequired:!0,fieldId:"url",validated:le(t,"url"),helperTextInvalid:null===(i=M.errors[t])||void 0===i?void 0:i.url},{children:(0,s.jsx)(u.TextInput,{isRequired:!0,type:"url",validated:le(t,"url"),onBlur:function(){return function(e){!function(e){var t,n,i,a,l,s,u,c,d,p,f,v=null===(t=M.values[e])||void 0===t?void 0:t.url;if((0,_.isValidURL)(v)&&("any"===(null===(n=M.values[e])||void 0===n?void 0:n.arch)||"any"===M.values[e].versions[0])){var h="any"!==(null===(i=M.values[e])||void 0===i?void 0:i.arch)&&(null===(a=M.values[e])||void 0===a?void 0:a.arch)||(null===(l=H.find((function(e){var t=e.name,n=e.label;return v.includes(t)||v.includes(n)})))||void 0===l?void 0:l.label)||"any",g=[];if((null===(u=null===(s=M.values[e])||void 0===s?void 0:s.versions)||void 0===u?void 0:u.length)&&"any"!==M.values[e].versions[0])g=null===(c=M.values[e])||void 0===c?void 0:c.versions;else{var m=null===(d=$.find((function(e){var t=e.name,n=e.label;return v.includes(t)||v.includes("/"+n)})))||void 0===d?void 0:d.label;m&&(g=[m]),(0,C.isEmpty)(g)&&(g=["any"])}if((null===(p=M.values[e])||void 0===p?void 0:p.arch)!==h&&!(0,C.isEqual)(g,null===(f=M.values[e])||void 0===f?void 0:f.arch)){var x=o([],M.values,!0);x[e]=r(r({},x[e]),{arch:h,versions:g}),M.setValues(x)}}}(e)}(t)},onChange:function(e){O!==e&&oe(t,{url:e})},value:O||"",placeholder:"https://",id:"url",name:"url",label:"Url",ouiaId:"input_url"})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict architecture","aria-label":"restrict_to_architecture",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package architecture"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"arch"},{children:(0,s.jsx)(y.default,{ouiaId:"restrict_to_architecture",validated:le(t,"arch"),menuAppendTo:document.body,toggleId:"archSelection"+t,options:Object.keys(X),variant:u.SelectVariant.single,selectedProp:Object.keys(X).find((function(e){return w===X[e]})),setSelected:function(e){return oe(t,{arch:X[e]})}})})),(0,s.jsx)(u.FormGroup,r({label:"Restrict OS version","aria-label":"restrict_to_os_version",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Select value to restrict package OS version"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"version"},{children:(0,s.jsx)(y.default,{ouiaId:"restrict_to_os_version",validated:le(t,"versions"),menuAppendTo:document.body,toggleId:"versionSelection"+t,options:Object.keys(J),variant:u.SelectVariant.typeaheadMulti,selectedProp:Object.keys(J).filter((function(e){return null==E?void 0:E.includes(J[e])})),placeholderText:(null==E?void 0:E.length)?"":"Any version",setSelected:function(e){return function(e,t){var n=e.map((function(e){return J[e]}));0!==e.length&&"any"!==n[e.length-1]||(n=["any"]),n.length>1&&n.includes("any")&&(n=n.filter((function(e){return"any"!==e}))),oe(t,{versions:n})}(e,t)}})})),(0,s.jsx)(u.FormGroup,r({label:"GPG key",labelIcon:(0,s.jsx)(u.Tooltip,r({content:"Optional: Add GPG Key file or URL"},{children:(0,s.jsx)(c.OutlinedQuestionCircleIcon,{className:"pf-u-ml-xs",color:p.global_Color_200.value})})),fieldId:"gpgKey",validated:le(t,"gpgKey"),helperTextInvalid:null===(a=M.errors[t])||void 0===a?void 0:a.gpgKey},{children:(0,s.jsx)(u.FileUpload,{validated:le(t,"gpgKey"),id:"gpgKey-uploader","aria-label":"gpgkey_file_to_upload",type:"text",filenamePlaceholder:"Drag a file here or upload one",textAreaPlaceholder:"Paste GPG key or URL here",value:L[t],isLoading:R,spellCheck:!1,onDataChange:function(e){return K(t,e)},onTextChange:function(e){return K(t,e)},onClearClick:function(){return K(t,"")},dropzoneProps:{maxSize:_.maxUploadSize,onDropRejected:function(e){return(0,_.failedFileUpload)(e,ve)}},allowEditingUploadedText:!0,browseButtonText:"Upload"})})),(0,s.jsx)(g.default,r({hide:h||!k},{children:(0,s.jsxs)(u.FormGroup,r({fieldId:"metadataVerification",label:"Use GPG key for",isInline:!0},{children:[(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(f=null===(l=null==de?void 0:de[t])||void 0===l?void 0:l.url)||void 0===f?void 0:f.metadata_signature_present),id:"package verification only",name:"package-verification-only",label:"Package verification only",isChecked:!A,onChange:function(){return oe(t,{metadataVerification:!1})}}),(0,s.jsx)(P.default,r({show:!0!==(null===(m=null===(v=null==de?void 0:de[t])||void 0===v?void 0:v.url)||void 0===m?void 0:m.metadata_signature_present),content:"This repository's metadata is not signed, metadata verification is not possible."},{children:(0,s.jsx)(u.Radio,{isDisabled:!0!==(null===(b=null===(x=null==de?void 0:de[t])||void 0===x?void 0:x.url)||void 0===b?void 0:b.metadata_signature_present),id:"Package and metadata verification",name:"package-and-repository-verification",label:"Package and metadata verification",isChecked:A,onChange:function(){return oe(t,{metadataVerification:!0})}})})),(0,s.jsx)(g.default,r({hide:"success"!==le(t,"metadataVerification")},{children:(0,s.jsx)(c.CheckCircleIcon,{noVerticalAlign:!0,color:T})}))]}))}))]})}))}))]}),t)}))]}))}))}},45971:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToDefaultFormikValues=t.mapFormikToEditAPIValues=void 0,t.mapFormikToEditAPIValues=function(e){return e.map((function(e){var t=e.name,n=e.url,r=e.arch,i=e.versions,a=e.gpgKey,o=e.metadataVerification;return{uuid:e.uuid,name:t,url:n,distribution_arch:r,distribution_versions:i,gpg_key:a,metadata_verification:o}}))},t.mapToDefaultFormikValues=function(e){return e.map((function(t,n){var r=t.name,i=t.url,a=t.distribution_arch,o=t.distribution_versions,l=t.uuid;return{name:r,url:i,arch:a,versions:o,gpgKey:t.gpg_key,gpgLoading:!1,metadataVerification:t.metadata_verification,expanded:n+1===e.length,uuid:l}}))}},2744:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),l=n(45718),s=n(42060),u=i(n(25574)),c=(0,s.createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1},emptStateBody:{marginBottom:"16px"}});t.default=function(e){var t=e.notFiltered,n=e.clearFilters,i=c();return(0,a.jsxs)(o.EmptyState,r({variant:o.EmptyStateVariant.full,className:i.emptyStateContainer},{children:[(0,a.jsx)(o.EmptyStateIcon,{icon:t?l.PlusCircleIcon:l.SearchIcon}),(0,a.jsx)(o.Title,r({headingLevel:"h2",size:"lg",ouiaId:"empty_custom_title"},{children:t?"No custom repositories":"No custom repositories match the filter criteria"})),(0,a.jsx)(o.EmptyStateBody,r({className:i.emptStateBody},{children:t?"To get started, create a custom repository":"Clear all filters to show more results"})),t?(0,a.jsx)(u.default,{}):(0,a.jsx)(o.Button,r({ouiaId:"clear_filters",variant:"link",onClick:n},{children:"Clear all filters"}))]}))}},23903:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),l=n(42060),s=n(64470),u=n(92950),c=i(n(58578)),d=i(n(21887)),p=(0,l.createUseStyles)({text:{color:s.global_disabled_color_100.value,width:"fit-content"},link:{padding:0}});t.default=function(e){var t=e.rowData,n=p(),i=(0,u.useState)(!1),l=i[0],s=i[1];return t.package_count||"Pending"!==t.status?"Invalid"===t.status?(0,a.jsx)(o.Tooltip,r({isContentLeftAligned:!0,content:"Repository is invalid."},{children:(0,a.jsx)(o.Text,r({className:n.text},{children:"N/A"}))})):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.default,r({hide:!l},{children:(0,a.jsx)(d.default,{rowData:t,closeModal:function(){return s(!1)}})})),(0,a.jsx)(o.Button,r({ouiaId:"package_count_button",variant:"link",onClick:function(){return s(!0)},className:n.link},{children:t.package_count}))]}):(0,a.jsx)(o.Tooltip,r({isContentLeftAligned:!0,content:"Introspection is in progress"},{children:(0,a.jsx)(o.Text,r({className:n.text},{children:"N/A"}))}))}},21887:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),l=n(14040),s=n(64470),u=n(92950),c=n(42060),d=n(92418),p=i(n(58578)),f=n(31104),v=n(51225),h=i(n(91171)),g=i(n(21713)),m=(0,c.createUseStyles)({description:{paddingTop:"12px",paddingBottom:"8px",color:s.global_Color_200.value},mainContainer:{backgroundColor:s.global_BackgroundColor_100.value,display:"flex",flexDirection:"column",height:"100%"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:s.global_secondary_color_100.value,position:"relative",top:"3px",left:"-5px",pointerEvents:"none"}});t.default=function(e){var t=e.rowData,n=t.name,i=t.uuid,s=t.package_count,c=e.closeModal,x=m(),y=Number(localStorage.getItem("packagePerPage"))||20,b=(0,u.useState)(1),_=b[0],j=b[1],S=(0,u.useState)(y),C=S[0],P=S[1],I=(0,u.useState)(""),O=I[0],T=I[1],w=(0,u.useState)(0),k=w[0],E=w[1],R=(0,u.useState)("asc"),A=R[0],N=R[1],L=["Name","Version","Release","Arch"],F=["name","version","release","arch"],D=(0,u.useMemo)((function(){return F[k]+":"+A}),[k,A]),V=(0,h.default)(O);(0,u.useEffect)((function(){j(1)}),[V,D]);var M=(0,f.useGetPackagesQuery)(i,s,_,C,V,D),U=M.isLoading,K=M.isFetching,B=M.error,Q=M.isError,G=M.data,q=void 0===G?{data:[],meta:{count:0,limit:20,offset:0}}:G,Y=function(e,t){return j(t)},z=function(e,t,n){P(t),j(n),localStorage.setItem("packagePerPage",t.toString())},H=function(e,t){if(!t)return{sortBy:{index:k,direction:A,defaultDirection:"asc"},onSort:function(e,t,n){E(t),N(n)},columnIndex:e}};if(Q)throw B;var W=q.data,$=void 0===W?[]:W,Z=q.meta.count,X=void 0===Z?0:Z,J=K||U,ee=!J&&!X;return(0,a.jsx)(o.Modal,r({position:"top",hasNoBodyWrapper:!0,"aria-label":"RPM package modal",ouiaId:"rpm_package_modal",ouiaSafe:J,variant:o.ModalVariant.medium,title:"Packages",description:(0,a.jsxs)("p",r({className:x.description},{children:["View list of packages for ",(0,a.jsx)("b",{children:n})]})),isOpen:!0,onClose:c,footer:(0,a.jsx)(o.Button,r({variant:"secondary",onClick:c},{children:"Close"}),"close")},{children:(0,a.jsx)(l.InnerScrollContainer,{children:(0,a.jsxs)(o.Grid,r({className:x.mainContainer},{children:[(0,a.jsxs)(o.Flex,r({className:x.topContainer},{children:[(0,a.jsxs)(o.Flex,{children:[(0,a.jsx)(o.TextInput,{id:"search",ouiaId:"name_search",placeholder:"Filter by name",value:O,onChange:function(e){return T(e)},className:x.searchInput}),(0,a.jsx)(v.SearchIcon,{size:"sm",className:x.searchIcon})]}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(p.default,r({hide:ee},{children:(0,a.jsx)(o.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",itemCount:X,perPage:C,page:_,onSetPage:Y,isCompact:!0,onPerPageSelect:z})}))})]})),(0,a.jsx)(p.default,r({hide:!J},{children:(0,a.jsx)(o.Grid,r({className:x.mainContainer},{children:(0,a.jsx)(d.SkeletonTable,{rowSize:C,colSize:L.length,variant:l.TableVariant.compact})}))})),(0,a.jsx)(p.default,r({hide:J},{children:(0,a.jsxs)(l.TableComposable,r({"aria-label":"Custom repositories table",ouiaId:"packages_table",variant:"compact"},{children:[(0,a.jsx)(l.Thead,{children:(0,a.jsx)(l.Tr,{children:L.map((function(e,t){return(0,a.jsx)(l.Th,r({sort:H(t,ee)},{children:e}),e+"_column")}))})}),(0,a.jsxs)(l.Tbody,{children:[$.map((function(e,t){var n=e.name,r=e.version,i=e.release,o=e.arch;return(0,a.jsxs)(l.Tr,{children:[(0,a.jsx)(l.Td,{children:n}),(0,a.jsx)(l.Td,{children:r}),(0,a.jsx)(l.Td,{children:i}),(0,a.jsx)(l.Td,{children:o})]},n+t)})),(0,a.jsx)(p.default,r({hide:!ee},{children:(0,a.jsx)(g.default,{clearSearch:function(){return T("")}})}))]})]}))})),(0,a.jsxs)(o.Flex,r({className:x.bottomContainer},{children:[(0,a.jsx)(o.FlexItem,{}),(0,a.jsx)(o.FlexItem,{children:(0,a.jsx)(p.default,r({hide:ee},{children:(0,a.jsx)(o.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:X,perPage:C,page:_,onSetPage:Y,variant:o.PaginationVariant.bottom,onPerPageSelect:z})}))})]}))]}))})}),i)}},21713:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(45718),l=n(14040),s=(0,n(42060).createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1,margin:"auto"}});t.default=function(e){var t=e.clearSearch,n=s();return(0,i.jsx)(l.Tr,{children:(0,i.jsx)(l.Td,r({colSpan:4},{children:(0,i.jsx)(a.Bullseye,{children:(0,i.jsxs)(a.EmptyState,r({variant:a.EmptyStateVariant.full,className:n.emptyStateContainer},{children:[(0,i.jsx)(a.EmptyStateIcon,{icon:o.SearchIcon}),(0,i.jsx)(a.Title,r({headingLevel:"h2",size:"lg"},{children:"No packages match the search criteria"})),(0,i.jsx)(a.EmptyStateBody,{children:"Clear your current search to show more results"}),(0,i.jsx)(a.Button,r({ouiaId:"clear_filters",variant:"link",onClick:t},{children:"Clear search"}))]}))})}))})}},29906:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(51225),l=n(89624),s=i(n(30282)),u=n(64470),c=n(42060),d=i(n(27484)),p=n(84110),f=i(n(55537)),v=n(28803);d.default.extend(p);var h=u.global_danger_color_100.value,g=u.global_success_color_100.value,m=u.global_warning_color_100.value,x=(0,c.createUseStyles)({spinner:{animationDuration:"6s !important",margin:"-3px 0"}}),y=function(e){var t=e.error,n=e.count,i=e.time,o=""===i||void 0===i?"Never":(0,d.default)(i).fromNow();return(0,a.jsxs)("div",{children:[t,(0,a.jsxs)(l.Flex,{children:[(0,a.jsxs)(l.Stack,r({className:"pf-u-mt-sm"},{children:[(0,a.jsx)(l.StackItem,r({className:"pf-u-font-weight-bold"},{children:"Last introspection"})),(0,a.jsxs)(l.StackItem,{children:[" ",o," "]})]})),(0,a.jsxs)(l.Stack,r({className:"pf-u-mt-sm"},{children:[(0,a.jsx)(l.StackItem,r({className:"pf-u-font-weight-bold"},{children:"Failed attempts"})),(0,a.jsxs)(l.StackItem,{children:[" ",n," "]})]}))]})]})},b=function(e){var t=e.retryHandler,n=e.uuid,i=(0,v.useAppContext)().rbac;return(0,a.jsx)(l.Flex,{children:(0,a.jsx)(f.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==i?void 0:i.write),setDisabled:!0},{children:(0,a.jsx)(l.Button,r({variant:"link",isInline:!0,onClick:function(){return t?t(n):null}},{children:"Retry"}))}))})};t.default=function(e){var t=e.rowData,n=t.uuid,i=t.status,u=t.failed_introspections_count,c=t.last_introspection_time,d=t.last_introspection_error,p=e.retryHandler,f=x();switch(i){case"Valid":return(0,a.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.CheckCircleIcon,{color:g})})),(0,a.jsx)(l.FlexItem,{children:(0,a.jsx)(s.default,r({color:"green"},{children:"Valid"}))})]}));case"Invalid":return(0,a.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.ExclamationCircleIcon,{color:h})})),(0,a.jsx)(l.FlexItem,{children:(0,a.jsx)(l.Popover,r({"aria-label":"invalid popover",alertSeverityVariant:"danger",headerContent:"Invalid",headerIcon:(0,a.jsx)(o.ExclamationCircleIcon,{}),bodyContent:(0,a.jsx)(y,{error:d,count:u,time:c}),position:"left",footerContent:(0,a.jsx)(b,{retryHandler:p,uuid:n})},{children:(0,a.jsx)(l.Button,r({variant:"link",isInline:!0},{children:(0,a.jsx)(s.default,r({color:"red",isLink:!0},{children:"Invalid"}))}))}))})]}));case"Unavailable":return(0,a.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(o.ExclamationTriangleIcon,{color:m})})),(0,a.jsx)(l.FlexItem,{children:(0,a.jsx)(l.Popover,r({"aria-label":"unavailable popover",alertSeverityVariant:"warning",headerContent:"Unavailable",headerIcon:(0,a.jsx)(o.ExclamationTriangleIcon,{}),bodyContent:(0,a.jsx)(y,{error:d,count:u,time:c}),position:"left",footerContent:(0,a.jsx)(b,{retryHandler:p,uuid:n})},{children:(0,a.jsx)(s.default,r({color:"gold",isLink:!0},{children:"Unavailable"}))}))})]}));case"Pending":return(0,a.jsx)(l.Tooltip,r({position:"top-start",content:"Repository is being introspected"},{children:(0,a.jsxs)(l.Flex,r({alignContent:{default:"alignContentCenter"},direction:{default:"row"}},{children:[(0,a.jsx)(l.FlexItem,r({spacer:{default:"spacerSm"}},{children:(0,a.jsx)(l.Spinner,{size:"md",className:f.spinner})})),(0,a.jsx)(l.FlexItem,{children:(0,a.jsx)(s.default,r({color:"blue"},{children:"In progress"}))})]}))}));default:return(0,a.jsx)(a.Fragment,{})}}},30282:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(42060),o=n(64470),l=o.global_danger_color_200.value,s=o.global_success_color_200.value,u=o.global_warning_color_200.value,c=o.global_info_color_200.value;t.default=function(e){var t,n=(t=e.isLink,(0,a.createUseStyles)({fontStyle:r({fontWeight:"bold",fontSize:"14px"},t?{textDecoration:"grey dotted underline",cursor:"pointer"}:{}),red:{extend:"fontStyle",color:l},green:{extend:"fontStyle",color:s},gold:{extend:"fontStyle",color:u},blue:{extend:"fontStyle",color:c}}))(),o=e.color,d=e.children;return(0,i.jsx)("span",r({className:n[o]},{children:d}))}},11947:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),l=n(89624),s=n(14040),u=n(64470),c=n(92950),d=n(42060),p=n(92418),f=n(31104),v=a(n(58578)),h=n(88767),g=n(28803),m=a(n(55537)),x=a(n(87322)),y=n(51225),b=a(n(91171)),_=a(n(69744)),j=(0,d.createUseStyles)({mainContainer:{backgroundColor:u.global_BackgroundColor_100.value,display:"flex",flexDirection:"column"},topContainer:{justifyContent:"space-between",padding:"16px 24px",height:"fit-content"},bottomContainer:{justifyContent:"space-between",height:"fit-content"},invisible:{opacity:0},searchInput:{paddingRight:"35px",marginRight:"-23px"},searchIcon:{color:u.global_secondary_color_100.value,position:"relative",left:"-5px",pointerEvents:"none"},addRepositoriesButton:{marginLeft:"16px"},checkboxMinWidth:{minWidth:"45px!important"},disabled:{color:u.global_disabled_color_100.value}});t.default=function(){var e,t=j(),n=(0,h.useQueryClient)(),a=(0,g.useAppContext)().rbac,u=(0,c.useState)([]),d=u[0],S=u[1],C=(0,c.useState)([]),P=C[0],I=C[1],O=(0,c.useState)(""),T=O[0],w=O[1],k=Number(localStorage.getItem("perPage"))||20,E=(0,c.useState)(1),R=E[0],A=E[1],N=(0,c.useState)(""),L=N[0],F=N[1],D=(0,b.default)(L),V=(0,c.useState)(k),M=V[0],U=V[1],K=(0,f.usePopularRepositoriesQuery)(R,M,{searchQuery:D}),B=K.isLoading,Q=K.error,G=K.isError,q=K.isFetching,Y=K.data,z=void 0===Y?{data:[],meta:{count:0,limit:20,offset:0}}:Y,H=(0,c.useMemo)((function(){return z.data.every((function(e){return!!e.uuid}))}),[z]),W=(0,c.useMemo)((function(){return d.some((function(e){return e}))}),[d]),$=(0,c.useMemo)((function(){return!H&&z.data.every((function(e,t){return!!e.uuid||d[t]}))}),[z,d,H]),Z=(0,f.useRepositoryParams)(),X=Z.isLoading,J=Z.error,ee=Z.isError,te=Z.data,ne=void 0===te?{distribution_versions:[],distribution_arches:[]}:te,re=ne.distribution_versions,ie=ne.distribution_arches,ae=(0,f.useAddPopularRepositoryQuery)(n,P,R,M,{searchQuery:D}),oe=ae.mutateAsync,le=ae.isLoading;(0,c.useEffect)((function(){q||(I([]),w(""),S(z.data.map((function(){return!1}))))}),[q]),(0,c.useEffect)((function(){var e;(null===(e=null==z?void 0:z.data)||void 0===e?void 0:e.length)>0&&0===d.length&&S(z.data.map((function(){return!1})))}),[null===(e=null==z?void 0:z.data)||void 0===e?void 0:e.length]),(0,c.useEffect)((function(){0!=P.length&&oe().then((function(){return I([])}),(function(){return I([])}))}),[P]),(0,c.useEffect)((function(){T&&ce(T).then(void 0,(function(){return w("")}))}),[T]);var se=function(e){var t;return null===(t=ie.find((function(t){var n=t.label;return e===n})))||void 0===t?void 0:t.name},ue=(0,f.useDeletePopularRepositoryMutate)(n,R,M,{searchQuery:D}),ce=ue.mutateAsync,de=ue.isLoading,pe=de||q||X||le,fe=function(e,t){return A(t)},ve=function(e,t,n){localStorage.setItem("perPage",t.toString()),U(t),A(n)},he=["Name","Architecture","Versions"];if(G)throw Q;if(ee)throw J;var ge=z.data,me=void 0===ge?[]:ge,xe=z.meta.count,ye=void 0===xe?0:xe;return(0,o.jsxs)(l.Grid,r({"data-ouia-safe":!pe,"data-ouia-component-id":"popular_repositories_page",className:t.mainContainer},{children:[(0,o.jsxs)(l.Flex,r({className:t.topContainer},{children:[(0,o.jsx)(l.FlexItem,{children:(0,o.jsxs)(l.InputGroup,{children:[(0,o.jsxs)(l.FlexItem,{children:[(0,o.jsx)(l.TextInput,{isDisabled:B,id:"search",ouiaId:"popular_filter_search",placeholder:"Filter by name/url",value:L,onChange:F,className:t.searchInput}),(0,o.jsx)(y.SearchIcon,{size:"sm",className:t.searchIcon})]}),(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(m.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==a?void 0:a.write),setDisabled:!0},{children:(0,o.jsx)(l.Button,r({onClick:function(){var e=[];d.forEach((function(t,n){if(t&&(null==z?void 0:z.data[n])&&!z.data[n].uuid){var r=z.data[n],i=r.suggested_name,a=r.url,o=r.distribution_versions,l=r.distribution_arch,s=r.gpg_key,u=r.metadata_verification;e.push({name:i,url:a,distribution_versions:o,distribution_arch:l,gpg_key:s,metadata_verification:u})}})),I(e)},className:t.addRepositoriesButton,isDisabled:!W,ouiaId:"add_checked_repos"},{children:"Add repositories"}))}))})]})}),(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(v.default,r({hide:B},{children:(0,o.jsx)(l.Pagination,{id:"top-pagination-id",widgetId:"topPaginationWidgetId",perPageComponent:"button",isDisabled:B,itemCount:ye,perPage:M,page:R,onSetPage:fe,isCompact:!0,onPerPageSelect:ve})}))})]})),(0,o.jsx)(v.default,r({hide:!B},{children:(0,o.jsx)(l.Grid,r({className:t.mainContainer},{children:(0,o.jsx)(p.SkeletonTable,{rowSize:M,colSize:he.length,variant:s.TableVariant.compact})}))})),(0,o.jsx)(v.default,r({hide:B},{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.TableComposable,r({"aria-label":"Popular repositories table",ouiaId:"popular_repos_table",variant:"compact"},{children:[(0,o.jsx)(s.Thead,{children:(0,o.jsxs)(s.Tr,{children:[(0,o.jsx)(v.default,r({hide:!(null==a?void 0:a.write)},{children:(0,o.jsx)(s.Th,{className:t.checkboxMinWidth,select:{onSelect:function(e,t){return S(z.data.map((function(){return t})))},isSelected:$,isHeaderSelectDisabled:H}})})),he.map((function(e){return(0,o.jsx)(s.Th,{children:e},e+"column")})),(0,o.jsx)(s.Th,{children:(0,o.jsx)(l.Spinner,{size:"md",className:pe?"":t.invisible})})]})}),(0,o.jsx)(s.Tbody,{children:me.map((function(e,n){var u,c,p=e.uuid,f=e.existing_name,h=e.suggested_name,g=e.url,y=e.distribution_arch,b=e.distribution_versions,_=e.gpg_key,j=e.metadata_verification;return(0,o.jsxs)(s.Tr,{children:[(0,o.jsx)(v.default,r({hide:!(null==a?void 0:a.write)},{children:(0,o.jsx)(s.Td,{select:{rowIndex:n,onSelect:function(e,t){return r=t,(a=d)[n]=r,void S(i([],a,!0));var r,a},isSelected:!p&&d[n],disable:!!p}})})),(0,o.jsx)(s.Td,{children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.Flex,r({direction:{default:"row"}},{children:[(0,o.jsxs)(l.FlexItem,{children:[" ",h]}),f&&h!==f&&(0,o.jsxs)(l.FlexItem,r({className:t.disabled},{children:["Current name: ",f]}))]})),(0,o.jsx)(x.default,{href:g})]})}),(0,o.jsx)(s.Td,{children:se(y)}),(0,o.jsx)(s.Td,{children:(c=b,re.filter((function(e){var t=e.label;return null==c?void 0:c.includes(t)})).map((function(e){return e.name})).join(", "))}),(0,o.jsx)(s.Td,r({width:10},{children:(0,o.jsx)(m.default,r({content:"You do not have the required permissions to perform this action.",show:!(null==a?void 0:a.write),setDisabled:!0},{children:p?(0,o.jsx)(l.Button,r({isDisabled:p===T||le,onClick:function(){return w(p)},variant:"danger",ouiaId:"remove_popular_repo"},{children:"Remove"})):(0,o.jsx)(l.Button,r({variant:"secondary",isDisabled:(null===(u=P[n])||void 0===u?void 0:u.url)===g||q||de,onClick:function(){var e=[];e[n]={name:h,url:g,distribution_versions:b,distribution_arch:y,gpg_key:_,metadata_verification:j},I(e)},ouiaId:"add_popular_repo"},{children:"Add"}))}))}))]},h+n)}))})]})),(0,o.jsxs)(l.Flex,r({className:t.bottomContainer},{children:[(0,o.jsx)(l.FlexItem,{}),(0,o.jsx)(l.FlexItem,{children:(0,o.jsx)(l.Pagination,{id:"bottom-pagination-id",widgetId:"bottomPaginationWidgetId",perPageComponent:"button",itemCount:ye,perPage:M,page:R,onSetPage:fe,variant:l.PaginationVariant.bottom,onPerPageSelect:ve})})]}))]})})),(0,o.jsx)(v.default,r({hide:0!==z.data.length||B},{children:(0,o.jsx)(_.default,{clearFilters:function(){return F("")}})}))]}))}},69744:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(45718),l=(0,n(42060).createUseStyles)({emptyStateContainer:{display:"flex",flexGrow:1},emptStateBody:{marginBottom:"16px"}});t.default=function(e){var t=e.clearFilters,n=l();return(0,i.jsxs)(a.EmptyState,r({variant:a.EmptyStateVariant.full,className:n.emptyStateContainer},{children:[(0,i.jsx)(a.EmptyStateIcon,{icon:o.SearchIcon}),(0,i.jsx)(a.Title,r({headingLevel:"h2",size:"lg"},{children:"No popular repositories match the filter criteria"})),(0,i.jsx)(a.EmptyStateBody,r({className:n.emptStateBody},{children:"Clear all filters to show more results"})),(0,i.jsx)(a.Button,r({ouiaId:"clear_filters",variant:"link",onClick:t},{children:"Clear search filter"}))]}))}},62050:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.POPULAR_REPOSITORIES_ROUTE=t.DEFAULT_ROUTE=void 0;var a=n(85893),o=n(92950),l=n(89624),s=n(16114),u=n(64470),c=n(42060),d=n(78280),p=i(n(98243)),f=i(n(11947)),v=n(44439),h=i(n(46517)),g=i(n(64722)),m=(0,c.createUseStyles)({tabs:{backgroundColor:u.global_BackgroundColor_100.value},tab:{"& button":{padding:0}},link:{color:"inherit",textDecoration:"none",padding:"8px 16px","&:focus-visible":{outlineOffset:"-6px"}},containerMargin:{margin:"24px"}});t.DEFAULT_ROUTE="",t.POPULAR_REPOSITORIES_ROUTE="popular-repositories";var x=[{title:"Your repositories",route:t.DEFAULT_ROUTE,Element:p.default},{title:"Popular repositories",route:t.POPULAR_REPOSITORIES_ROUTE,Element:f.default}];t.default=function(){var e=m(),n=(0,s.useLocation)(),i=n.pathname,u=n.key,c=(0,o.useMemo)((function(){return(0,v.last)(i.split("/"))}),[i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.default,{}),(0,a.jsx)(l.Tabs,r({className:e.tabs,ouiaId:"routed-tabs",activeKey:c},{children:x.map((function(t){var n=t.title,i=t.route;return(0,a.jsx)(l.Tab,{className:e.tab,keyParams:i,tabIndex:-1,eventKey:i||"content","aria-label":n,ouiaId:n,title:(0,a.jsx)(s.Link,r({className:e.link,accessKey:i,to:i},{children:(0,a.jsx)(l.TabTitleText,{children:n})}),i)},i)}))})),(0,a.jsx)(g.default,{}),(0,a.jsxs)(s.Routes,{children:[x.map((function(t,n){var i=t.route,o=t.Element;return(0,a.jsx)(s.Route,{path:i,element:(0,a.jsx)(d.ErrorPage,{children:(0,a.jsx)(l.Grid,r({className:e.containerMargin},{children:(0,a.jsx)(o,{})}))})},n.toString())})),(0,a.jsx)(s.Route,{path:"*",element:(0,a.jsx)(s.Navigate,{to:t.DEFAULT_ROUTE,replace:!0})})]},u)]})}},55537:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85893),o=n(89624),l=n(92950);t.default=function(e){var t=e.show,n=e.children,s=e.setDisabled,u=i(e,["show","children","setDisabled"]);return t?(0,a.jsx)(o.Tooltip,r({},u,{children:(0,a.jsx)("div",{children:n&&(0,l.cloneElement)(n,s?{isDisabled:s}:void 0)})})):(0,a.jsx)(a.Fragment,{children:n})}},6378:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},l=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var u=n(85893),c=n(89624),d=o(n(92950));t.default=function(e){var t=e.options,n=e.variant,i=e.selectedProp,a=e.setSelected,o=e.toggleIcon,p=e.placeholderText,f=e.isDisabled,v=l(e,["options","variant","selectedProp","setSelected","toggleIcon","placeholderText","isDisabled"]),h=Array.isArray(i)?i:[i],g=(0,d.useState)(!1),m=g[0],x=g[1],y=t.map((function(e,t){return(0,u.jsx)(c.SelectOption,{id:e,value:e},e+t)}));return(0,u.jsx)(c.Select,r({isDisabled:f,variant:n,onSelect:function(e,t){switch(n){case c.SelectVariant.single:a(t),x(!1);break;case c.SelectVariant.typeaheadMulti:case c.SelectVariant.checkbox:if(Array.isArray(i)){if(h.includes(t)){var r=h.filter((function(e){return e!==t}));a(r);break}a(s(s([],h,!0),[t],!1));break}}},selections:h,isOpen:m,onToggle:function(e){return x(e)},placeholderText:p,isCheckboxSelectionBadgeHidden:!0,toggleIcon:o},v,{children:y}))}},78280:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPage=void 0;var i=n(85893),a=n(92418).ErrorBoundary;t.ErrorPage=function(e){var t=e.children;return(0,i.jsx)(a,r({headerTitle:"Content Sources",errorTitle:"Unhandled error",errorDescription:"There was a problem trying to process your request"},{children:t}))}},46517:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(89624),o=n(92418),l=n(64470),s=n(42060),u=o.PageHeader,c=(0,s.createUseStyles)({subtext:{color:l.global_Color_100.value,paddingTop:"8px"}});t.default=function(){var e=c();return(0,i.jsxs)(u,{children:[(0,i.jsx)(o.PageHeaderTitle,{title:"Custom Repositories"}),(0,i.jsx)(a.Text,r({className:e.subtext,ouiaId:"custom_repositories_description"},{children:"View all custom repositories within your organization."}))]})}},58578:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(85893);t.default=function(e){var t=e.hide,n=e.children;return t?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(r.Fragment,{children:n})}},72734:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.NoPermissionsPage=void 0;var i=n(85893),a=n(89624),o=n(51225),l=n(92418),s=l.PageHeader;t.NoPermissionsPage=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s,{children:(0,i.jsx)(l.PageHeaderTitle,{title:"Repositories"})}),(0,i.jsx)(a.Grid,r({style:{margin:"24px"}},{children:(0,i.jsxs)(a.EmptyState,r({variant:a.EmptyStateVariant.full},{children:[(0,i.jsx)(a.EmptyStateIcon,{icon:o.LockIcon}),(0,i.jsx)(a.Title,r({headingLevel:"h5",size:"lg"},{children:"You do not have access to Repositories"})),(0,i.jsx)(a.EmptyStateBody,{children:"Contact your organization administrator(s) for more information."})]}))}))]})}},64722:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85893),l=n(89624),s=n(64470),u=n(92950),c=n(42060),d=n(95699),p=n(51225),f=(0,c.createUseStyles)({quickstartContainer:{margin:"24px 24px 0",backgroundColor:s.global_BackgroundColor_100.value},quickstartSpinner:{margin:"0 0 -4px 5px"},buildCustomButton:{marginTop:"20px",padding:0,fontWeight:600}});t.default=function(){var e=this,t=(0,d.useChrome)(),n=t.isBeta,s=t.quickStarts,c=(0,u.useMemo)(n,[]),v=(0,u.useState)(c),h=v[0],g=v[1],m=(0,u.useState)(!1),x=m[0],y=m[1],b=f();if(!c)return(0,o.jsx)(o.Fragment,{});var _=function(){return g((function(e){return!e}))};return(0,o.jsx)(l.Grid,r({className:b.quickstartContainer},{children:(0,o.jsxs)(l.ExpandableSection,r({toggleText:"Need help getting started with Preview features?",onToggle:_,isExpanded:h,displaySize:"large","aria-label":"quickStart-expansion","data-ouia-component-id":"quickstart_expand"},{children:[(0,o.jsx)(l.Text,{children:"For help getting started, access the quick start below:"}),(0,o.jsx)(l.Button,r({className:b.buildCustomButton,iconPosition:"right",icon:x?(0,o.jsx)(l.Spinner,{size:"md",className:b.quickstartSpinner}):(0,o.jsx)(p.ArrowRightIcon,{}),variant:"link",ouiaId:"quickstart_link",onClick:function(){return i(e,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:y(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,null==s?void 0:s.activateQuickstart("insights-custom-repos")];case 2:return t.sent(),_(),[3,4];case 3:return e=t.sent(),console.warn(e),[3,4];case 4:return y(!1),[2]}}))}))},isDisabled:x},{children:"Build an Image with Custom Content"}))]}))}))}},87322:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85893),a=n(51225),o=(0,n(42060).createUseStyles)({link:{alignItems:"center",display:"flex",width:"fit-content"},icon:{marginLeft:"5px"}});t.default=function(e){var t=e.href,n=o();return(0,i.jsxs)("a",r({href:t,className:n.link,rel:"noreferrer",target:"_blank"},{children:[t," ",(0,i.jsx)(a.ExternalLinkAltIcon,{className:n.icon})]}))}},28803:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useAppContext=t.ContextProvider=t.AppContext=void 0;var i=n(85893),a=n(92950),o=n(9390);t.AppContext=(0,a.createContext)({}),t.ContextProvider=function(e){var n=e.children,l=(0,a.useState)(void 0),s=l[0],u=l[1],c=(0,o.useFlag)("content-sources.hide-package-verification")||!1;return(0,i.jsx)(t.AppContext.Provider,r({value:{hidePackageVerification:c,setRbac:u,rbac:s?{read:null==s?void 0:s.hasPermission("content-sources","repositories","read"),write:null==s?void 0:s.hasPermission("content-sources","repositories","write")}:void 0}},{children:n}))},t.useAppContext=function(){return(0,a.useContext)(t.AppContext)}},34427:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.introspectRepository=t.getPackages=t.getGpgKey=t.validateContentListItems=t.getRepositoryParams=t.EditContentListItem=t.AddContentListItems=t.deleteContentListItem=t.getContentList=t.getPopularRepositories=void 0;var o=a(n(78991));t.getPopularRepositories=function(e,t,n,a){return r(void 0,void 0,void 0,(function(){var r,l,s,u,c;return i(this,(function(i){switch(i.label){case 0:return r=null==n?void 0:n.searchQuery,l=null===(u=null==n?void 0:n.versions)||void 0===u?void 0:u.join(","),s=null===(c=null==n?void 0:n.arches)||void 0===c?void 0:c.join(","),[4,o.default.get("/api/content-sources/v1/popular_repositories/?offset=".concat((e-1)*t,"&limit=").concat(t,"&search=").concat(r,"&version=").concat(l,"&arch=").concat(s,"&sort_by=").concat(a))];case 1:return[2,i.sent().data]}}))}))},t.getContentList=function(e,t,n,a){return r(void 0,void 0,void 0,(function(){var r,l,s,u,c;return i(this,(function(i){switch(i.label){case 0:return r=n.searchQuery,l=n.versions.join(","),s=n.arches.join(","),u=null===(c=null==n?void 0:n.statuses)||void 0===c?void 0:c.join(","),[4,o.default.get("/api/content-sources/v1/repositories/?offset=".concat((e-1)*t,"&limit=").concat(t,"&search=").concat(r,"&version=").concat(l,"&status=").concat(u,"&arch=").concat(s,"&sort_by=").concat(a))];case 1:return[2,i.sent().data]}}))}))},t.deleteContentListItem=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.delete("/api/content-sources/v1/repositories/".concat(e))];case 1:return[2,t.sent().data]}}))}))},t.AddContentListItems=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1.0/repositories/bulk_create/",e)];case 1:return[2,t.sent().data]}}))}))},t.EditContentListItem=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.patch("/api/content-sources/v1.0/repositories/".concat(e.uuid),e)];case 1:return[2,t.sent().data]}}))}))},t.getRepositoryParams=function(){return r(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,o.default.get("/api/content-sources/v1/repository_parameters/")];case 1:return[2,e.sent().data]}}))}))},t.validateContentListItems=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1.0/repository_parameters/validate/",e)];case 1:return[2,t.sent().data]}}))}))},t.getGpgKey=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1/repository_parameters/external_gpg_key/",{url:e})];case 1:return[2,t.sent().data]}}))}))},t.getPackages=function(e,t,n,a,l){return r(void 0,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,o.default.get("/api/content-sources/v1.0/repositories/".concat(e,"/rpms?offset=").concat((t-1)*n,"&limit=").concat(n,"&search=").concat(a,"&sort_by=").concat(l))];case 1:return[2,r.sent().data]}}))}))},t.introspectRepository=function(e){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o.default.post("/api/content-sources/v1/repositories/".concat(e.uuid,"/introspect/"),{reset_count:e.reset_count})];case 1:return[2,t.sent().data]}}))}))}},31104:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useIntrospectRepositoryMutate=t.useGetPackagesQuery=t.useFetchGpgKey=t.useRepositoryParams=t.useDeleteContentItemMutate=t.useDeletePopularRepositoryMutate=t.useValidateContentList=t.useEditContentQuery=t.useAddPopularRepositoryQuery=t.useAddContentQuery=t.useContentListQuery=t.usePopularRepositoriesQuery=t.PACKAGES_KEY=t.CREATE_PARAMS_KEY=t.REPOSITORY_PARAMS_KEY=t.POPULAR_REPOSITORIES_LIST_KEY=t.CONTENT_LIST_KEY=void 0;var l=n(89624),s=n(92950),u=n(88767),c=n(44439),d=n(73773),p=n(34427);t.CONTENT_LIST_KEY="CONTENT_LIST_KEY",t.POPULAR_REPOSITORIES_LIST_KEY="POPULAR_REPOSITORIES_LIST_KEY",t.REPOSITORY_PARAMS_KEY="REPOSITORY_PARAMS_KEY",t.CREATE_PARAMS_KEY="CREATE_PARAMS_KEY",t.PACKAGES_KEY="PACKAGES_KEY",t.usePopularRepositoriesQuery=function(e,n,r,i){return(0,u.useQuery)(o([t.POPULAR_REPOSITORIES_LIST_KEY,e,n,i],Object.values(r||{}),!0),(function(){return(0,p.getPopularRepositories)(e,n,r,i)}),{keepPreviousData:!0,staleTime:2e4})},t.useContentListQuery=function(e,n,r,i){var a=(0,s.useState)(!1),l=a[0],c=a[1],d=(0,s.useState)(0),f=d[0],v=d[1];return(0,u.useQuery)(o([t.CONTENT_LIST_KEY,e,n,i],Object.values(r),!0),(function(){return(0,p.getContentList)(e,n,r,i)}),{onSuccess:function(e){var t,n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.some((function(e){var t=e.status;return"Pending"===t||""===t}));return l&&n&&v(f+1),l&&!n&&v(0),c(!(f>40)&&n)},onError:function(){c(!1),v(0)},refetchInterval:l?15e3:void 0,refetchIntervalInBackground:!1,refetchOnWindowFocus:l,keepPreviousData:!0,staleTime:2e4})},t.useAddContentQuery=function(e,n){var r=(0,d.useNotification)().notify;return(0,u.useMutation)((function(){return(0,p.AddContentListItems)(n.filter((function(e){return!!e})))}),{onSuccess:function(i){var a,o=i.some((function(e){return"Pending"===e.status}));r({variant:l.AlertVariant.success,title:(null==n?void 0:n.length)>1?"".concat(null==n?void 0:n.length," custom repositories added"):'Custom repository "'.concat(null===(a=null==n?void 0:n[0])||void 0===a?void 0:a.name,'" added'),description:o?"Repository introspection in progress":"Repository introspection data already available"}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(e){var t,n,i,a,o,s="An error occurred";switch(typeof(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)){case"string":s=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data;break;case"object":null===(o=null===(a=null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.data.errors)||void 0===a?void 0:a.find((function(e){var t=e.detail;if(t)return s=t,!0})))||void 0===o||o.detail}r({variant:l.AlertVariant.danger,title:"Error adding items to content list",description:s})}})},t.useAddPopularRepositoryQuery=function(e,n,s,c,f){var v=(0,d.useNotification)().notify,h=o([t.POPULAR_REPOSITORIES_LIST_KEY,s,c,void 0],Object.values(f||{}),!0),g=n.filter((function(e){return!!e}));return(0,u.useMutation)((function(){return(0,p.AddContentListItems)(g)}),{onMutate:function(){return i(void 0,void 0,void 0,(function(){var t,n;return a(this,(function(i){switch(i.label){case 0:return t=g[0].name,[4,e.cancelQueries(h)];case 1:return i.sent(),n=e.getQueryData(h)||{},e.setQueryData(h,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.map((function(e){return t!==e.suggested_name||e.uuid?e:r(r({},e),{uuid:"temp",existing_name:t})}))})})),[2,{previousData:n}]}}))}))},onSuccess:function(n){var r,i=n.some((function(e){return"Pending"===e.status}));v({variant:l.AlertVariant.success,title:'Custom repository "'.concat(null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.name,'" added'),description:i?"Repository introspection in progress":"Repository introspection data already available"}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(h,i);var a=t;v({variant:l.AlertVariant.danger,title:"Error deleting item from popularRepo",description:null==a?void 0:a.message})}}})},t.useEditContentQuery=function(e,n){var r=(0,d.useNotification)().notify;return(0,u.useMutation)((function(){return(0,p.EditContentListItem)(n[0])}),{onSuccess:function(){r({variant:l.AlertVariant.success,title:"Successfully edited ".concat(n.length," ").concat(n.length>1?"items":"item")}),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(e){var t,n,i,a,o,s="An error occurred";switch(typeof(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)){case"string":s=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data;break;case"object":null===(o=null===(a=null===(i=null==e?void 0:e.response)||void 0===i?void 0:i.data.errors)||void 0===a?void 0:a.find((function(e){var t=e.detail;if(t)return s=t,!0})))||void 0===o||o.detail}r({variant:l.AlertVariant.danger,title:"Error editing items on content list",description:s})}})},t.useValidateContentList=function(){var e=(0,d.useNotification)().notify;return(0,u.useMutation)((function(e){return(0,p.validateContentListItems)(e)}),{onError:function(t){var n=t;e({variant:l.AlertVariant.danger,title:"Error validating form fields",description:null==n?void 0:n.message})}})},t.useDeletePopularRepositoryMutate=function(e,n,s,c){var f=o([t.POPULAR_REPOSITORIES_LIST_KEY,n,s,void 0],Object.values(c||{}),!0),v=(0,d.useNotification)().notify;return(0,u.useMutation)(p.deleteContentListItem,{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return[4,e.cancelQueries(f)];case 1:return i.sent(),n=e.getQueryData(f)||{},e.setQueryData(f,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.map((function(e){return e.uuid===t?r(r({},e),{uuid:void 0}):e}))})})),[2,{previousData:n,queryClient:e}]}}))}))},onSuccess:function(){e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(f,i);var a=t;v({variant:l.AlertVariant.danger,title:"Error deleting item from popularRepo",description:null==a?void 0:a.message})}}})},t.useDeleteContentItemMutate=function(e,n,s,c,f){var v=o([t.CONTENT_LIST_KEY,n,s,f],Object.values(c||{}),!0),h=(0,d.useNotification)().notify;return(0,u.useMutation)(p.deleteContentListItem,{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return[4,e.cancelQueries(v)];case 1:return i.sent(),n=e.getQueryData(v)||{},e.setQueryData(v,(function(){var e;return r(r({},n),{data:null===(e=n.data)||void 0===e?void 0:e.filter((function(e){return t!==e.uuid})),meta:n.meta?r(r({},n.meta),{count:n.meta.count?n.meta.count-1:1}):void 0})})),[2,{previousData:n,queryClient:e}]}}))}))},onSuccess:function(n,r,i){var a=i.previousData;e.setQueriesData(t.CONTENT_LIST_KEY,(function(e){var t,n;return void 0===e&&(e={}),(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.count)&&(e.meta.count=(null===(n=null==a?void 0:a.meta)||void 0===n?void 0:n.count)-1),e})),e.invalidateQueries(t.CONTENT_LIST_KEY),e.invalidateQueries(t.POPULAR_REPOSITORIES_LIST_KEY)},onError:function(t,n,r){if(r){var i=r.previousData;e.setQueryData(v,i);var a=t;h({variant:l.AlertVariant.danger,title:"Error deleting item from content list",description:null==a?void 0:a.message})}}})},t.useRepositoryParams=function(){return(0,u.useQuery)(t.REPOSITORY_PARAMS_KEY,p.getRepositoryParams,{keepPreviousData:!0,staleTime:1/0})},t.useFetchGpgKey=function(){var e=(0,d.useNotification)().notify,t=(0,s.useState)(!1),n=t[0],r=t[1];return{fetchGpgKey:function(t){return i(void 0,void 0,Promise,(function(){var n,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:r(!0),n=t,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,p.getGpgKey)(t)];case 2:return s=a.sent(),n=s.gpg_key,[3,4];case 3:return i=a.sent(),o=i.response,s=(void 0===o?{}:o).data,u="string"==typeof s?s:null==s?void 0:s.message,e({variant:l.AlertVariant.danger,title:"Error fetching GPG key from provided URL",description:u}),[3,4];case 4:return r(!1),[2,n]}}))}))},isLoading:n}},t.useGetPackagesQuery=function(e,n,r,i,a,o){return(0,u.useQuery)([t.PACKAGES_KEY,e,r,i,a,o,n],(function(){return(0,p.getPackages)(e,r,i,a,o)}),{keepPreviousData:!0,optimisticResults:!0,staleTime:6e4,onError:function(e){var t=e;(0,(0,d.useNotification)().notify)({variant:l.AlertVariant.danger,title:"Error fetching rpm packages",description:null==t?void 0:t.message})}})},t.useIntrospectRepositoryMutate=function(e,n,s,f,v){var h=o([t.CONTENT_LIST_KEY,n,s,v],Object.values(f||{}),!0),g=(0,d.useNotification)().notify;return(0,u.useMutation)(p.introspectRepository,{onMutate:function(t){return i(void 0,void 0,void 0,(function(){var n,i,o,l,s;return a(this,(function(a){switch(a.label){case 0:return[4,e.cancelQueries(h)];case 1:return a.sent(),n=e.getQueryData(h)||{},i=null===(s=null===(l=n.data)||void 0===l?void 0:l.find((function(e){return t.uuid==e.uuid})))||void 0===s?void 0:s.status,o=(0,c.cloneDeep)(n),i&&(o.data.filter((function(e){return t.uuid==e.uuid})).at(0).status="Pending"),e.setQueryData(h,(function(){return r({},o)})),[2,{previousData:n,queryClient:e}]}}))}))},onSuccess:function(){g({variant:l.AlertVariant.success,title:"Repository introspection in progress"})},onError:function(t,n,r){var i,a,o,s,u;if(r){var c=null==t?void 0:t.message;switch(typeof(null===(i=null==t?void 0:t.response)||void 0===i?void 0:i.data)){case"string":c=null===(a=null==t?void 0:t.response)||void 0===a?void 0:a.data;break;case"object":null===(u=null===(s=null===(o=null==t?void 0:t.response)||void 0===o?void 0:o.data.errors)||void 0===s?void 0:s.find((function(e){var t=e.detail;t&&(c=t)})))||void 0===u||u.detail}var d=r.previousData;e.setQueryData(h,d),g({variant:l.AlertVariant.danger,title:"Error introspecting repository",description:c})}}})}},73773:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useNotification=void 0;var r=n(83215),i=n(86706);t.useNotification=function(){var e=(0,i.useDispatch)();return{notify:function(t){return e((0,r.addNotification)(t))}}}},91171:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(44439),i=n(92950);t.default=function(e,t){var n=(0,i.useState)(e),a=n[0],o=n[1];return(0,i.useEffect)((function(){if(!(0,r.isEqual)(e,a)){var n=setTimeout((function(){return o(e)}),t||500);return function(){clearTimeout(n)}}}),[e,t]),a}},16239:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.resetStore=t.createStore=void 0;var i=n(55128);t.createStore=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.initStore.apply(void 0,r([{},{}],e,!1))},t.resetStore=function(){return(0,i.restoreStore)()}},4147:e=>{e.exports=JSON.parse('{"name":"content-sources-frontend","version":"0.0.1","private":false,"engines":{"node":"=16.14.0","npm":">=8.0.0"},"scripts":{"build":"fec build","deploy":"npm-run-all build lint test","lint":"eslint src/**/*.{js,jsx,ts,tsx} --no-error-on-unmatched-pattern","lint:fix":"eslint --fix \'src/**/*.{js,jsx,ts,tsx}\' --no-error-on-unmatched-pattern","format":"prettier --write \'src/**/*.{js,jsx,ts,tsx,css,md}\' --config ./.prettierrc","patch:hosts":"fec patch-etc-hosts","start":"fec dev","test":"TZ=UTC jest --verbose --no-cache","verify":"npm-run-all build lint test"},"dependencies":{"@patternfly/react-core":"^4.206.2","@patternfly/react-icons":"^4.53.16","@patternfly/react-table":"^4.75.2","@redhat-cloud-services/frontend-components":"^3.9.22","@redhat-cloud-services/frontend-components-config":"^4.6.34","@redhat-cloud-services/frontend-components-notifications":"^3.2.12","@redhat-cloud-services/frontend-components-utilities":"^3.3.5","@redhat-cloud-services/insights-common-typescript":"^4.12.3","@testing-library/dom":"^8.13.0","@types/jest":"^27.5.0","@types/node":"^17.0.31","@types/react":"^18.0.8","@types/react-dom":"^18.0.3","@unleash/proxy-client-react":"^3.0.0","axios":"^0.21.1","dayjs":"^1.11.7","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-react-hooks":"^4.6.0","formik":"^2.2.9","lodash":"^4.17.21","prettier":"^2.7.1","react":"^17.0.2","react-dom":"^17.0.2","react-jss":"^10.9.0","react-query":"^3.39.1","react-redux":"^8.0.1","react-router-dom":"^6.0.0","redux":"^4.2.0","typescript":"^4.6.4","yup":"^0.32.11"},"devDependencies":{"@babel/core":"^7.17.10","@babel/plugin-proposal-class-properties":"^7.16.7","@babel/plugin-proposal-object-rest-spread":"^7.17.3","@babel/plugin-syntax-dynamic-import":"^7.8.3","@babel/plugin-transform-runtime":"^7.17.10","@babel/preset-env":"^7.17.10","@babel/preset-react":"^7.16.7","@babel/preset-typescript":"^7.16.7","@testing-library/dom":"^8.13.0","@testing-library/jest-dom":"^5.16.4","@testing-library/react":"^11.2.7","@testing-library/react-hooks":"^7.0.0","@testing-library/user-event":"14.1.1","@types/jest":"^27.5.0","@types/lodash":"^4.14.182","@types/react-router-dom":"^5.3.3","@typescript-eslint/eslint-plugin":"^5.29.0","@typescript-eslint/parser":"^5.29.0","babel-jest":"^28.0.3","babel-plugin-transform-imports":"^2.0.0","eslint":"^7.0.0","eslint-plugin-react":"^7.30.0","identity-obj-proxy":"^3.0.0","insights-common-typescript-dev":"^0.1.21","jest":"^28.0.3","jest-environment-jsdom":"^28.0.3","npm-run-all":"^4.1.5","ts-jest":"^28.0.1","webpack-bundle-analyzer":"^4.5.0"},"insights":{"appname":"content-sources","buildrepo":"git@github.com:RedHatInsights/content-sources-frontend-build.git"}}')},62307:e=>{e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Time-out","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","511":"Network Authentication Required"}')}}]);
//# sourceMappingURL=../sourcemaps/236.b799208d80df1dcc05db2b1b7eaef103.js.map